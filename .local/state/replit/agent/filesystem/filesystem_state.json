{"file_contents":{"frontend/src/components/ui/alert.jsx":{"content":"import * as React from \"react\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props} />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props} />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props} />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1335,"size_tokens":null},"frontend/src/pages/DashboardPage.jsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { API } from \"../App\";\nimport { Button } from \"../components/ui/button\";\nimport { Input } from \"../components/ui/input\";\nimport { Label } from \"../components/ui/label\";\nimport { Textarea } from \"../components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"../components/ui/select\";\nimport { toast } from \"sonner\";\nimport { \n  LayoutDashboard, TrendingUp, TrendingDown, DollarSign, ShoppingCart, \n  Bell, Package, Calendar, Users, Brain, Send, RefreshCw, Plus, \n  Trash2, Check, X, AlertTriangle, Clock, ChevronRight, Sparkles,\n  ArrowUpRight, ArrowDownRight, BarChart3, PieChart, Wallet, Receipt,\n  LogOut, Settings, ArrowLeft\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\n// Simple Line Chart component\nconst SimpleLineChart = ({ data, height = 200 }) => {\n  if (!data || data.length === 0) return null;\n  \n  const maxValue = Math.max(...data.map(d => Math.max(d.revenus || 0, d.depenses || 0)));\n  const minValue = 0;\n  const range = maxValue - minValue || 1;\n  \n  const getY = (value) => height - ((value - minValue) / range) * (height - 40);\n  const getX = (index) => (index / (data.length - 1 || 1)) * 100;\n  \n  const revenusPoints = data.map((d, i) => `${getX(i)}%,${getY(d.revenus || 0)}`).join(' ');\n  const depensesPoints = data.map((d, i) => `${getX(i)}%,${getY(d.depenses || 0)}`).join(' ');\n  \n  return (\n    <div className=\"relative w-full\" style={{ height }}>\n      <svg width=\"100%\" height={height} className=\"overflow-visible\">\n        {/* Grid lines */}\n        {[0, 25, 50, 75, 100].map((percent) => (\n          <line \n            key={percent}\n            x1=\"0\" \n            y1={height - (percent / 100) * (height - 40)} \n            x2=\"100%\" \n            y2={height - (percent / 100) * (height - 40)}\n            stroke=\"rgba(255,255,255,0.1)\"\n            strokeDasharray=\"4\"\n          />\n        ))}\n        \n        {/* Revenus line */}\n        <polyline\n          fill=\"none\"\n          stroke=\"#D4AF37\"\n          strokeWidth=\"2\"\n          points={revenusPoints}\n        />\n        \n        {/* Depenses line */}\n        <polyline\n          fill=\"none\"\n          stroke=\"#EF4444\"\n          strokeWidth=\"2\"\n          strokeDasharray=\"5,5\"\n          points={depensesPoints}\n        />\n        \n        {/* Data points */}\n        {data.map((d, i) => (\n          <g key={i}>\n            <circle cx={`${getX(i)}%`} cy={getY(d.revenus || 0)} r=\"4\" fill=\"#D4AF37\" />\n            <circle cx={`${getX(i)}%`} cy={getY(d.depenses || 0)} r=\"3\" fill=\"#EF4444\" />\n          </g>\n        ))}\n      </svg>\n      \n      {/* Legend */}\n      <div className=\"flex items-center gap-6 mt-4 justify-center\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-3 rounded-full bg-[#D4AF37]\"></div>\n          <span className=\"text-xs text-[#A3B1AD]\">Revenus</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-0.5 bg-[#EF4444]\" style={{borderStyle: 'dashed'}}></div>\n          <span className=\"text-xs text-[#A3B1AD]\">D√©penses</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst DashboardPage = () => {\n  const navigate = useNavigate();\n  \n  // Stats state\n  const [stats, setStats] = useState(null);\n  const [chartData, setChartData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Data states\n  const [notifications, setNotifications] = useState([]);\n  const [orders, setOrders] = useState([]);\n  const [stock, setStock] = useState([]);\n  const [reservations, setReservations] = useState([]);\n  const [transactions, setTransactions] = useState([]);\n  \n  // AI states\n  const [aiInsights, setAiInsights] = useState(null);\n  const [aiForecast, setAiForecast] = useState(null);\n  const [aiMessage, setAiMessage] = useState(\"\");\n  const [aiResponse, setAiResponse] = useState(\"\");\n  const [aiLoading, setAiLoading] = useState(false);\n  const [aiConfigured, setAiConfigured] = useState(false);\n  \n  // UI states\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const [showAddTransaction, setShowAddTransaction] = useState(false);\n  \n  // Transaction form\n  const [newTransaction, setNewTransaction] = useState({\n    type: \"revenu\",\n    category: \"ventes\",\n    amount: \"\",\n    description: \"\",\n    payment_method: \"cash\"\n  });\n\n  // Stock form\n  const [showAddStock, setShowAddStock] = useState(false);\n  const [newStock, setNewStock] = useState({\n    name: \"\",\n    category: \"ingredients\",\n    quantity: \"\",\n    unit: \"kg\",\n    min_quantity: \"\",\n    price_per_unit: \"\",\n    supplier: \"\"\n  });\n\n  useEffect(() => {\n    fetchAllData();\n    checkAIStatus();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const fetchAllData = async () => {\n    setLoading(true);\n    try {\n      const [statsRes, chartRes, notifsRes, ordersRes, stockRes, reservRes, transRes] = await Promise.all([\n        axios.get(`${API}/dashboard/stats`),\n        axios.get(`${API}/dashboard/chart-data?period=7`),\n        axios.get(`${API}/notifications`),\n        axios.get(`${API}/orders?limit=10`),\n        axios.get(`${API}/stock`),\n        axios.get(`${API}/reservations`),\n        axios.get(`${API}/transactions?limit=20`)\n      ]);\n      \n      setStats(statsRes.data);\n      setChartData(chartRes.data);\n      setNotifications(notifsRes.data);\n      setOrders(ordersRes.data);\n      setStock(stockRes.data);\n      setReservations(reservRes.data);\n      setTransactions(transRes.data);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      // Try to seed data if empty\n      try {\n        await axios.post(`${API}/seed-dashboard`);\n        toast.success(\"Donn√©es de d√©mo initialis√©es\");\n        fetchAllData();\n      } catch (e) {\n        console.error(\"Seed error:\", e);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkAIStatus = async () => {\n    try {\n      const response = await axios.get(`${API}/ai/status`);\n      setAiConfigured(response.data.configured);\n    } catch (error) {\n      console.error(\"AI status error:\", error);\n    }\n  };\n\n  const fetchAIInsights = async () => {\n    setAiLoading(true);\n    try {\n      const response = await axios.post(`${API}/ai/insights`);\n      setAiInsights(response.data);\n      toast.success(\"Insights IA g√©n√©r√©s\");\n    } catch (error) {\n      toast.error(\"Erreur lors de la g√©n√©ration des insights\");\n    } finally {\n      setAiLoading(false);\n    }\n  };\n\n  const fetchAIForecast = async () => {\n    setAiLoading(true);\n    try {\n      const response = await axios.post(`${API}/ai/forecast`);\n      setAiForecast(response.data);\n      toast.success(\"Pr√©visions g√©n√©r√©es\");\n    } catch (error) {\n      toast.error(\"Erreur lors de la g√©n√©ration des pr√©visions\");\n    } finally {\n      setAiLoading(false);\n    }\n  };\n\n  const sendAIMessage = async () => {\n    if (!aiMessage.trim()) return;\n    \n    setAiLoading(true);\n    try {\n      const response = await axios.post(`${API}/ai/chat`, { message: aiMessage });\n      setAiResponse(response.data.response);\n      setAiMessage(\"\");\n    } catch (error) {\n      toast.error(\"Erreur de l'assistant\");\n    } finally {\n      setAiLoading(false);\n    }\n  };\n\n  const markNotificationRead = async (id) => {\n    try {\n      await axios.put(`${API}/notifications/${id}/read`);\n      setNotifications(notifications.map(n => n.id === id ? {...n, is_read: true} : n));\n    } catch (error) {\n      toast.error(\"Erreur\");\n    }\n  };\n\n  const updateOrderStatus = async (orderId, status) => {\n    try {\n      await axios.put(`${API}/orders/${orderId}?status=${status}`);\n      toast.success(\"Commande mise √† jour\");\n      fetchAllData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la mise √† jour\");\n    }\n  };\n\n  const handleAddTransaction = async (e) => {\n    e.preventDefault();\n    if (!newTransaction.amount || !newTransaction.description) {\n      toast.error(\"Remplissez tous les champs\");\n      return;\n    }\n    \n    try {\n      await axios.post(`${API}/transactions`, {\n        ...newTransaction,\n        amount: parseInt(newTransaction.amount)\n      });\n      toast.success(\"Transaction ajout√©e\");\n      setShowAddTransaction(false);\n      setNewTransaction({ type: \"revenu\", category: \"ventes\", amount: \"\", description: \"\", payment_method: \"cash\" });\n      fetchAllData();\n    } catch (error) {\n      toast.error(\"Erreur lors de l'ajout\");\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"adminToken\");\n    toast.success(\"D√©connexion r√©ussie\");\n    navigate(\"/\");\n  };\n\n  const handleAddStock = async (e) => {\n    e.preventDefault();\n    if (!newStock.name || !newStock.quantity || !newStock.min_quantity) {\n      toast.error(\"Remplissez tous les champs obligatoires\");\n      return;\n    }\n    \n    try {\n      await axios.post(`${API}/stock`, {\n        ...newStock,\n        quantity: parseFloat(newStock.quantity),\n        min_quantity: parseFloat(newStock.min_quantity),\n        price_per_unit: parseInt(newStock.price_per_unit) || 0\n      });\n      toast.success(\"Article ajout√© au stock\");\n      setShowAddStock(false);\n      setNewStock({ name: \"\", category: \"ingredients\", quantity: \"\", unit: \"kg\", min_quantity: \"\", price_per_unit: \"\", supplier: \"\" });\n      fetchAllData();\n    } catch (error) {\n      toast.error(\"Erreur lors de l'ajout\");\n    }\n  };\n\n  const handleDeleteStock = async (itemId) => {\n    if (!window.confirm(\"Supprimer cet article du stock ?\")) return;\n    try {\n      await axios.delete(`${API}/stock/${itemId}`);\n      toast.success(\"Article supprim√©\");\n      fetchAllData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\");\n    }\n  };\n\n  const handleUpdateStockQuantity = async (itemId, currentQty, operation) => {\n    const amount = prompt(`Quantit√© √† ${operation === 'add' ? 'ajouter' : 'retirer'}:`);\n    if (!amount) return;\n    \n    try {\n      await axios.put(`${API}/stock/${itemId}?quantity=${parseFloat(amount)}&operation=${operation}`);\n      toast.success(\"Stock mis √† jour\");\n      fetchAllData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la mise √† jour\");\n    }\n  };\n\n  const formatMoney = (amount) => {\n    return new Intl.NumberFormat('fr-FR').format(amount || 0) + ' FCFA';\n  };\n\n  const getPriorityColor = (priority) => {\n    switch(priority) {\n      case 'urgente': return 'bg-red-500/20 text-red-400';\n      case 'haute': return 'bg-orange-500/20 text-orange-400';\n      case 'normale': return 'bg-blue-500/20 text-blue-400';\n      default: return 'bg-gray-500/20 text-gray-400';\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch(status) {\n      case 'en_attente': return 'bg-yellow-500/20 text-yellow-400';\n      case 'en_preparation': return 'bg-blue-500/20 text-blue-400';\n      case 'pret': return 'bg-green-500/20 text-green-400';\n      case 'livre': return 'bg-emerald-500/20 text-emerald-400';\n      case 'annule': return 'bg-red-500/20 text-red-400';\n      default: return 'bg-gray-500/20 text-gray-400';\n    }\n  };\n\n  const tabs = [\n    { id: \"overview\", label: \"Vue d'ensemble\", icon: LayoutDashboard },\n    { id: \"comptabilite\", label: \"Comptabilit√©\", icon: Wallet },\n    { id: \"commandes\", label: \"Commandes\", icon: ShoppingCart },\n    { id: \"stock\", label: \"Stock\", icon: Package },\n    { id: \"reservations\", label: \"R√©servations\", icon: Calendar },\n    { id: \"ai\", label: \"Assistant IA\", icon: Brain },\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-[#05100D] pt-32 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-[#D4AF37] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-[#A3B1AD]\">Chargement du dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#05100D] pt-28 pb-16\" data-testid=\"dashboard-page\">\n      <div className=\"max-w-7xl mx-auto px-4 md:px-8\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6\">\n          <div>\n            <h1 className=\"text-2xl md:text-3xl text-[#F9F7F2] font-bold\">Dashboard</h1>\n            <p className=\"text-[#A3B1AD] text-sm mt-1\">Gestion compl√®te de votre restaurant</p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <Button onClick={fetchAllData} className=\"bg-white/5 border border-white/10 text-[#A3B1AD] hover:text-[#D4AF37] rounded-full px-4\">\n              <RefreshCw size={16} className=\"mr-2\" />\n              Actualiser\n            </Button>\n            <div className=\"relative\">\n              <Bell size={20} className=\"text-[#A3B1AD]\" />\n              {notifications.filter(n => !n.is_read).length > 0 && (\n                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center text-white\">\n                  {notifications.filter(n => !n.is_read).length}\n                </span>\n              )}\n            </div>\n            <Link \n              to=\"/admin\" \n              className=\"bg-white/5 border border-white/10 text-[#A3B1AD] hover:text-[#D4AF37] hover:border-[#D4AF37]/50 rounded-full px-4 py-2 flex items-center gap-2 text-sm transition-all\"\n              data-testid=\"back-to-admin-btn\"\n            >\n              <Settings size={16} />\n              Gestion contenu\n            </Link>\n            <Button \n              onClick={handleLogout} \n              className=\"bg-red-500/20 border border-red-500/30 text-red-400 hover:bg-red-500/30 rounded-full px-4 py-2 text-sm\"\n              data-testid=\"logout-btn\"\n            >\n              <LogOut size={16} className=\"mr-2\" />\n              D√©connexion\n            </Button>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex flex-wrap gap-2 mb-6 pb-4 border-b border-white/10\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all ${\n                activeTab === tab.id\n                  ? \"bg-[#D4AF37] text-[#0F2E24]\"\n                  : \"bg-white/5 text-[#A3B1AD] border border-white/10 hover:border-[#D4AF37]/50\"\n              }`}\n            >\n              <tab.icon size={16} />\n              {tab.label}\n            </button>\n          ))}\n        </div>\n\n        {/* ==================== VUE D'ENSEMBLE ==================== */}\n        {activeTab === \"overview\" && (\n          <div className=\"space-y-6\">\n            {/* KPI Cards */}\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n              <motion.div \n                initial={{ opacity: 0, y: 20 }} \n                animate={{ opacity: 1, y: 0 }}\n                className=\"luxury-card p-5 rounded-2xl\"\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-[#A3B1AD] text-xs uppercase tracking-wider\">Revenus Jour</span>\n                  <DollarSign size={18} className=\"text-[#D4AF37]\" />\n                </div>\n                <p className=\"text-xl md:text-2xl font-bold text-[#F9F7F2]\">{formatMoney(stats?.revenus?.aujourd_hui)}</p>\n                <div className=\"flex items-center mt-2 text-xs\">\n                  {stats?.revenus?.tendance > 0 ? (\n                    <><ArrowUpRight size={14} className=\"text-green-400\" /><span className=\"text-green-400\">+{stats?.revenus?.tendance}%</span></>\n                  ) : (\n                    <><ArrowDownRight size={14} className=\"text-red-400\" /><span className=\"text-red-400\">{stats?.revenus?.tendance}%</span></>\n                  )}\n                  <span className=\"text-[#A3B1AD] ml-1\">vs hier</span>\n                </div>\n              </motion.div>\n\n              <motion.div \n                initial={{ opacity: 0, y: 20 }} \n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.1 }}\n                className=\"luxury-card p-5 rounded-2xl\"\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-[#A3B1AD] text-xs uppercase tracking-wider\">B√©n√©fice Mois</span>\n                  <TrendingUp size={18} className=\"text-green-400\" />\n                </div>\n                <p className=\"text-xl md:text-2xl font-bold text-[#F9F7F2]\">{formatMoney(stats?.benefices?.mois)}</p>\n                <p className=\"text-xs text-[#A3B1AD] mt-2\">Revenus - D√©penses</p>\n              </motion.div>\n\n              <motion.div \n                initial={{ opacity: 0, y: 20 }} \n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.2 }}\n                className=\"luxury-card p-5 rounded-2xl\"\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-[#A3B1AD] text-xs uppercase tracking-wider\">Commandes</span>\n                  <ShoppingCart size={18} className=\"text-blue-400\" />\n                </div>\n                <p className=\"text-xl md:text-2xl font-bold text-[#F9F7F2]\">{stats?.commandes?.aujourd_hui || 0}</p>\n                <p className=\"text-xs text-orange-400 mt-2\">{stats?.commandes?.en_attente || 0} en attente</p>\n              </motion.div>\n\n              <motion.div \n                initial={{ opacity: 0, y: 20 }} \n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.3 }}\n                className=\"luxury-card p-5 rounded-2xl\"\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <span className=\"text-[#A3B1AD] text-xs uppercase tracking-wider\">Alertes</span>\n                  <AlertTriangle size={18} className=\"text-orange-400\" />\n                </div>\n                <p className=\"text-xl md:text-2xl font-bold text-[#F9F7F2]\">{stats?.alertes_stock || 0}</p>\n                <p className=\"text-xs text-[#A3B1AD] mt-2\">Stock bas</p>\n              </motion.div>\n            </div>\n\n            {/* Chart & Notifications */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Chart */}\n              <div className=\"lg:col-span-2 luxury-card p-6 rounded-2xl\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">√âvolution 7 jours</h3>\n                  <BarChart3 size={20} className=\"text-[#D4AF37]\" />\n                </div>\n                <SimpleLineChart data={chartData} height={220} />\n              </div>\n\n              {/* Notifications */}\n              <div className=\"luxury-card p-6 rounded-2xl\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">Notifications</h3>\n                  <span className=\"text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded-full\">\n                    {notifications.filter(n => !n.is_read).length} nouvelles\n                  </span>\n                </div>\n                <div className=\"space-y-3 max-h-[250px] overflow-y-auto\">\n                  {notifications.slice(0, 5).map((notif) => (\n                    <div \n                      key={notif.id} \n                      className={`p-3 rounded-xl border border-white/5 ${notif.is_read ? 'opacity-60' : 'bg-white/5'}`}\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className={`text-[10px] px-2 py-0.5 rounded-full ${getPriorityColor(notif.priority)}`}>\n                              {notif.priority}\n                            </span>\n                            <span className=\"text-[10px] text-[#A3B1AD]\">{notif.type}</span>\n                          </div>\n                          <p className=\"text-sm text-[#F9F7F2] font-medium\">{notif.title}</p>\n                          <p className=\"text-xs text-[#A3B1AD] mt-1\">{notif.message}</p>\n                        </div>\n                        {!notif.is_read && (\n                          <button onClick={() => markNotificationRead(notif.id)} className=\"text-[#D4AF37] hover:text-white\">\n                            <Check size={16} />\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Actions & Reservations */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Today's Reservations */}\n              <div className=\"luxury-card p-6 rounded-2xl\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">R√©servations du jour</h3>\n                  <Calendar size={20} className=\"text-[#D4AF37]\" />\n                </div>\n                {reservations.filter(r => r.date === new Date().toISOString().split('T')[0]).length === 0 ? (\n                  <p className=\"text-[#A3B1AD] text-sm text-center py-8\">Aucune r√©servation aujourd'hui</p>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {reservations.filter(r => r.date === new Date().toISOString().split('T')[0]).map((res) => (\n                      <div key={res.id} className=\"flex items-center justify-between p-3 bg-white/5 rounded-xl\">\n                        <div>\n                          <p className=\"text-[#F9F7F2] font-medium\">{res.customer_name}</p>\n                          <p className=\"text-xs text-[#A3B1AD]\">{res.guests} personnes ‚Ä¢ {res.time}</p>\n                        </div>\n                        <span className={`text-xs px-2 py-1 rounded-full ${getStatusColor(res.status)}`}>\n                          {res.status}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              {/* Recent Orders */}\n              <div className=\"luxury-card p-6 rounded-2xl\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">Commandes r√©centes</h3>\n                  <ShoppingCart size={20} className=\"text-[#D4AF37]\" />\n                </div>\n                {orders.length === 0 ? (\n                  <p className=\"text-[#A3B1AD] text-sm text-center py-8\">Aucune commande</p>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {orders.slice(0, 4).map((order) => (\n                      <div key={order.id} className=\"flex items-center justify-between p-3 bg-white/5 rounded-xl\">\n                        <div>\n                          <p className=\"text-[#F9F7F2] font-medium\">{order.order_number}</p>\n                          <p className=\"text-xs text-[#A3B1AD]\">{formatMoney(order.total)}</p>\n                        </div>\n                        <span className={`text-xs px-2 py-1 rounded-full ${getStatusColor(order.status)}`}>\n                          {order.status.replace('_', ' ')}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* ==================== COMPTABILIT√â ==================== */}\n        {activeTab === \"comptabilite\" && (\n          <div className=\"space-y-6\">\n            {/* Summary Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"luxury-card p-6 rounded-2xl border-l-4 border-green-500\">\n                <p className=\"text-[#A3B1AD] text-sm mb-2\">Revenus du mois</p>\n                <p className=\"text-2xl font-bold text-green-400\">{formatMoney(stats?.revenus?.mois)}</p>\n              </div>\n              <div className=\"luxury-card p-6 rounded-2xl border-l-4 border-red-500\">\n                <p className=\"text-[#A3B1AD] text-sm mb-2\">D√©penses du mois</p>\n                <p className=\"text-2xl font-bold text-red-400\">{formatMoney(stats?.depenses?.mois)}</p>\n              </div>\n              <div className=\"luxury-card p-6 rounded-2xl border-l-4 border-[#D4AF37]\">\n                <p className=\"text-[#A3B1AD] text-sm mb-2\">B√©n√©fice net</p>\n                <p className=\"text-2xl font-bold text-[#D4AF37]\">{formatMoney(stats?.benefices?.mois)}</p>\n              </div>\n            </div>\n\n            {/* Add Transaction */}\n            <div className=\"luxury-card p-6 rounded-2xl\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">Ajouter une transaction</h3>\n                <Button onClick={() => setShowAddTransaction(!showAddTransaction)} className=\"btn-gold text-sm\">\n                  <Plus size={16} className=\"mr-2\" />\n                  Nouvelle\n                </Button>\n              </div>\n\n              <AnimatePresence>\n                {showAddTransaction && (\n                  <motion.form \n                    initial={{ height: 0, opacity: 0 }}\n                    animate={{ height: \"auto\", opacity: 1 }}\n                    exit={{ height: 0, opacity: 0 }}\n                    onSubmit={handleAddTransaction}\n                    className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 overflow-hidden\"\n                  >\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Type</Label>\n                      <Select value={newTransaction.type} onValueChange={(v) => setNewTransaction({...newTransaction, type: v})}>\n                        <SelectTrigger className=\"input-luxury\"><SelectValue /></SelectTrigger>\n                        <SelectContent className=\"bg-[#0F2E24] border border-white/10\">\n                          <SelectItem value=\"revenu\">Revenu</SelectItem>\n                          <SelectItem value=\"depense\">D√©pense</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Cat√©gorie</Label>\n                      <Select value={newTransaction.category} onValueChange={(v) => setNewTransaction({...newTransaction, category: v})}>\n                        <SelectTrigger className=\"input-luxury\"><SelectValue /></SelectTrigger>\n                        <SelectContent className=\"bg-[#0F2E24] border border-white/10\">\n                          {newTransaction.type === \"revenu\" ? (\n                            <>\n                              <SelectItem value=\"ventes\">Ventes</SelectItem>\n                              <SelectItem value=\"livraison\">Livraison</SelectItem>\n                              <SelectItem value=\"evenements\">√âv√©nements</SelectItem>\n                            </>\n                          ) : (\n                            <>\n                              <SelectItem value=\"ingredients\">Ingr√©dients</SelectItem>\n                              <SelectItem value=\"personnel\">Personnel</SelectItem>\n                              <SelectItem value=\"loyer\">Loyer</SelectItem>\n                              <SelectItem value=\"utilities\">Utilities</SelectItem>\n                              <SelectItem value=\"marketing\">Marketing</SelectItem>\n                              <SelectItem value=\"equipement\">√âquipement</SelectItem>\n                            </>\n                          )}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Montant (FCFA)</Label>\n                      <Input \n                        type=\"number\" \n                        placeholder=\"50000\" \n                        value={newTransaction.amount}\n                        onChange={(e) => setNewTransaction({...newTransaction, amount: e.target.value})}\n                        className=\"input-luxury\"\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Description</Label>\n                      <Input \n                        placeholder=\"Description...\" \n                        value={newTransaction.description}\n                        onChange={(e) => setNewTransaction({...newTransaction, description: e.target.value})}\n                        className=\"input-luxury\"\n                      />\n                    </div>\n                    <div className=\"flex items-end\">\n                      <Button type=\"submit\" className=\"w-full btn-gold\">Ajouter</Button>\n                    </div>\n                  </motion.form>\n                )}\n              </AnimatePresence>\n            </div>\n\n            {/* Transactions List */}\n            <div className=\"luxury-card p-6 rounded-2xl\">\n              <h3 className=\"text-lg font-semibold text-[#F9F7F2] mb-4\">Historique des transactions</h3>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className=\"border-b border-white/10\">\n                      <th className=\"text-left text-xs text-[#A3B1AD] py-3 px-2\">Date</th>\n                      <th className=\"text-left text-xs text-[#A3B1AD] py-3 px-2\">Type</th>\n                      <th className=\"text-left text-xs text-[#A3B1AD] py-3 px-2\">Cat√©gorie</th>\n                      <th className=\"text-left text-xs text-[#A3B1AD] py-3 px-2\">Description</th>\n                      <th className=\"text-right text-xs text-[#A3B1AD] py-3 px-2\">Montant</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {transactions.map((t) => (\n                      <tr key={t.id} className=\"border-b border-white/5 hover:bg-white/5\">\n                        <td className=\"py-3 px-2 text-sm text-[#A3B1AD]\">{t.date}</td>\n                        <td className=\"py-3 px-2\">\n                          <span className={`text-xs px-2 py-1 rounded-full ${t.type === 'revenu' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}`}>\n                            {t.type}\n                          </span>\n                        </td>\n                        <td className=\"py-3 px-2 text-sm text-[#F9F7F2]\">{t.category}</td>\n                        <td className=\"py-3 px-2 text-sm text-[#A3B1AD]\">{t.description}</td>\n                        <td className={`py-3 px-2 text-sm text-right font-medium ${t.type === 'revenu' ? 'text-green-400' : 'text-red-400'}`}>\n                          {t.type === 'revenu' ? '+' : '-'}{formatMoney(t.amount)}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* ==================== COMMANDES ==================== */}\n        {activeTab === \"commandes\" && (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {orders.map((order) => (\n                <div key={order.id} className=\"luxury-card p-5 rounded-2xl\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div>\n                      <p className=\"text-lg font-bold text-[#F9F7F2]\">{order.order_number}</p>\n                      <p className=\"text-xs text-[#A3B1AD]\">{order.customer_name || 'Client anonyme'}</p>\n                    </div>\n                    <span className={`text-xs px-3 py-1 rounded-full ${getStatusColor(order.status)}`}>\n                      {order.status.replace('_', ' ')}\n                    </span>\n                  </div>\n                  \n                  <div className=\"space-y-2 mb-4\">\n                    {order.items?.map((item, i) => (\n                      <div key={i} className=\"flex justify-between text-sm\">\n                        <span className=\"text-[#A3B1AD]\">{item.quantity}x {item.name}</span>\n                        <span className=\"text-[#F9F7F2]\">{formatMoney(item.price * item.quantity)}</span>\n                      </div>\n                    ))}\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between pt-4 border-t border-white/10\">\n                    <p className=\"text-lg font-bold text-[#D4AF37]\">{formatMoney(order.total)}</p>\n                    <div className=\"flex gap-2\">\n                      {order.status === 'en_attente' && (\n                        <Button onClick={() => updateOrderStatus(order.id, 'en_preparation')} className=\"bg-blue-500/20 text-blue-400 text-xs px-3 py-1\">\n                          Pr√©parer\n                        </Button>\n                      )}\n                      {order.status === 'en_preparation' && (\n                        <Button onClick={() => updateOrderStatus(order.id, 'pret')} className=\"bg-green-500/20 text-green-400 text-xs px-3 py-1\">\n                          Pr√™t\n                        </Button>\n                      )}\n                      {order.status === 'pret' && (\n                        <Button onClick={() => updateOrderStatus(order.id, 'livre')} className=\"btn-gold text-xs px-3 py-1\">\n                          Livr√©\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* ==================== STOCK ==================== */}\n        {activeTab === \"stock\" && (\n          <div className=\"space-y-6\">\n            {/* Add Stock Form */}\n            <div className=\"luxury-card p-6 rounded-2xl\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">Gestion du stock</h3>\n                <Button onClick={() => setShowAddStock(!showAddStock)} className=\"btn-gold text-sm\">\n                  <Plus size={16} className=\"mr-2\" />\n                  Ajouter un article\n                </Button>\n              </div>\n\n              <AnimatePresence>\n                {showAddStock && (\n                  <motion.form \n                    initial={{ height: 0, opacity: 0 }}\n                    animate={{ height: \"auto\", opacity: 1 }}\n                    exit={{ height: 0, opacity: 0 }}\n                    onSubmit={handleAddStock}\n                    className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 overflow-hidden mb-6 pb-6 border-b border-white/10\"\n                  >\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Nom de l'article *</Label>\n                      <Input \n                        placeholder=\"Ex: Poulet, Bissap, Riz...\" \n                        value={newStock.name}\n                        onChange={(e) => setNewStock({...newStock, name: e.target.value})}\n                        className=\"input-luxury\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Cat√©gorie</Label>\n                      <Select value={newStock.category} onValueChange={(v) => setNewStock({...newStock, category: v})}>\n                        <SelectTrigger className=\"input-luxury\"><SelectValue /></SelectTrigger>\n                        <SelectContent className=\"bg-[#0F2E24] border border-white/10\">\n                          <SelectItem value=\"viandes\">üçñ Viandes</SelectItem>\n                          <SelectItem value=\"poissons\">üêü Poissons</SelectItem>\n                          <SelectItem value=\"legumes\">ü•¨ L√©gumes</SelectItem>\n                          <SelectItem value=\"feculents\">üçö F√©culents</SelectItem>\n                          <SelectItem value=\"epices\">üå∂Ô∏è √âpices</SelectItem>\n                          <SelectItem value=\"huiles\">ü´í Huiles</SelectItem>\n                          <SelectItem value=\"boissons\">ü•§ Boissons</SelectItem>\n                          <SelectItem value=\"alcools\">üç∫ Alcools</SelectItem>\n                          <SelectItem value=\"desserts\">üç∞ Desserts</SelectItem>\n                          <SelectItem value=\"emballages\">üì¶ Emballages</SelectItem>\n                          <SelectItem value=\"autres\">üìã Autres</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Quantit√© *</Label>\n                      <div className=\"flex gap-2\">\n                        <Input \n                          type=\"number\" \n                          step=\"0.1\"\n                          placeholder=\"10\" \n                          value={newStock.quantity}\n                          onChange={(e) => setNewStock({...newStock, quantity: e.target.value})}\n                          className=\"input-luxury flex-1\"\n                          required\n                        />\n                        <Select value={newStock.unit} onValueChange={(v) => setNewStock({...newStock, unit: v})}>\n                          <SelectTrigger className=\"input-luxury w-24\"><SelectValue /></SelectTrigger>\n                          <SelectContent className=\"bg-[#0F2E24] border border-white/10\">\n                            <SelectItem value=\"kg\">kg</SelectItem>\n                            <SelectItem value=\"g\">g</SelectItem>\n                            <SelectItem value=\"L\">L</SelectItem>\n                            <SelectItem value=\"mL\">mL</SelectItem>\n                            <SelectItem value=\"unites\">unit√©s</SelectItem>\n                            <SelectItem value=\"cartons\">cartons</SelectItem>\n                            <SelectItem value=\"bouteilles\">bout.</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Seuil minimum *</Label>\n                      <Input \n                        type=\"number\" \n                        step=\"0.1\"\n                        placeholder=\"5\" \n                        value={newStock.min_quantity}\n                        onChange={(e) => setNewStock({...newStock, min_quantity: e.target.value})}\n                        className=\"input-luxury\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Prix unitaire (FCFA)</Label>\n                      <Input \n                        type=\"number\" \n                        placeholder=\"3500\" \n                        value={newStock.price_per_unit}\n                        onChange={(e) => setNewStock({...newStock, price_per_unit: e.target.value})}\n                        className=\"input-luxury\"\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Fournisseur</Label>\n                      <Input \n                        placeholder=\"Nom du fournisseur\" \n                        value={newStock.supplier}\n                        onChange={(e) => setNewStock({...newStock, supplier: e.target.value})}\n                        className=\"input-luxury\"\n                      />\n                    </div>\n                    <div className=\"flex items-end lg:col-span-2\">\n                      <Button type=\"submit\" className=\"w-full btn-gold\">Ajouter au stock</Button>\n                    </div>\n                  </motion.form>\n                )}\n              </AnimatePresence>\n\n              {/* Stock Categories Summary */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 mb-6\">\n                {['viandes', 'poissons', 'legumes', 'boissons', 'epices', 'feculents'].map(cat => {\n                  const count = stock.filter(s => s.category === cat).length;\n                  const lowCount = stock.filter(s => s.category === cat && s.quantity <= s.min_quantity).length;\n                  return (\n                    <div key={cat} className=\"bg-white/5 rounded-xl p-3 text-center\">\n                      <p className=\"text-xs text-[#A3B1AD] capitalize\">{cat}</p>\n                      <p className=\"text-lg font-bold text-[#F9F7F2]\">{count}</p>\n                      {lowCount > 0 && <p className=\"text-[10px] text-red-400\">{lowCount} bas</p>}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Stock Table */}\n            <div className=\"luxury-card p-6 rounded-2xl\">\n              <h4 className=\"text-md font-semibold text-[#F9F7F2] mb-4\">Inventaire complet</h4>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className=\"border-b border-white/10\">\n                      <th className=\"text-left text-xs text-[#A3B1AD] py-3 px-2\">Article</th>\n                      <th className=\"text-left text-xs text-[#A3B1AD] py-3 px-2\">Cat√©gorie</th>\n                      <th className=\"text-center text-xs text-[#A3B1AD] py-3 px-2\">Quantit√©</th>\n                      <th className=\"text-center text-xs text-[#A3B1AD] py-3 px-2\">Min</th>\n                      <th className=\"text-right text-xs text-[#A3B1AD] py-3 px-2\">Prix/unit√©</th>\n                      <th className=\"text-left text-xs text-[#A3B1AD] py-3 px-2\">Fournisseur</th>\n                      <th className=\"text-center text-xs text-[#A3B1AD] py-3 px-2\">Statut</th>\n                      <th className=\"text-center text-xs text-[#A3B1AD] py-3 px-2\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {stock.map((item) => (\n                      <tr key={item.id} className=\"border-b border-white/5 hover:bg-white/5\">\n                        <td className=\"py-3 px-2 text-sm text-[#F9F7F2] font-medium\">{item.name}</td>\n                        <td className=\"py-3 px-2 text-sm text-[#A3B1AD] capitalize\">{item.category}</td>\n                        <td className=\"py-3 px-2 text-sm text-center text-[#F9F7F2]\">{item.quantity} {item.unit}</td>\n                        <td className=\"py-3 px-2 text-sm text-center text-[#A3B1AD]\">{item.min_quantity} {item.unit}</td>\n                        <td className=\"py-3 px-2 text-sm text-right text-[#D4AF37]\">{formatMoney(item.price_per_unit)}</td>\n                        <td className=\"py-3 px-2 text-sm text-[#A3B1AD]\">{item.supplier || '-'}</td>\n                        <td className=\"py-3 px-2 text-center\">\n                          {item.quantity <= item.min_quantity ? (\n                            <span className=\"text-xs px-2 py-1 rounded-full bg-red-500/20 text-red-400\">‚ö†Ô∏è Bas</span>\n                          ) : item.quantity <= item.min_quantity * 1.5 ? (\n                            <span className=\"text-xs px-2 py-1 rounded-full bg-yellow-500/20 text-yellow-400\">Moyen</span>\n                          ) : (\n                            <span className=\"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-400\">OK</span>\n                          )}\n                        </td>\n                        <td className=\"py-3 px-2 text-center\">\n                          <div className=\"flex items-center justify-center gap-1\">\n                            <button \n                              onClick={() => handleUpdateStockQuantity(item.id, item.quantity, 'add')}\n                              className=\"w-7 h-7 rounded-full bg-green-500/20 text-green-400 hover:bg-green-500/30 flex items-center justify-center text-sm\"\n                              title=\"Ajouter\"\n                            >\n                              +\n                            </button>\n                            <button \n                              onClick={() => handleUpdateStockQuantity(item.id, item.quantity, 'subtract')}\n                              className=\"w-7 h-7 rounded-full bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 flex items-center justify-center text-sm\"\n                              title=\"Retirer\"\n                            >\n                              -\n                            </button>\n                            <button \n                              onClick={() => handleDeleteStock(item.id)}\n                              className=\"w-7 h-7 rounded-full bg-red-500/20 text-red-400 hover:bg-red-500/30 flex items-center justify-center\"\n                              title=\"Supprimer\"\n                            >\n                              <Trash2 size={12} />\n                            </button>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n              \n              {stock.length === 0 && (\n                <p className=\"text-[#A3B1AD] text-sm text-center py-8\">\n                  Aucun article en stock. Cliquez sur \"Ajouter un article\" pour commencer.\n                </p>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* ==================== R√âSERVATIONS ==================== */}\n        {activeTab === \"reservations\" && (\n          <div className=\"luxury-card p-6 rounded-2xl\">\n            <h3 className=\"text-lg font-semibold text-[#F9F7F2] mb-4\">R√©servations</h3>\n            <div className=\"space-y-4\">\n              {reservations.map((res) => (\n                <div key={res.id} className=\"flex items-center justify-between p-4 bg-white/5 rounded-xl\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 rounded-full bg-[#D4AF37]/20 flex items-center justify-center\">\n                      <Users size={20} className=\"text-[#D4AF37]\" />\n                    </div>\n                    <div>\n                      <p className=\"text-[#F9F7F2] font-medium\">{res.customer_name}</p>\n                      <p className=\"text-xs text-[#A3B1AD]\">{res.customer_phone}</p>\n                    </div>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-[#F9F7F2] font-medium\">{res.date}</p>\n                    <p className=\"text-xs text-[#D4AF37]\">{res.time}</p>\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-[#F9F7F2] font-medium\">{res.guests}</p>\n                    <p className=\"text-xs text-[#A3B1AD]\">personnes</p>\n                  </div>\n                  <span className={`text-xs px-3 py-1 rounded-full ${getStatusColor(res.status)}`}>\n                    {res.status}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* ==================== ASSISTANT IA ==================== */}\n        {activeTab === \"ai\" && (\n          <div className=\"space-y-6\">\n            {/* AI Status */}\n            <div className={`luxury-card p-4 rounded-2xl flex items-center gap-4 ${aiConfigured ? 'border-l-4 border-green-500' : 'border-l-4 border-orange-500'}`}>\n              <Brain size={24} className={aiConfigured ? 'text-green-400' : 'text-orange-400'} />\n              <div>\n                <p className=\"text-[#F9F7F2] font-medium\">\n                  {aiConfigured ? 'Assistant IA DeepSeek connect√©' : 'Mode d√©mo (API non configur√©e)'}\n                </p>\n                <p className=\"text-xs text-[#A3B1AD]\">\n                  {aiConfigured ? 'Pr√™t pour les analyses et pr√©visions' : 'Ajoutez DEEPSEEK_API_KEY dans .env pour activer l\\'IA compl√®te'}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Insights */}\n              <div className=\"luxury-card p-6 rounded-2xl\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">Insights Business</h3>\n                  <Button onClick={fetchAIInsights} disabled={aiLoading} className=\"btn-gold text-sm\">\n                    <Sparkles size={16} className=\"mr-2\" />\n                    G√©n√©rer\n                  </Button>\n                </div>\n                \n                {aiInsights ? (\n                  <div className=\"space-y-4\">\n                    <div className=\"p-4 bg-[#D4AF37]/10 rounded-xl\">\n                      <p className=\"text-sm text-[#F9F7F2]\">{aiInsights.resume}</p>\n                    </div>\n                    \n                    {aiInsights.points_cles && (\n                      <div>\n                        <p className=\"text-xs text-[#A3B1AD] uppercase mb-2\">Points cl√©s</p>\n                        <ul className=\"space-y-2\">\n                          {aiInsights.points_cles.map((point, i) => (\n                            <li key={i} className=\"flex items-start gap-2 text-sm text-[#F9F7F2]\">\n                              <Check size={14} className=\"text-green-400 mt-1\" />\n                              {point}\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n                    \n                    {aiInsights.recommandations && (\n                      <div>\n                        <p className=\"text-xs text-[#A3B1AD] uppercase mb-2\">Recommandations</p>\n                        <ul className=\"space-y-2\">\n                          {aiInsights.recommandations.map((rec, i) => (\n                            <li key={i} className=\"flex items-start gap-2 text-sm text-[#D4AF37]\">\n                              <ChevronRight size={14} className=\"mt-1\" />\n                              {rec}\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n                    \n                    {aiInsights.alertes && aiInsights.alertes.length > 0 && (\n                      <div className=\"p-3 bg-red-500/10 rounded-xl\">\n                        <p className=\"text-xs text-red-400 uppercase mb-1\">Alertes</p>\n                        {aiInsights.alertes.map((alerte, i) => (\n                          <p key={i} className=\"text-sm text-red-300\">{alerte}</p>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <p className=\"text-[#A3B1AD] text-sm text-center py-8\">\n                    Cliquez sur \"G√©n√©rer\" pour obtenir des insights IA\n                  </p>\n                )}\n              </div>\n\n              {/* Forecast */}\n              <div className=\"luxury-card p-6 rounded-2xl\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-lg font-semibold text-[#F9F7F2]\">Pr√©visions</h3>\n                  <Button onClick={fetchAIForecast} disabled={aiLoading} className=\"btn-gold text-sm\">\n                    <TrendingUp size={16} className=\"mr-2\" />\n                    Pr√©voir\n                  </Button>\n                </div>\n                \n                {aiForecast ? (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-xl\">\n                      <div className={`w-12 h-12 rounded-full flex items-center justify-center ${\n                        aiForecast.tendance === 'hausse' ? 'bg-green-500/20' : \n                        aiForecast.tendance === 'baisse' ? 'bg-red-500/20' : 'bg-blue-500/20'\n                      }`}>\n                        {aiForecast.tendance === 'hausse' ? <TrendingUp className=\"text-green-400\" /> : \n                         aiForecast.tendance === 'baisse' ? <TrendingDown className=\"text-red-400\" /> : \n                         <BarChart3 className=\"text-blue-400\" />}\n                      </div>\n                      <div>\n                        <p className=\"text-[#F9F7F2] font-medium\">Tendance: {aiForecast.tendance}</p>\n                        <p className=\"text-xs text-[#A3B1AD]\">Confiance: {aiForecast.confiance}%</p>\n                      </div>\n                    </div>\n                    \n                    {aiForecast.previsions && (\n                      <div className=\"space-y-2\">\n                        {aiForecast.previsions.slice(0, 5).map((prev, i) => (\n                          <div key={i} className=\"flex justify-between items-center p-2 bg-white/5 rounded-lg\">\n                            <span className=\"text-sm text-[#A3B1AD]\">{prev.date}</span>\n                            <span className=\"text-sm text-[#D4AF37] font-medium\">{formatMoney(prev.revenu_prevu)}</span>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                    \n                    {aiForecast.conseil && (\n                      <div className=\"p-4 bg-[#D4AF37]/10 rounded-xl\">\n                        <p className=\"text-xs text-[#D4AF37] uppercase mb-1\">Conseil</p>\n                        <p className=\"text-sm text-[#F9F7F2]\">{aiForecast.conseil}</p>\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <p className=\"text-[#A3B1AD] text-sm text-center py-8\">\n                    Cliquez sur \"Pr√©voir\" pour g√©n√©rer des pr√©visions\n                  </p>\n                )}\n              </div>\n            </div>\n\n            {/* Chat Assistant */}\n            <div className=\"luxury-card p-6 rounded-2xl\">\n              <h3 className=\"text-lg font-semibold text-[#F9F7F2] mb-4\">Assistant IA</h3>\n              <p className=\"text-sm text-[#A3B1AD] mb-4\">\n                Posez vos questions sur la gestion du restaurant, les performances, les strat√©gies...\n              </p>\n              \n              {aiResponse && (\n                <div className=\"mb-4 p-4 bg-[#1A4D3E]/30 rounded-xl\">\n                  <p className=\"text-xs text-[#D4AF37] uppercase mb-2\">R√©ponse de l'assistant</p>\n                  <p className=\"text-sm text-[#F9F7F2] whitespace-pre-wrap\">{aiResponse}</p>\n                </div>\n              )}\n              \n              <div className=\"flex gap-3\">\n                <Input \n                  placeholder=\"Ex: Comment am√©liorer mes ventes du weekend?\"\n                  value={aiMessage}\n                  onChange={(e) => setAiMessage(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && sendAIMessage()}\n                  className=\"input-luxury flex-1\"\n                />\n                <Button onClick={sendAIMessage} disabled={aiLoading} className=\"btn-gold\">\n                  {aiLoading ? (\n                    <RefreshCw size={18} className=\"animate-spin\" />\n                  ) : (\n                    <Send size={18} />\n                  )}\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DashboardPage;\n","path":null,"size_bytes":55807,"size_tokens":null},"frontend/src/components/ui/command.jsx":{"content":"import * as React from \"react\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props} />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({\n  children,\n  ...props\n}) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0\">\n        <Command\n          className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nconst CommandInput = React.forwardRef(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props} />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props} />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef((props, ref) => (\n  <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props} />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props} />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)}\n      {...props} />\n  );\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":3893,"size_tokens":null},"frontend/src/pages/AboutPage.jsx":{"content":"import { Button } from \"../components/ui/button\";\nimport { motion } from \"framer-motion\";\n\nconst AboutPage = () => {\n  return (\n    <div className=\"min-h-screen bg-[#05100D]\" data-testid=\"about-page\">\n      {/* Hero */}\n      <section className=\"relative min-h-[70vh] flex items-end pb-20\">\n        <div className=\"absolute inset-0\">\n          <img \n            src=\"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/smtxt9or_chl.jpg\"\n            alt=\"L'√©quipe Chez Loman\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-t from-[#05100D] via-[#05100D]/70 to-transparent\"></div>\n        </div>\n        \n        <div className=\"relative z-10 max-w-7xl mx-auto px-6 md:px-12 w-full\">\n          <motion.div\n            initial={{ opacity: 0, y: 40 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 1 }}\n            className=\"max-w-2xl\"\n          >\n            <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n              Notre Histoire\n            </span>\n            <h1 className=\"text-5xl md:text-7xl text-[#F9F7F2] leading-tight\">\n              L'√Çme de la<br/>\n              <span className=\"font-accent italic\">Cuisine Ivoirienne</span>\n            </h1>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Story */}\n      <section className=\"py-24 md:py-32\">\n        <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center\">\n            <motion.div\n              initial={{ opacity: 0, y: 30 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8 }}\n            >\n              <h2 className=\"text-3xl md:text-4xl text-[#F9F7F2] mb-8\">\n                Une Passion Transmise de G√©n√©ration en G√©n√©ration\n              </h2>\n              <div className=\"space-y-6 text-[#A3B1AD] leading-relaxed\">\n                <p>\n                  Chez Loman est n√© d'une passion profonde pour la cuisine ivoirienne authentique. \n                  Notre restaurant est un hommage aux saveurs qui ont berc√© notre enfance, \n                  aux recettes transmises par nos m√®res et grands-m√®res.\n                </p>\n                <p>\n                  Situ√© au c≈ìur de Yopougon, nous avons cr√©√© un espace o√π la tradition \n                  rencontre l'excellence. Chaque plat est pr√©par√© avec des ingr√©dients \n                  soigneusement s√©lectionn√©s et un savoir-faire qui respecte les techniques \n                  ancestrales tout en y apportant une touche de modernit√©.\n                </p>\n                <p>\n                  Notre mission est simple : vous faire voyager √† travers les saveurs \n                  de la C√¥te d'Ivoire, dans un cadre chaleureux o√π vous vous sentirez \n                  comme chez vous.\n                </p>\n              </div>\n            </motion.div>\n            \n            <motion.div\n              initial={{ opacity: 0, x: 30 }}\n              whileInView={{ opacity: 1, x: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8 }}\n              className=\"relative\"\n            >\n              <img \n                src=\"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/ha2l407l_cv.jpg\"\n                alt=\"Plat signature\"\n                className=\"rounded-2xl shadow-2xl\"\n              />\n              <div className=\"absolute -bottom-8 -left-8 glass p-6 rounded-2xl gold-border\">\n                <img \n                  src=\"https://customer-assets.emergentagent.com/job_chezloman/artifacts/dn3n27hs_Design%20sans%20titre.png\"\n                  alt=\"Chez Loman\"\n                  className=\"h-16 w-16 object-cover rounded-full border-2 border-[#D4AF37]/50\"\n                />\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* Values */}\n      <section className=\"py-24 md:py-32 bg-[#1A4D3E]/20\">\n        <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8 }}\n            className=\"text-center mb-16\"\n          >\n            <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n              Nos Valeurs\n            </span>\n            <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2]\">\n              Ce Qui Nous Guide\n            </h2>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {[\n              {\n                title: \"Authenticit√©\",\n                description: \"Des recettes traditionnelles respect√©es, transmises de g√©n√©ration en g√©n√©ration.\"\n              },\n              {\n                title: \"Excellence\",\n                description: \"Une qu√™te permanente de la qualit√©, des ingr√©dients √† la pr√©sentation.\"\n              },\n              {\n                title: \"Hospitalit√©\",\n                description: \"Un accueil chaleureux o√π chaque client est trait√© comme un membre de la famille.\"\n              }\n            ].map((value, index) => (\n              <motion.div\n                key={value.title}\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.6, delay: index * 0.1 }}\n                className=\"luxury-card p-8 rounded-2xl text-center\"\n              >\n                <div className=\"w-16 h-16 mx-auto mb-6 rounded-full border border-[#D4AF37]/30 flex items-center justify-center\">\n                  <span className=\"text-[#D4AF37] text-2xl font-accent italic\">{index + 1}</span>\n                </div>\n                <h3 className=\"text-xl text-[#F9F7F2] mb-4\">{value.title}</h3>\n                <p className=\"text-[#A3B1AD] leading-relaxed\">{value.description}</p>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Family */}\n      <section className=\"py-24 md:py-32\">\n        <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center\">\n            <motion.div\n              initial={{ opacity: 0, x: -30 }}\n              whileInView={{ opacity: 1, x: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8 }}\n              className=\"order-2 lg:order-1\"\n            >\n              <img \n                src=\"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/07tbw3nn_cc.jpg\"\n                alt=\"Ambiance familiale\"\n                className=\"rounded-2xl shadow-2xl\"\n              />\n            </motion.div>\n            \n            <motion.div\n              initial={{ opacity: 0, y: 30 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8 }}\n              className=\"order-1 lg:order-2\"\n            >\n              <h2 className=\"text-3xl md:text-4xl text-[#F9F7F2] mb-8\">\n                Un Lieu Pour Toute la Famille\n              </h2>\n              <div className=\"space-y-6 text-[#A3B1AD] leading-relaxed\">\n                <p>\n                  Chez Loman, nous accueillons tout le monde avec le m√™me sourire : \n                  familles avec enfants, groupes d'amis, coll√®gues de travail ou voyageurs \n                  en qu√™te de d√©couvertes culinaires.\n                </p>\n                <p>\n                  Notre espace a √©t√© pens√© pour que chacun se sente √† l'aise. \n                  Que ce soit pour un d√©jeuner rapide entre deux rendez-vous, \n                  un d√Æner romantique ou une grande tabl√©e pour f√™ter un √©v√©nement, \n                  nous sommes l√† pour rendre chaque moment sp√©cial.\n                </p>\n              </div>\n              <p className=\"text-3xl font-accent italic text-[#D4AF37] mt-10\">\n                \"Viens go√ªter, tu vas comprendre\"\n              </p>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* CTA */}\n      <section className=\"py-24 md:py-32 bg-[#1A4D3E]\">\n        <div className=\"max-w-4xl mx-auto px-6 md:px-12 text-center\">\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8 }}\n          >\n            <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2] mb-6\">\n              Venez Nous D√©couvrir\n            </h2>\n            <p className=\"text-lg text-[#F9F7F2]/70 mb-10 max-w-2xl mx-auto\">\n              Nous vous attendons √† Yopougon Abobo Doum√© pour vous faire d√©couvrir \n              les saveurs authentiques de la cuisine ivoirienne\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-4\">\n              <a\n                href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite r√©server une table\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <Button className=\"btn-gold text-lg\">\n                  R√©server une Table\n                </Button>\n              </a>\n              <a href=\"tel:+2250709508819\">\n                <Button className=\"bg-transparent border border-[#F9F7F2]/30 text-[#F9F7F2] hover:bg-[#F9F7F2] hover:text-[#1A4D3E] rounded-full px-10 py-4 font-medium transition-all duration-400\">\n                  Appeler Maintenant\n                </Button>\n              </a>\n            </div>\n          </motion.div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default AboutPage;\n","path":null,"size_bytes":9989,"size_tokens":null},"frontend/src/components/ui/select.jsx":{"content":"import * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}>\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}>\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}>\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}>\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\"p-1\", position === \"popper\" &&\n          \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\")}>\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props} />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}>\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props} />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":4769,"size_tokens":null},"frontend/src/components/AdminButton.jsx":{"content":"import { Link } from \"react-router-dom\";\nimport { Settings } from \"lucide-react\";\n\nconst AdminButton = () => {\n  return (\n    <Link\n      to=\"/admin\"\n      className=\"fixed bottom-8 left-8 z-50 bg-[#D4AF37] hover:bg-[#F2CC8F] text-[#0F2E24] p-4 rounded-full shadow-2xl hover:scale-110 transition-all duration-300 flex items-center gap-2 group\"\n      data-testid=\"admin-floating-btn\"\n      aria-label=\"Administration\"\n    >\n      <Settings size={24} className=\"group-hover:rotate-90 transition-transform duration-300\" />\n      <span className=\"hidden group-hover:inline font-semibold pr-2\">Admin</span>\n    </Link>\n  );\n};\n\nexport default AdminButton;\n","path":null,"size_bytes":651,"size_tokens":null},"frontend/src/components/ui/textarea.jsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props} />\n  );\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":585,"size_tokens":null},"frontend/src/components/ui/calendar.jsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: cn(\n          \"relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md\",\n          props.mode === \"range\"\n            ? \"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md\"\n            : \"[&:has([aria-selected])]:rounded-md\"\n        ),\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-8 w-8 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_start: \"day-range-start\",\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props} />\n  );\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2849,"size_tokens":null},"replit.md":{"content":"# Chez Loman - Restaurant Website\n\n## Overview\nModern restaurant website for \"Chez Loman\" - an Ivorian cuisine restaurant in Yopougon, Abidjan. Features a public-facing website, admin panel, and business dashboard.\n\n## Tech Stack\n- **Frontend**: React 19, TailwindCSS, Shadcn/UI, Framer Motion (CRA + CRACO)\n- **Backend**: FastAPI (Python) on port 8001\n- **Database**: MongoDB (requires MONGO_URL environment variable)\n- **AI**: DeepSeek API (optional, for business insights)\n\n## Project Structure\n```\n‚îú‚îÄ‚îÄ backend/\n‚îÇ   ‚îú‚îÄ‚îÄ server.py          # FastAPI backend with all API routes\n‚îÇ   ‚îú‚îÄ‚îÄ ai_service.py      # DeepSeek AI integration\n‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt   # Python dependencies\n‚îÇ   ‚îî‚îÄ‚îÄ uploads/           # Uploaded files directory\n‚îú‚îÄ‚îÄ frontend/\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.js         # Main app with routing\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/    # Reusable components (Navbar, Footer, etc.)\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/         # Page components (Home, Menu, Admin, Dashboard)\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/         # Custom React hooks\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lib/           # Utility functions\n‚îÇ   ‚îú‚îÄ‚îÄ craco.config.js    # CRACO configuration (webpack, devserver)\n‚îÇ   ‚îî‚îÄ‚îÄ package.json       # Node.js dependencies\n```\n\n## Environment Variables\n- `MONGO_URL` (required): MongoDB connection string - must be set as a secret for the app to work with data\n- `DB_NAME` (default: \"chezloman\"): MongoDB database name\n- `REACT_APP_BACKEND_URL` (set to empty string): Uses relative /api paths, works with proxy in dev and static serving in prod\n- `DEEPSEEK_API_KEY` (optional): For AI business insights in the dashboard\n\n## Deployment\n- Build: `cd frontend && npm run build`\n- Run: FastAPI serves both API and built frontend static files\n- Deployment target: autoscale\n\n## Running\n- Frontend: Port 5000 (dev server with CRACO)\n- Backend: Port 8001 (uvicorn)\n- Frontend proxies `/api` requests to backend via CRA proxy setting\n\n## Recent Changes\n- 2026-02-16: Cash Register (Caisse) + Dark/Light Mode\n  - Added CashSale model and 4 API endpoints (POST/GET/DELETE ventes, GET stats)\n  - Added \"Caisse\" tab in Admin panel for recording in-person sales (especes/mobile money)\n  - Daily stats: revenue, payment breakdown, top dishes, average ticket\n  - Added Dark/Light mode toggle (ThemeProvider context, Sun/Moon button in Navbar)\n  - CSS-based light mode overrides for all pages\n  - Added ScrollToTop component\n  - Added comment system with admin moderation\n- 2026-02-15: Initial Replit setup\n  - Configured CRACO dev server for Replit (allowedHosts, port 5000)\n  - Added proxy in package.json to forward API requests to backend\n  - Fixed backend module import (ai_service)\n  - Made MONGO_URL gracefully handle missing value\n\n## User Preferences\n- Language: French (communication and UI)\n- Deployment platform: Render (connected to GitHub repo Armandodino/chez-loman)\n- User manages code locally via PowerShell and pushes to GitHub\n","path":null,"size_bytes":3002,"size_tokens":null},"frontend/src/components/ui/hover-card.jsx":{"content":"import * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props} />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1109,"size_tokens":null},"frontend/src/components/ui/progress.jsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n      className\n    )}\n    {...props}>\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }} />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":653,"size_tokens":null},"frontend/src/components/ui/collapsible.jsx":{"content":"import * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":315,"size_tokens":null},"frontend/src/components/ui/avatar.jsx":{"content":"import * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\", className)}\n    {...props} />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props} />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props} />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1029,"size_tokens":null},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","path":null,"size_bytes":96,"size_tokens":null},"frontend/src/components/ui/sonner.jsx":{"content":"import { useTheme } from \"next-themes\"\nimport { Toaster as Sonner, toast } from \"sonner\"\n\nconst Toaster = ({\n  ...props\n}) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton:\n            \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton:\n            \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props} />\n  );\n}\n\nexport { Toaster, toast }\n","path":null,"size_bytes":797,"size_tokens":null},"frontend/src/components/StarRating.jsx":{"content":"import { Star } from \"lucide-react\";\n\nconst StarRating = ({ rating, size = 14 }) => {\n  return (\n    <div className=\"flex gap-1\" data-testid=\"star-rating\">\n      {[1, 2, 3, 4, 5].map((star) => (\n        <Star\n          key={star}\n          size={size}\n          className={`${\n            star <= rating \n              ? \"text-[#D4AF37] fill-[#D4AF37]\" \n              : \"text-[#A3B1AD]/30\"\n          }`}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default StarRating;\n","path":null,"size_bytes":472,"size_tokens":null},"frontend/src/pages/AdminPage.jsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { API } from \"../App\";\nimport { Button } from \"../components/ui/button\";\nimport { Input } from \"../components/ui/input\";\nimport { Label } from \"../components/ui/label\";\nimport { Textarea } from \"../components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"../components/ui/select\";\nimport { Switch } from \"../components/ui/switch\";\nimport { toast } from \"sonner\";\nimport { Plus, Trash2, Calendar, Image, Utensils, RefreshCw, Video, Megaphone, LogOut, Lock, User, Eye, EyeOff, X, Upload, Link, FileImage, Home, LayoutDashboard, MessageSquare, Check, XCircle, ShoppingCart } from \"lucide-react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\n\nconst AdminPage = () => {\n  // Auth state\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [loginLoading, setLoginLoading] = useState(false);\n\n  // Admin state\n  const [activeTab, setActiveTab] = useState(\"accueil\");\n  const [loading, setLoading] = useState(true);\n  \n  // Data states\n  const [dailyMenus, setDailyMenus] = useState([]);\n  const [photos, setPhotos] = useState([]);\n  const [videos, setVideos] = useState([]);\n  const [promotions, setPromotions] = useState([]);\n  const [menuItems, setMenuItems] = useState([]);\n  const [heroContent, setHeroContent] = useState(null);\n  const [allReviews, setAllReviews] = useState([]);\n\n  // Caisse state\n  const [cashSales, setCashSales] = useState([]);\n  const [cashStats, setCashStats] = useState(null);\n  const [cashItems, setCashItems] = useState([{ name: \"\", quantity: 1, price: 0 }]);\n  const [cashPaymentMethod, setCashPaymentMethod] = useState(\"especes\");\n  const [cashNote, setCashNote] = useState(\"\");\n  const [submittingCash, setSubmittingCash] = useState(false);\n  const [cashDate, setCashDate] = useState(new Date().toISOString().split('T')[0]);\n\n  // Daily Menu Form\n  const [menuDate, setMenuDate] = useState(new Date().toISOString().split('T')[0]);\n  const [menuItemsList, setMenuItemsList] = useState([\"\"]);\n  const [specialMessage, setSpecialMessage] = useState(\"\");\n\n  // Photo Form\n  const [photoUrl, setPhotoUrl] = useState(\"\");\n  const [photoCaption, setPhotoCaption] = useState(\"\");\n  const [photoCategory, setPhotoCategory] = useState(\"restaurant\");\n  const [photoUploadMode, setPhotoUploadMode] = useState(\"url\"); // \"url\" or \"file\"\n  const [photoFile, setPhotoFile] = useState(null);\n  const [photoPreview, setPhotoPreview] = useState(\"\");\n  const [uploadingPhoto, setUploadingPhoto] = useState(false);\n  const photoFileRef = useRef(null);\n\n  // Video Form\n  const [videoTitle, setVideoTitle] = useState(\"\");\n  const [videoUrl, setVideoUrl] = useState(\"\");\n  const [videoType, setVideoType] = useState(\"youtube\");\n  const [videoDescription, setVideoDescription] = useState(\"\");\n  const [videoUploadMode, setVideoUploadMode] = useState(\"url\");\n  const [videoFile, setVideoFile] = useState(null);\n  const [uploadingVideo, setUploadingVideo] = useState(false);\n  const videoFileRef = useRef(null);\n\n  // Promotion Form\n  const [promoTitle, setPromoTitle] = useState(\"\");\n  const [promoDescription, setPromoDescription] = useState(\"\");\n  const [promoImage, setPromoImage] = useState(\"\");\n  const [promoType, setPromoType] = useState(\"banner\");\n  const [promoStartDate, setPromoStartDate] = useState(\"\");\n  const [promoEndDate, setPromoEndDate] = useState(\"\");\n  const [promoUploadMode, setPromoUploadMode] = useState(\"url\");\n  const [promoFile, setPromoFile] = useState(null);\n  const [promoPreview, setPromoPreview] = useState(\"\");\n  const [uploadingPromo, setUploadingPromo] = useState(false);\n  const promoFileRef = useRef(null);\n\n  // Hero Content Form\n  const [heroTitleLine1, setHeroTitleLine1] = useState(\"\");\n  const [heroTitleLine2, setHeroTitleLine2] = useState(\"\");\n  const [heroDescription, setHeroDescription] = useState(\"\");\n  const [heroBackgroundImage, setHeroBackgroundImage] = useState(\"\");\n  const [heroUploadMode, setHeroUploadMode] = useState(\"url\");\n  const [heroFile, setHeroFile] = useState(null);\n  const [heroPreview, setHeroPreview] = useState(\"\");\n  const [savingHero, setSavingHero] = useState(false);\n  const heroFileRef = useRef(null);\n\n  // Check authentication on mount\n  useEffect(() => {\n    checkAuth();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const checkAuth = async () => {\n    const token = localStorage.getItem(\"adminToken\");\n    if (token) {\n      try {\n        const response = await axios.post(`${API}/admin/verify?token=${token}`);\n        if (response.data.valid) {\n          setIsAuthenticated(true);\n          fetchData();\n        } else {\n          localStorage.removeItem(\"adminToken\");\n        }\n      } catch (error) {\n        localStorage.removeItem(\"adminToken\");\n      }\n    }\n    setIsCheckingAuth(false);\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setLoginLoading(true);\n    \n    try {\n      const response = await axios.post(`${API}/admin/login`, {\n        username,\n        password\n      });\n      \n      if (response.data.success) {\n        localStorage.setItem(\"adminToken\", response.data.token);\n        setIsAuthenticated(true);\n        toast.success(\"Connexion r√©ussie!\");\n        fetchData();\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.detail || \"Erreur de connexion\");\n    } finally {\n      setLoginLoading(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await axios.post(`${API}/admin/logout`);\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n    }\n    localStorage.removeItem(\"adminToken\");\n    setIsAuthenticated(false);\n    setUsername(\"\");\n    setPassword(\"\");\n    toast.success(\"D√©connexion r√©ussie\");\n  };\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const [menusRes, photosRes, videosRes, promosRes, menuItemsRes, heroRes, reviewsRes] = await Promise.all([\n        axios.get(`${API}/daily-menus`),\n        axios.get(`${API}/gallery`),\n        axios.get(`${API}/videos`),\n        axios.get(`${API}/promotions`),\n        axios.get(`${API}/menu`),\n        axios.get(`${API}/hero-content`),\n        axios.get(`${API}/reviews/all`)\n      ]);\n      setDailyMenus(menusRes.data);\n      setPhotos(photosRes.data);\n      setVideos(videosRes.data);\n      setPromotions(promosRes.data);\n      setMenuItems(menuItemsRes.data);\n      setAllReviews(reviewsRes.data);\n      setHeroContent(heroRes.data);\n      // Populate hero form\n      if (heroRes.data) {\n        setHeroTitleLine1(heroRes.data.title_line1 || \"\");\n        setHeroTitleLine2(heroRes.data.title_line2 || \"\");\n        setHeroDescription(heroRes.data.description || \"\");\n        setHeroBackgroundImage(heroRes.data.background_image || \"\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      toast.error(\"Erreur lors du chargement des donn√©es\");\n    } finally {\n      setLoading(false);\n    }\n    fetchCaisseData();\n  };\n\n  const fetchCaisseData = async (date) => {\n    const targetDate = date || cashDate;\n    try {\n      const [salesRes, statsRes] = await Promise.all([\n        axios.get(`${API}/caisse/ventes?date=${targetDate}`),\n        axios.get(`${API}/caisse/stats?date=${targetDate}`)\n      ]);\n      setCashSales(salesRes.data);\n      setCashStats(statsRes.data);\n    } catch (error) {\n      console.error(\"Error fetching caisse data:\", error);\n    }\n  };\n\n  const handleCashSaleSubmit = async (e) => {\n    e.preventDefault();\n    const validItems = cashItems.filter(item => item.name.trim() && item.quantity > 0 && item.price > 0);\n    if (validItems.length === 0) {\n      toast.error(\"Ajoutez au moins un plat valide\");\n      return;\n    }\n    const total = validItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n    setSubmittingCash(true);\n    try {\n      await axios.post(`${API}/caisse/vente`, {\n        items: validItems,\n        total,\n        payment_method: cashPaymentMethod,\n        note: cashNote || null\n      });\n      toast.success(\"Vente enregistr√©e!\");\n      setCashItems([{ name: \"\", quantity: 1, price: 0 }]);\n      setCashNote(\"\");\n      fetchCaisseData();\n    } catch (error) {\n      toast.error(\"Erreur lors de l'enregistrement\");\n    } finally {\n      setSubmittingCash(false);\n    }\n  };\n\n  const addCashItem = () => setCashItems([...cashItems, { name: \"\", quantity: 1, price: 0 }]);\n  const removeCashItem = (index) => setCashItems(cashItems.filter((_, i) => i !== index));\n  const updateCashItem = (index, field, value) => {\n    const newItems = [...cashItems];\n    newItems[index] = { ...newItems[index], [field]: field === \"name\" ? value : Number(value) };\n    setCashItems(newItems);\n  };\n\n  // ==================== FILE UPLOAD ====================\n  const uploadFile = async (file) => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    \n    const response = await axios.post(`${API}/upload`, formData, {\n      headers: { \"Content-Type\": \"multipart/form-data\" }\n    });\n    \n    return response.data.url;\n  };\n\n  // Handle photo file selection\n  const handlePhotoFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setPhotoFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPhotoPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Handle video file selection\n  const handleVideoFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setVideoFile(file);\n    }\n  };\n\n  // Handle promo file selection\n  const handlePromoFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setPromoFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPromoPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // ==================== DAILY MENU ====================\n  const addMenuItem = () => setMenuItemsList([...menuItemsList, \"\"]);\n  const removeMenuItem = (index) => setMenuItemsList(menuItemsList.filter((_, i) => i !== index));\n  const updateMenuItem = (index, value) => {\n    const newItems = [...menuItemsList];\n    newItems[index] = value;\n    setMenuItemsList(newItems);\n  };\n\n  const handleSubmitMenu = async (e) => {\n    e.preventDefault();\n    const filteredItems = menuItemsList.filter(item => item.trim() !== \"\");\n    if (filteredItems.length === 0) {\n      toast.error(\"Ajoutez au moins un plat\");\n      return;\n    }\n    try {\n      await axios.post(`${API}/daily-menu`, {\n        date: menuDate,\n        items: filteredItems,\n        special_message: specialMessage || null\n      });\n      toast.success(\"Menu du jour cr√©√©!\");\n      setMenuItemsList([\"\"]);\n      setSpecialMessage(\"\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la cr√©ation\");\n    }\n  };\n\n  const handleDeleteMenu = async (menuId) => {\n    if (!window.confirm(\"Supprimer ce menu?\")) return;\n    try {\n      await axios.delete(`${API}/daily-menu/${menuId}`);\n      toast.success(\"Menu supprim√©\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\");\n    }\n  };\n\n  // ==================== PHOTOS ====================\n  const handleSubmitPhoto = async (e) => {\n    e.preventDefault();\n    \n    let finalUrl = photoUrl;\n    \n    // If file upload mode, upload file first\n    if (photoUploadMode === \"file\") {\n      if (!photoFile) {\n        toast.error(\"S√©lectionnez une photo\");\n        return;\n      }\n      setUploadingPhoto(true);\n      try {\n        finalUrl = await uploadFile(photoFile);\n      } catch (error) {\n        toast.error(\"Erreur lors de l'upload de la photo\");\n        setUploadingPhoto(false);\n        return;\n      }\n    } else {\n      if (!photoUrl.trim()) {\n        toast.error(\"Entrez l'URL de la photo\");\n        return;\n      }\n    }\n    \n    try {\n      await axios.post(`${API}/gallery`, {\n        image_url: finalUrl,\n        caption: photoCaption || null,\n        category: photoCategory\n      });\n      toast.success(\"Photo ajout√©e!\");\n      setPhotoUrl(\"\");\n      setPhotoCaption(\"\");\n      setPhotoFile(null);\n      setPhotoPreview(\"\");\n      if (photoFileRef.current) photoFileRef.current.value = \"\";\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de l'ajout\");\n    } finally {\n      setUploadingPhoto(false);\n    }\n  };\n\n  const handleDeletePhoto = async (photoId) => {\n    if (!window.confirm(\"Supprimer cette photo?\")) return;\n    try {\n      await axios.delete(`${API}/gallery/${photoId}`);\n      toast.success(\"Photo supprim√©e\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\");\n    }\n  };\n\n  // ==================== VIDEOS ====================\n  const handleSubmitVideo = async (e) => {\n    e.preventDefault();\n    \n    if (!videoTitle.trim()) {\n      toast.error(\"Entrez un titre\");\n      return;\n    }\n    \n    let finalUrl = videoUrl;\n    let finalType = videoType;\n    \n    // If file upload mode, upload file first\n    if (videoUploadMode === \"file\") {\n      if (!videoFile) {\n        toast.error(\"S√©lectionnez une vid√©o\");\n        return;\n      }\n      setUploadingVideo(true);\n      try {\n        finalUrl = await uploadFile(videoFile);\n        finalType = \"direct\";\n      } catch (error) {\n        toast.error(\"Erreur lors de l'upload de la vid√©o\");\n        setUploadingVideo(false);\n        return;\n      }\n    } else {\n      if (!videoUrl.trim()) {\n        toast.error(\"Entrez l'URL de la vid√©o\");\n        return;\n      }\n    }\n    \n    try {\n      await axios.post(`${API}/videos`, {\n        title: videoTitle,\n        video_url: finalUrl,\n        video_type: finalType,\n        description: videoDescription || null\n      });\n      toast.success(\"Vid√©o ajout√©e!\");\n      setVideoTitle(\"\");\n      setVideoUrl(\"\");\n      setVideoDescription(\"\");\n      setVideoFile(null);\n      if (videoFileRef.current) videoFileRef.current.value = \"\";\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de l'ajout\");\n    } finally {\n      setUploadingVideo(false);\n    }\n  };\n\n  const handleDeleteVideo = async (videoId) => {\n    if (!window.confirm(\"Supprimer cette vid√©o?\")) return;\n    try {\n      await axios.delete(`${API}/videos/${videoId}`);\n      toast.success(\"Vid√©o supprim√©e\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\");\n    }\n  };\n\n  const handleToggleVideo = async (videoId, isActive) => {\n    try {\n      await axios.put(`${API}/videos/${videoId}?is_active=${!isActive}`);\n      toast.success(\"Vid√©o mise √† jour\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la mise √† jour\");\n    }\n  };\n\n  // ==================== PROMOTIONS ====================\n  const handleSubmitPromo = async (e) => {\n    e.preventDefault();\n    if (!promoTitle.trim() || !promoDescription.trim()) {\n      toast.error(\"Remplissez le titre et la description\");\n      return;\n    }\n    \n    let finalImageUrl = promoImage;\n    \n    // If file upload mode and file selected, upload it\n    if (promoUploadMode === \"file\" && promoFile) {\n      setUploadingPromo(true);\n      try {\n        finalImageUrl = await uploadFile(promoFile);\n      } catch (error) {\n        toast.error(\"Erreur lors de l'upload de l'image\");\n        setUploadingPromo(false);\n        return;\n      }\n    }\n    \n    try {\n      await axios.post(`${API}/promotions`, {\n        title: promoTitle,\n        description: promoDescription,\n        image_url: finalImageUrl || null,\n        promo_type: promoType,\n        start_date: promoStartDate || null,\n        end_date: promoEndDate || null\n      });\n      toast.success(\"Promotion cr√©√©e!\");\n      setPromoTitle(\"\");\n      setPromoDescription(\"\");\n      setPromoImage(\"\");\n      setPromoStartDate(\"\");\n      setPromoEndDate(\"\");\n      setPromoFile(null);\n      setPromoPreview(\"\");\n      if (promoFileRef.current) promoFileRef.current.value = \"\";\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la cr√©ation\");\n    } finally {\n      setUploadingPromo(false);\n    }\n  };\n\n  const handleDeletePromo = async (promoId) => {\n    if (!window.confirm(\"Supprimer cette promotion?\")) return;\n    try {\n      await axios.delete(`${API}/promotions/${promoId}`);\n      toast.success(\"Promotion supprim√©e\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\");\n    }\n  };\n\n  const handleTogglePromo = async (promoId, isActive) => {\n    try {\n      await axios.put(`${API}/promotions/${promoId}`, { is_active: !isActive });\n      toast.success(\"Promotion mise √† jour\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la mise √† jour\");\n    }\n  };\n\n  // ==================== HERO CONTENT ====================\n  const handleHeroFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setHeroFile(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setHeroPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmitHero = async (e) => {\n    e.preventDefault();\n    setSavingHero(true);\n    \n    let finalImageUrl = heroBackgroundImage;\n    \n    // If file upload mode and file selected, upload it\n    if (heroUploadMode === \"file\" && heroFile) {\n      try {\n        finalImageUrl = await uploadFile(heroFile);\n      } catch (error) {\n        toast.error(\"Erreur lors de l'upload de l'image\");\n        setSavingHero(false);\n        return;\n      }\n    }\n    \n    try {\n      await axios.put(`${API}/hero-content`, {\n        title_line1: heroTitleLine1 || undefined,\n        title_line2: heroTitleLine2 || undefined,\n        description: heroDescription || undefined,\n        background_image: finalImageUrl || undefined\n      });\n      toast.success(\"Message d'accueil mis √† jour!\");\n      setHeroFile(null);\n      setHeroPreview(\"\");\n      if (heroFileRef.current) heroFileRef.current.value = \"\";\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la mise √† jour\");\n    } finally {\n      setSavingHero(false);\n    }\n  };\n\n  // ==================== MENU ITEMS ====================\n  const handleToggleMenuItem = async (itemId, field, currentValue) => {\n    try {\n      const params = new URLSearchParams();\n      params.append(field, (!currentValue).toString());\n      await axios.put(`${API}/menu/${itemId}?${params.toString()}`);\n      toast.success(\"Plat mis √† jour\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la mise √† jour\");\n    }\n  };\n\n  const handleDeleteMenuItem = async (itemId) => {\n    if (!window.confirm(\"Supprimer ce plat?\")) return;\n    try {\n      await axios.delete(`${API}/menu/${itemId}`);\n      toast.success(\"Plat supprim√©\");\n      fetchData();\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\");\n    }\n  };\n\n  // Helper to extract YouTube video ID\n  const getYouTubeId = (url) => {\n    const match = url.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/);\n    return match ? match[1] : null;\n  };\n\n  const tabs = [\n    { id: \"accueil\", label: \"Accueil\", icon: Home },\n    { id: \"menu\", label: \"Menu du Jour\", icon: Calendar },\n    { id: \"photos\", label: \"Photos\", icon: Image },\n    { id: \"videos\", label: \"Vid√©os\", icon: Video },\n    { id: \"promos\", label: \"Promotions\", icon: Megaphone },\n    { id: \"plats\", label: \"Gestion Plats\", icon: Utensils },\n    { id: \"commentaires\", label: \"Commentaires\", icon: MessageSquare },\n    { id: \"caisse\", label: \"Caisse\", icon: ShoppingCart },\n  ];\n\n  // Upload mode toggle component\n  const UploadModeToggle = ({ mode, setMode }) => (\n    <div className=\"flex gap-2 mb-4\">\n      <button\n        type=\"button\"\n        onClick={() => setMode(\"url\")}\n        className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all ${\n          mode === \"url\" \n            ? \"bg-[#D4AF37] text-[#0F2E24]\" \n            : \"bg-white/5 text-[#A3B1AD] border border-white/10\"\n        }`}\n      >\n        <Link size={16} />\n        Lien URL\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => setMode(\"file\")}\n        className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-all ${\n          mode === \"file\" \n            ? \"bg-[#D4AF37] text-[#0F2E24]\" \n            : \"bg-white/5 text-[#A3B1AD] border border-white/10\"\n        }`}\n      >\n        <Upload size={16} />\n        Depuis l'appareil\n      </button>\n    </div>\n  );\n\n  // Loading state\n  if (isCheckingAuth) {\n    return (\n      <div className=\"min-h-screen bg-[#05100D] pt-32 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-[#D4AF37] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-[#A3B1AD]\">V√©rification...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Login Form\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-[#05100D] pt-32 pb-24 flex items-center justify-center\" data-testid=\"admin-login-page\">\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"w-full max-w-md mx-6\"\n        >\n          <div className=\"luxury-card p-8 md:p-10 rounded-3xl\">\n            <div className=\"text-center mb-8\">\n              <div className=\"w-20 h-20 bg-[#D4AF37]/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Lock className=\"text-[#D4AF37]\" size={36} />\n              </div>\n              <h1 className=\"text-2xl font-bold text-[#F9F7F2]\">Administration</h1>\n              <p className=\"text-[#A3B1AD] mt-2\">Connectez-vous pour g√©rer le restaurant</p>\n            </div>\n\n            <form onSubmit={handleLogin} className=\"space-y-6\">\n              <div>\n                <Label className=\"text-[#A3B1AD] mb-2 block\">Nom d'utilisateur</Label>\n                <div className=\"relative\">\n                  <User className=\"absolute left-4 top-1/2 -translate-y-1/2 text-[#A3B1AD]\" size={18} />\n                  <Input\n                    type=\"text\"\n                    placeholder=\"Entrez votre nom d'utilisateur\"\n                    value={username}\n                    onChange={(e) => setUsername(e.target.value)}\n                    className=\"input-luxury pl-12\"\n                    data-testid=\"login-username\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <div>\n                <Label className=\"text-[#A3B1AD] mb-2 block\">Mot de passe</Label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-[#A3B1AD]\" size={18} />\n                  <Input\n                    type={showPassword ? \"text\" : \"password\"}\n                    placeholder=\"Entrez votre mot de passe\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    className=\"input-luxury pl-12 pr-12\"\n                    data-testid=\"login-password\"\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-[#A3B1AD] hover:text-[#D4AF37]\"\n                  >\n                    {showPassword ? <EyeOff size={18} /> : <Eye size={18} />}\n                  </button>\n                </div>\n              </div>\n\n              <Button\n                type=\"submit\"\n                disabled={loginLoading}\n                className=\"w-full btn-gold py-6 text-lg\"\n                data-testid=\"login-submit\"\n              >\n                {loginLoading ? (\n                  <span className=\"flex items-center gap-2\">\n                    <div className=\"w-5 h-5 border-2 border-[#0F2E24] border-t-transparent rounded-full animate-spin\"></div>\n                    Connexion...\n                  </span>\n                ) : (\n                  \"Se Connecter\"\n                )}\n              </Button>\n            </form>\n\n            <div className=\"mt-8 p-4 bg-[#D4AF37]/10 rounded-xl\">\n              <p className=\"text-[#D4AF37] text-sm text-center\">\n                Acc√®s r√©serv√© √† l'administrateur du restaurant\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  // Admin Dashboard\n  return (\n    <div className=\"min-h-screen bg-[#05100D] pt-32 pb-24\" data-testid=\"admin-page\">\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8\">\n          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n            <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-2 block\">\n              Espace Administrateur\n            </span>\n            <h1 className=\"text-3xl md:text-4xl text-[#F9F7F2]\">Gestion du Restaurant</h1>\n          </motion.div>\n          <div className=\"flex items-center gap-4\">\n            <RouterLink to=\"/dashboard\" className=\"bg-[#D4AF37] text-[#0F2E24] hover:bg-[#F2CC8F] rounded-full px-6 py-2 flex items-center gap-2 text-sm font-semibold transition-all\" data-testid=\"dashboard-link\">\n              <LayoutDashboard size={16} />\n              Dashboard Pro\n            </RouterLink>\n            <Button onClick={fetchData} className=\"bg-white/5 border border-white/10 text-[#A3B1AD] hover:text-[#D4AF37] hover:border-[#D4AF37]/50 rounded-full px-6\" data-testid=\"refresh-btn\">\n              <RefreshCw size={16} className=\"mr-2\" />\n              Actualiser\n            </Button>\n            <Button onClick={handleLogout} className=\"bg-red-500/20 border border-red-500/30 text-red-400 hover:bg-red-500/30 rounded-full px-6\" data-testid=\"logout-btn\">\n              <LogOut size={16} className=\"mr-2\" />\n              D√©connexion\n            </Button>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex flex-wrap gap-2 mb-10 pb-4 border-b border-white/10\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex items-center gap-2 px-5 py-3 rounded-full text-sm font-medium transition-all ${\n                activeTab === tab.id\n                  ? \"bg-[#D4AF37] text-[#0F2E24]\"\n                  : \"bg-white/5 text-[#A3B1AD] border border-white/10 hover:border-[#D4AF37]/50 hover:text-[#D4AF37]\"\n              }`}\n              data-testid={`tab-${tab.id}`}\n            >\n              <tab.icon size={16} />\n              {tab.label}\n            </button>\n          ))}\n        </div>\n\n        {/* ==================== ACCUEIL / HERO ==================== */}\n        {activeTab === \"accueil\" && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"luxury-card p-8 rounded-2xl\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Home className=\"text-[#D4AF37]\" size={24} />\n                <h2 className=\"text-xl text-[#F9F7F2] font-semibold\">Message d'Accueil</h2>\n              </div>\n              \n              <form onSubmit={handleSubmitHero} className=\"space-y-5\">\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Titre - Ligne 1</Label>\n                  <Input \n                    placeholder=\"Ici c'est manger\" \n                    value={heroTitleLine1} \n                    onChange={(e) => setHeroTitleLine1(e.target.value)} \n                    className=\"input-luxury\" \n                    data-testid=\"hero-title1-input\"\n                  />\n                </div>\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Titre - Ligne 2 (en dor√©)</Label>\n                  <Input \n                    placeholder=\"bien hein\" \n                    value={heroTitleLine2} \n                    onChange={(e) => setHeroTitleLine2(e.target.value)} \n                    className=\"input-luxury\" \n                    data-testid=\"hero-title2-input\"\n                  />\n                </div>\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Description</Label>\n                  <Textarea \n                    placeholder=\"Une cuisine ivoirienne authentique...\" \n                    value={heroDescription} \n                    onChange={(e) => setHeroDescription(e.target.value)} \n                    className=\"input-luxury min-h-[100px]\" \n                    data-testid=\"hero-description-input\"\n                  />\n                </div>\n                \n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Image d'arri√®re-plan</Label>\n                  <UploadModeToggle mode={heroUploadMode} setMode={setHeroUploadMode} />\n                  \n                  {heroUploadMode === \"url\" ? (\n                    <Input \n                      type=\"url\" \n                      placeholder=\"https://exemple.com/image.jpg\" \n                      value={heroBackgroundImage} \n                      onChange={(e) => setHeroBackgroundImage(e.target.value)} \n                      className=\"input-luxury\" \n                      data-testid=\"hero-image-url-input\"\n                    />\n                  ) : (\n                    <div>\n                      <div \n                        onClick={() => heroFileRef.current?.click()}\n                        className=\"border-2 border-dashed border-[#D4AF37]/30 rounded-xl p-6 text-center cursor-pointer hover:border-[#D4AF37]/50 transition-colors\"\n                      >\n                        <FileImage className=\"mx-auto text-[#D4AF37] mb-2\" size={32} />\n                        <p className=\"text-[#A3B1AD] text-sm\">Cliquez pour s√©lectionner une image</p>\n                      </div>\n                      <input \n                        ref={heroFileRef}\n                        type=\"file\" \n                        accept=\"image/*\" \n                        onChange={handleHeroFileChange} \n                        className=\"hidden\" \n                        data-testid=\"hero-file-input\"\n                      />\n                      {heroFile && <p className=\"text-[#D4AF37] text-sm mt-2\">Fichier: {heroFile.name}</p>}\n                    </div>\n                  )}\n                </div>\n\n                <Button type=\"submit\" disabled={savingHero} className=\"w-full btn-gold\" data-testid=\"submit-hero-btn\">\n                  {savingHero ? (\n                    <span className=\"flex items-center gap-2\">\n                      <div className=\"w-5 h-5 border-2 border-[#0F2E24] border-t-transparent rounded-full animate-spin\"></div>\n                      Enregistrement...\n                    </span>\n                  ) : (\n                    \"Enregistrer les modifications\"\n                  )}\n                </Button>\n              </form>\n            </motion.div>\n\n            {/* Preview */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg text-[#F9F7F2] font-semibold\">Aper√ßu en direct</h3>\n              <div className=\"luxury-card rounded-2xl overflow-hidden\">\n                <div className=\"relative h-64\">\n                  <img \n                    src={heroPreview || heroBackgroundImage || \"https://customer-assets.emergentagent.com/job_loman-restaurant/artifacts/jde9y3pb_chl.jpg\"} \n                    alt=\"Aper√ßu arri√®re-plan\" \n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-black/80 via-black/60 to-transparent\"></div>\n                  <div className=\"absolute inset-0 p-6 flex flex-col justify-center\">\n                    <span className=\"text-[#D4AF37] text-[10px] font-semibold uppercase tracking-[0.2em] mb-2\">\n                      Restaurant Ivoirien d'Exception\n                    </span>\n                    <h2 className=\"text-2xl font-accent italic text-white leading-tight mb-2\">\n                      {heroTitleLine1 || \"Ici c'est manger\"}<br/>\n                      <span className=\"text-[#D4AF37]\">{heroTitleLine2 || \"bien hein\"}</span>\n                    </h2>\n                    <p className=\"text-sm text-white/70 line-clamp-2\">\n                      {heroDescription || \"Une cuisine ivoirienne authentique, sublim√©e par notre savoir-faire.\"}\n                    </p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"luxury-card p-5 rounded-2xl\">\n                <h4 className=\"text-[#F9F7F2] font-semibold mb-3\">Conseils</h4>\n                <ul className=\"space-y-2 text-sm text-[#A3B1AD]\">\n                  <li>‚Ä¢ Utilisez une image de bonne qualit√© (min. 1920x1080)</li>\n                  <li>‚Ä¢ Pr√©f√©rez une image avec un sujet √† droite pour une meilleure lisibilit√© du texte</li>\n                  <li>‚Ä¢ Gardez le titre court et accrocheur</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* ==================== MENU DU JOUR ==================== */}\n        {activeTab === \"menu\" && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"luxury-card p-8 rounded-2xl\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Calendar className=\"text-[#D4AF37]\" size={24} />\n                <h2 className=\"text-xl text-[#F9F7F2] font-semibold\">Nouveau Menu du Jour</h2>\n              </div>\n              <form onSubmit={handleSubmitMenu} className=\"space-y-5\">\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Date</Label>\n                  <Input type=\"date\" value={menuDate} onChange={(e) => setMenuDate(e.target.value)} className=\"input-luxury\" data-testid=\"menu-date-input\" />\n                </div>\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Plats du jour</Label>\n                  <div className=\"space-y-2\">\n                    {menuItemsList.map((item, index) => (\n                      <div key={index} className=\"flex gap-2\">\n                        <Input placeholder={`Plat ${index + 1} (ex: Atti√®k√® Poisson - 3500 FCFA)`} value={item} onChange={(e) => updateMenuItem(index, e.target.value)} className=\"input-luxury\" data-testid={`menu-item-${index}`} />\n                        {menuItemsList.length > 1 && (\n                          <Button type=\"button\" variant=\"ghost\" size=\"icon\" onClick={() => removeMenuItem(index)} className=\"text-red-400 hover:text-red-300\">\n                            <X size={18} />\n                          </Button>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                  <Button type=\"button\" variant=\"outline\" onClick={addMenuItem} className=\"mt-3 w-full bg-transparent border border-[#D4AF37]/30 text-[#D4AF37] hover:bg-[#D4AF37]/10 rounded-lg\" data-testid=\"add-menu-item-btn\">\n                    <Plus size={16} className=\"mr-2\" /> Ajouter un plat\n                  </Button>\n                </div>\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Message sp√©cial (optionnel)</Label>\n                  <Textarea placeholder=\"Ex: Bissap offert pour toute commande de plus de 5000 FCFA!\" value={specialMessage} onChange={(e) => setSpecialMessage(e.target.value)} className=\"input-luxury min-h-[80px]\" data-testid=\"special-message-input\" />\n                </div>\n                <Button type=\"submit\" className=\"w-full btn-gold\" data-testid=\"submit-menu-btn\">Publier le Menu</Button>\n              </form>\n            </motion.div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg text-[#F9F7F2] font-semibold\">Menus r√©cents ({dailyMenus.length})</h3>\n              {loading ? (\n                <div className=\"space-y-4\">{[1, 2, 3].map((i) => <div key={i} className=\"h-32 bg-white/5 rounded-2xl animate-pulse\"></div>)}</div>\n              ) : dailyMenus.length === 0 ? (\n                <div className=\"luxury-card p-8 rounded-2xl text-center\"><p className=\"text-[#A3B1AD]\">Aucun menu cr√©√©</p></div>\n              ) : (\n                <div className=\"space-y-4 max-h-[600px] overflow-y-auto pr-2\">\n                  {dailyMenus.map((menu) => (\n                    <motion.div key={menu.id} initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"luxury-card p-5 rounded-2xl\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <span className={`text-[10px] font-bold px-3 py-1 rounded-full ${menu.is_active ? \"bg-green-500/20 text-green-400\" : \"bg-white/10 text-[#A3B1AD]\"}`}>\n                            {menu.is_active ? \"Actif\" : \"Inactif\"}\n                          </span>\n                          <p className=\"text-[#F9F7F2] font-semibold mt-2\">\n                            {new Date(menu.date).toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' })}\n                          </p>\n                        </div>\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDeleteMenu(menu.id)} className=\"text-red-400 hover:text-red-300\" data-testid={`delete-menu-${menu.id}`}>\n                          <Trash2 size={18} />\n                        </Button>\n                      </div>\n                      <ul className=\"space-y-1 text-sm text-[#A3B1AD]\">\n                        {menu.items.map((item, i) => <li key={i}>‚Ä¢ {item}</li>)}\n                      </ul>\n                      {menu.special_message && <p className=\"mt-3 text-[#D4AF37] text-sm italic\">{menu.special_message}</p>}\n                    </motion.div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* ==================== PHOTOS ==================== */}\n        {activeTab === \"photos\" && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"luxury-card p-8 rounded-2xl\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Image className=\"text-[#D4AF37]\" size={24} />\n                <h2 className=\"text-xl text-[#F9F7F2] font-semibold\">Ajouter une Photo</h2>\n              </div>\n              \n              <UploadModeToggle mode={photoUploadMode} setMode={setPhotoUploadMode} />\n              \n              <form onSubmit={handleSubmitPhoto} className=\"space-y-5\">\n                {photoUploadMode === \"url\" ? (\n                  <div>\n                    <Label className=\"text-[#A3B1AD] mb-2 block\">URL de la photo *</Label>\n                    <Input type=\"url\" placeholder=\"https://exemple.com/photo.jpg\" value={photoUrl} onChange={(e) => setPhotoUrl(e.target.value)} className=\"input-luxury\" data-testid=\"photo-url-input\" />\n                  </div>\n                ) : (\n                  <div>\n                    <Label className=\"text-[#A3B1AD] mb-2 block\">S√©lectionner une photo *</Label>\n                    <div \n                      onClick={() => photoFileRef.current?.click()}\n                      className=\"border-2 border-dashed border-[#D4AF37]/30 rounded-xl p-8 text-center cursor-pointer hover:border-[#D4AF37]/50 transition-colors\"\n                    >\n                      <FileImage className=\"mx-auto text-[#D4AF37] mb-3\" size={40} />\n                      <p className=\"text-[#A3B1AD] text-sm\">Cliquez pour s√©lectionner une photo</p>\n                      <p className=\"text-[#A3B1AD]/50 text-xs mt-1\">JPG, PNG, GIF, WEBP</p>\n                    </div>\n                    <input \n                      ref={photoFileRef}\n                      type=\"file\" \n                      accept=\"image/*\" \n                      onChange={handlePhotoFileChange} \n                      className=\"hidden\" \n                      data-testid=\"photo-file-input\"\n                    />\n                    {photoFile && <p className=\"text-[#D4AF37] text-sm mt-2\">Fichier: {photoFile.name}</p>}\n                  </div>\n                )}\n                \n                {(photoUrl || photoPreview) && (\n                  <div className=\"rounded-xl overflow-hidden border border-white/10\">\n                    <img src={photoPreview || photoUrl} alt=\"Aper√ßu\" className=\"w-full h-40 object-cover\" onError={(e) => e.target.style.display = 'none'} />\n                  </div>\n                )}\n                \n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">L√©gende (optionnel)</Label>\n                  <Input placeholder=\"Description de la photo\" value={photoCaption} onChange={(e) => setPhotoCaption(e.target.value)} className=\"input-luxury\" data-testid=\"photo-caption-input\" />\n                </div>\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Cat√©gorie</Label>\n                  <Select value={photoCategory} onValueChange={setPhotoCategory}>\n                    <SelectTrigger className=\"input-luxury\" data-testid=\"photo-category-select\"><SelectValue /></SelectTrigger>\n                    <SelectContent className=\"bg-[#0F2E24] border border-white/10\">\n                      <SelectItem value=\"restaurant\">Restaurant</SelectItem>\n                      <SelectItem value=\"plats\">Plats</SelectItem>\n                      <SelectItem value=\"clients\">Clients</SelectItem>\n                      <SelectItem value=\"ambiance\">Ambiance</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <Button type=\"submit\" disabled={uploadingPhoto} className=\"w-full btn-gold\" data-testid=\"submit-photo-btn\">\n                  {uploadingPhoto ? (\n                    <span className=\"flex items-center gap-2\">\n                      <div className=\"w-5 h-5 border-2 border-[#0F2E24] border-t-transparent rounded-full animate-spin\"></div>\n                      Upload en cours...\n                    </span>\n                  ) : (\n                    \"Ajouter la Photo\"\n                  )}\n                </Button>\n              </form>\n            </motion.div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg text-[#F9F7F2] font-semibold\">Photos ({photos.length})</h3>\n              {loading ? (\n                <div className=\"grid grid-cols-2 gap-4\">{[1, 2, 3, 4].map((i) => <div key={i} className=\"h-40 bg-white/5 rounded-2xl animate-pulse\"></div>)}</div>\n              ) : photos.length === 0 ? (\n                <div className=\"luxury-card p-8 rounded-2xl text-center\"><p className=\"text-[#A3B1AD]\">Aucune photo</p></div>\n              ) : (\n                <div className=\"grid grid-cols-2 gap-4 max-h-[600px] overflow-y-auto pr-2\">\n                  {photos.map((photo) => (\n                    <div key={photo.id} className=\"luxury-card rounded-2xl overflow-hidden group relative\">\n                      <img src={photo.image_url.startsWith('/api') ? `${photo.image_url}` : photo.image_url} alt={photo.caption || \"Photo\"} className=\"w-full h-36 object-cover\" />\n                      <div className=\"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDeletePhoto(photo.id)} className=\"text-white hover:text-red-400\" data-testid={`delete-photo-${photo.id}`}>\n                          <Trash2 size={24} />\n                        </Button>\n                      </div>\n                      <div className=\"p-3\">\n                        <span className=\"text-[10px] bg-[#1A4D3E] text-[#D4AF37] px-2 py-1 rounded-full\">{photo.category}</span>\n                        {photo.caption && <p className=\"text-xs text-[#A3B1AD] mt-1 truncate\">{photo.caption}</p>}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* ==================== VIDEOS ==================== */}\n        {activeTab === \"videos\" && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"luxury-card p-8 rounded-2xl\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Video className=\"text-[#D4AF37]\" size={24} />\n                <h2 className=\"text-xl text-[#F9F7F2] font-semibold\">Ajouter une Vid√©o</h2>\n              </div>\n              \n              <UploadModeToggle mode={videoUploadMode} setMode={setVideoUploadMode} />\n              \n              <form onSubmit={handleSubmitVideo} className=\"space-y-5\">\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Titre *</Label>\n                  <Input placeholder=\"Ex: Notre ambiance du weekend\" value={videoTitle} onChange={(e) => setVideoTitle(e.target.value)} className=\"input-luxury\" data-testid=\"video-title-input\" />\n                </div>\n                \n                {videoUploadMode === \"url\" ? (\n                  <>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] mb-2 block\">Type de vid√©o</Label>\n                      <Select value={videoType} onValueChange={setVideoType}>\n                        <SelectTrigger className=\"input-luxury\"><SelectValue /></SelectTrigger>\n                        <SelectContent className=\"bg-[#0F2E24] border border-white/10\">\n                          <SelectItem value=\"youtube\">YouTube</SelectItem>\n                          <SelectItem value=\"facebook\">Facebook</SelectItem>\n                          <SelectItem value=\"direct\">Lien direct (MP4)</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label className=\"text-[#A3B1AD] mb-2 block\">URL de la vid√©o *</Label>\n                      <Input placeholder={videoType === \"youtube\" ? \"https://youtube.com/watch?v=...\" : \"URL de la vid√©o\"} value={videoUrl} onChange={(e) => setVideoUrl(e.target.value)} className=\"input-luxury\" data-testid=\"video-url-input\" />\n                    </div>\n                  </>\n                ) : (\n                  <div>\n                    <Label className=\"text-[#A3B1AD] mb-2 block\">S√©lectionner une vid√©o *</Label>\n                    <div \n                      onClick={() => videoFileRef.current?.click()}\n                      className=\"border-2 border-dashed border-[#D4AF37]/30 rounded-xl p-8 text-center cursor-pointer hover:border-[#D4AF37]/50 transition-colors\"\n                    >\n                      <Video className=\"mx-auto text-[#D4AF37] mb-3\" size={40} />\n                      <p className=\"text-[#A3B1AD] text-sm\">Cliquez pour s√©lectionner une vid√©o</p>\n                      <p className=\"text-[#A3B1AD]/50 text-xs mt-1\">MP4, WEBM</p>\n                    </div>\n                    <input \n                      ref={videoFileRef}\n                      type=\"file\" \n                      accept=\"video/*\" \n                      onChange={handleVideoFileChange} \n                      className=\"hidden\" \n                      data-testid=\"video-file-input\"\n                    />\n                    {videoFile && <p className=\"text-[#D4AF37] text-sm mt-2\">Fichier: {videoFile.name}</p>}\n                  </div>\n                )}\n                \n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Description (optionnel)</Label>\n                  <Textarea placeholder=\"Description de la vid√©o...\" value={videoDescription} onChange={(e) => setVideoDescription(e.target.value)} className=\"input-luxury min-h-[80px]\" />\n                </div>\n                <Button type=\"submit\" disabled={uploadingVideo} className=\"w-full btn-gold\" data-testid=\"submit-video-btn\">\n                  {uploadingVideo ? (\n                    <span className=\"flex items-center gap-2\">\n                      <div className=\"w-5 h-5 border-2 border-[#0F2E24] border-t-transparent rounded-full animate-spin\"></div>\n                      Upload en cours...\n                    </span>\n                  ) : (\n                    \"Ajouter la Vid√©o\"\n                  )}\n                </Button>\n              </form>\n            </motion.div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg text-[#F9F7F2] font-semibold\">Vid√©os ({videos.length})</h3>\n              {loading ? (\n                <div className=\"space-y-4\">{[1, 2].map((i) => <div key={i} className=\"h-48 bg-white/5 rounded-2xl animate-pulse\"></div>)}</div>\n              ) : videos.length === 0 ? (\n                <div className=\"luxury-card p-8 rounded-2xl text-center\"><p className=\"text-[#A3B1AD]\">Aucune vid√©o</p></div>\n              ) : (\n                <div className=\"space-y-4 max-h-[600px] overflow-y-auto pr-2\">\n                  {videos.map((video) => (\n                    <div key={video.id} className=\"luxury-card rounded-2xl overflow-hidden\">\n                      {video.video_type === \"youtube\" && getYouTubeId(video.video_url) && (\n                        <div className=\"aspect-video\">\n                          <iframe src={`https://www.youtube.com/embed/${getYouTubeId(video.video_url)}`} className=\"w-full h-full\" allowFullScreen title={video.title}></iframe>\n                        </div>\n                      )}\n                      {video.video_type === \"direct\" && (\n                        <video src={video.video_url.startsWith('/api') ? `${video.video_url}` : video.video_url} controls className=\"w-full aspect-video object-cover\"></video>\n                      )}\n                      <div className=\"p-4\">\n                        <div className=\"flex justify-between items-start\">\n                          <div>\n                            <h4 className=\"text-[#F9F7F2] font-semibold\">{video.title}</h4>\n                            {video.description && <p className=\"text-xs text-[#A3B1AD] mt-1\">{video.description}</p>}\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"text-xs text-[#A3B1AD]\">Actif</span>\n                              <Switch checked={video.is_active} onCheckedChange={() => handleToggleVideo(video.id, video.is_active)} />\n                            </div>\n                            <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDeleteVideo(video.id)} className=\"text-red-400 hover:text-red-300\">\n                              <Trash2 size={18} />\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* ==================== PROMOTIONS ==================== */}\n        {activeTab === \"promos\" && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"luxury-card p-8 rounded-2xl\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <Megaphone className=\"text-[#D4AF37]\" size={24} />\n                <h2 className=\"text-xl text-[#F9F7F2] font-semibold\">Nouvelle Promotion</h2>\n              </div>\n              <form onSubmit={handleSubmitPromo} className=\"space-y-5\">\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Titre *</Label>\n                  <Input placeholder=\"Ex: -20% sur les grillades!\" value={promoTitle} onChange={(e) => setPromoTitle(e.target.value)} className=\"input-luxury\" data-testid=\"promo-title-input\" />\n                </div>\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Description *</Label>\n                  <Textarea placeholder=\"D√©tails de la promotion...\" value={promoDescription} onChange={(e) => setPromoDescription(e.target.value)} className=\"input-luxury min-h-[80px]\" data-testid=\"promo-desc-input\" />\n                </div>\n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Type</Label>\n                  <Select value={promoType} onValueChange={setPromoType}>\n                    <SelectTrigger className=\"input-luxury\"><SelectValue /></SelectTrigger>\n                    <SelectContent className=\"bg-[#0F2E24] border border-white/10\">\n                      <SelectItem value=\"banner\">Banni√®re</SelectItem>\n                      <SelectItem value=\"popup\">Popup</SelectItem>\n                      <SelectItem value=\"announcement\">Annonce</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                \n                <div>\n                  <Label className=\"text-[#A3B1AD] mb-2 block\">Image (optionnel)</Label>\n                  <UploadModeToggle mode={promoUploadMode} setMode={setPromoUploadMode} />\n                  \n                  {promoUploadMode === \"url\" ? (\n                    <Input type=\"url\" placeholder=\"URL de l'image\" value={promoImage} onChange={(e) => setPromoImage(e.target.value)} className=\"input-luxury\" />\n                  ) : (\n                    <div>\n                      <div \n                        onClick={() => promoFileRef.current?.click()}\n                        className=\"border-2 border-dashed border-[#D4AF37]/30 rounded-xl p-6 text-center cursor-pointer hover:border-[#D4AF37]/50 transition-colors\"\n                      >\n                        <FileImage className=\"mx-auto text-[#D4AF37] mb-2\" size={32} />\n                        <p className=\"text-[#A3B1AD] text-sm\">Cliquez pour s√©lectionner</p>\n                      </div>\n                      <input \n                        ref={promoFileRef}\n                        type=\"file\" \n                        accept=\"image/*\" \n                        onChange={handlePromoFileChange} \n                        className=\"hidden\" \n                      />\n                      {promoFile && <p className=\"text-[#D4AF37] text-sm mt-2\">Fichier: {promoFile.name}</p>}\n                    </div>\n                  )}\n                  \n                  {(promoImage || promoPreview) && (\n                    <div className=\"rounded-xl overflow-hidden border border-white/10 mt-3\">\n                      <img src={promoPreview || promoImage} alt=\"Aper√ßu\" className=\"w-full h-32 object-cover\" />\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label className=\"text-[#A3B1AD] mb-2 block\">Date d√©but</Label>\n                    <Input type=\"date\" value={promoStartDate} onChange={(e) => setPromoStartDate(e.target.value)} className=\"input-luxury\" />\n                  </div>\n                  <div>\n                    <Label className=\"text-[#A3B1AD] mb-2 block\">Date fin</Label>\n                    <Input type=\"date\" value={promoEndDate} onChange={(e) => setPromoEndDate(e.target.value)} className=\"input-luxury\" />\n                  </div>\n                </div>\n                <Button type=\"submit\" disabled={uploadingPromo} className=\"w-full btn-gold\" data-testid=\"submit-promo-btn\">\n                  {uploadingPromo ? (\n                    <span className=\"flex items-center gap-2\">\n                      <div className=\"w-5 h-5 border-2 border-[#0F2E24] border-t-transparent rounded-full animate-spin\"></div>\n                      Upload en cours...\n                    </span>\n                  ) : (\n                    \"Cr√©er la Promotion\"\n                  )}\n                </Button>\n              </form>\n            </motion.div>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg text-[#F9F7F2] font-semibold\">Promotions ({promotions.length})</h3>\n              {loading ? (\n                <div className=\"space-y-4\">{[1, 2].map((i) => <div key={i} className=\"h-32 bg-white/5 rounded-2xl animate-pulse\"></div>)}</div>\n              ) : promotions.length === 0 ? (\n                <div className=\"luxury-card p-8 rounded-2xl text-center\"><p className=\"text-[#A3B1AD]\">Aucune promotion</p></div>\n              ) : (\n                <div className=\"space-y-4 max-h-[600px] overflow-y-auto pr-2\">\n                  {promotions.map((promo) => (\n                    <div key={promo.id} className=\"luxury-card p-5 rounded-2xl\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className={`text-[10px] font-bold px-3 py-1 rounded-full ${promo.is_active ? \"bg-green-500/20 text-green-400\" : \"bg-white/10 text-[#A3B1AD]\"}`}>\n                            {promo.is_active ? \"Active\" : \"Inactive\"}\n                          </span>\n                          <span className=\"text-[10px] bg-[#1A4D3E] text-[#D4AF37] px-2 py-1 rounded-full uppercase\">{promo.promo_type}</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Switch checked={promo.is_active} onCheckedChange={() => handleTogglePromo(promo.id, promo.is_active)} />\n                          <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDeletePromo(promo.id)} className=\"text-red-400 hover:text-red-300\">\n                            <Trash2 size={18} />\n                          </Button>\n                        </div>\n                      </div>\n                      {promo.image_url && <img src={promo.image_url.startsWith('/api') ? `${promo.image_url}` : promo.image_url} alt={promo.title} className=\"w-full h-32 object-cover rounded-lg mb-3\" />}\n                      <h4 className=\"text-[#F9F7F2] font-semibold\">{promo.title}</h4>\n                      <p className=\"text-sm text-[#A3B1AD] mt-1\">{promo.description}</p>\n                      {(promo.start_date || promo.end_date) && (\n                        <p className=\"text-xs text-[#D4AF37] mt-2\">\n                          {promo.start_date && `Du ${promo.start_date}`} {promo.end_date && `au ${promo.end_date}`}\n                        </p>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* ==================== GESTION PLATS ==================== */}\n        {activeTab === \"plats\" && (\n          <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg text-[#F9F7F2] font-semibold\">Tous les Plats ({menuItems.length})</h3>\n            </div>\n            \n            {loading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {[1, 2, 3, 4, 5, 6].map((i) => <div key={i} className=\"h-48 bg-white/5 rounded-2xl animate-pulse\"></div>)}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {menuItems.map((item) => (\n                  <motion.div key={item.id} initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"luxury-card rounded-2xl overflow-hidden\">\n                    <div className=\"relative h-32\">\n                      <img src={item.image_url} alt={item.name} className=\"w-full h-full object-cover\" />\n                      <div className=\"absolute top-2 right-2 flex gap-1\">\n                        {item.is_featured && <span className=\"bg-[#D4AF37] text-[#0F2E24] text-[8px] font-bold px-2 py-1 rounded-full\">VEDETTE</span>}\n                        {!item.is_available && <span className=\"bg-red-500 text-white text-[8px] font-bold px-2 py-1 rounded-full\">INDISPO</span>}\n                      </div>\n                    </div>\n                    <div className=\"p-4\">\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <div>\n                          <span className=\"text-[10px] text-[#D4AF37] uppercase tracking-wider\">{item.category}</span>\n                          <h4 className=\"text-[#F9F7F2] font-semibold text-sm\">{item.name}</h4>\n                        </div>\n                        <span className=\"text-[#D4AF37] font-semibold\">{item.price} F</span>\n                      </div>\n                      <p className=\"text-xs text-[#A3B1AD] mb-3 line-clamp-2\">{item.description}</p>\n                      <div className=\"flex items-center justify-between pt-3 border-t border-white/10\">\n                        <div className=\"flex items-center gap-4\">\n                          <label className=\"flex items-center gap-2 cursor-pointer\">\n                            <Switch checked={item.is_available} onCheckedChange={() => handleToggleMenuItem(item.id, 'is_available', item.is_available)} className=\"scale-75\" />\n                            <span className=\"text-[10px] text-[#A3B1AD]\">Dispo</span>\n                          </label>\n                          <label className=\"flex items-center gap-2 cursor-pointer\">\n                            <Switch checked={item.is_featured} onCheckedChange={() => handleToggleMenuItem(item.id, 'is_featured', item.is_featured)} className=\"scale-75\" />\n                            <span className=\"text-[10px] text-[#A3B1AD]\">Vedette</span>\n                          </label>\n                        </div>\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDeleteMenuItem(item.id)} className=\"text-red-400 hover:text-red-300 h-8 w-8\">\n                          <Trash2 size={14} />\n                        </Button>\n                      </div>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* ==================== COMMENTAIRES ==================== */}\n        {activeTab === \"commentaires\" && (\n          <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center\">\n              <h3 className=\"text-lg text-[#F9F7F2] font-semibold\">\n                Commentaires ({allReviews.length})\n              </h3>\n              <div className=\"flex gap-2 text-xs\">\n                <span className=\"bg-green-500/20 text-green-400 px-3 py-1 rounded-full\">\n                  {allReviews.filter(r => r.is_approved).length} approuv√©(s)\n                </span>\n                <span className=\"bg-yellow-500/20 text-yellow-400 px-3 py-1 rounded-full\">\n                  {allReviews.filter(r => !r.is_approved).length} en attente\n                </span>\n              </div>\n            </div>\n\n            {loading ? (\n              <div className=\"space-y-4\">\n                {[1, 2, 3].map((i) => <div key={i} className=\"h-24 bg-white/5 rounded-2xl animate-pulse\"></div>)}\n              </div>\n            ) : allReviews.length === 0 ? (\n              <div className=\"text-center py-16\">\n                <MessageSquare className=\"mx-auto text-[#A3B1AD]/30 mb-4\" size={48} />\n                <p className=\"text-[#A3B1AD]\">Aucun commentaire pour le moment</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {allReviews.map((review) => (\n                  <motion.div\n                    key={review.id}\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    className={`luxury-card rounded-2xl p-6 ${!review.is_approved ? 'border-l-4 border-l-yellow-500/50' : 'border-l-4 border-l-green-500/50'}`}\n                  >\n                    <div className=\"flex flex-col sm:flex-row sm:items-start justify-between gap-4\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <div className=\"w-10 h-10 rounded-full bg-[#1A4D3E] flex items-center justify-center text-[#D4AF37] font-semibold text-sm\">\n                            {review.author.charAt(0)}\n                          </div>\n                          <div>\n                            <h4 className=\"text-[#F9F7F2] font-semibold text-sm\">{review.author}</h4>\n                            <p className=\"text-[10px] text-[#A3B1AD]\">\n                              {new Date(review.created_at).toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' })}\n                            </p>\n                          </div>\n                          <span className={`text-[10px] px-2 py-1 rounded-full ${review.is_approved ? 'bg-green-500/20 text-green-400' : 'bg-yellow-500/20 text-yellow-400'}`}>\n                            {review.is_approved ? 'Approuv√©' : 'En attente'}\n                          </span>\n                        </div>\n                        <p className=\"text-[#F9F7F2]/80 text-sm italic ml-13\">\"{review.comment}\"</p>\n                      </div>\n                      <div className=\"flex items-center gap-2 sm:flex-col\">\n                        {!review.is_approved ? (\n                          <Button\n                            size=\"sm\"\n                            onClick={async () => {\n                              try {\n                                await axios.put(`${API}/reviews/${review.id}/approve`);\n                                setAllReviews(prev => prev.map(r => r.id === review.id ? {...r, is_approved: true} : r));\n                                toast.success(\"Commentaire approuv√©\");\n                              } catch (e) { toast.error(\"Erreur\"); }\n                            }}\n                            className=\"bg-green-500/20 text-green-400 hover:bg-green-500/30 text-xs px-3\"\n                          >\n                            <Check size={14} className=\"mr-1\" />\n                            Approuver\n                          </Button>\n                        ) : (\n                          <Button\n                            size=\"sm\"\n                            onClick={async () => {\n                              try {\n                                await axios.put(`${API}/reviews/${review.id}/hide`);\n                                setAllReviews(prev => prev.map(r => r.id === review.id ? {...r, is_approved: false} : r));\n                                toast.success(\"Commentaire masqu√©\");\n                              } catch (e) { toast.error(\"Erreur\"); }\n                            }}\n                            className=\"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30 text-xs px-3\"\n                          >\n                            <EyeOff size={14} className=\"mr-1\" />\n                            Masquer\n                          </Button>\n                        )}\n                        <Button\n                          size=\"sm\"\n                          onClick={async () => {\n                            if (!window.confirm(\"Supprimer ce commentaire ?\")) return;\n                            try {\n                              await axios.delete(`${API}/reviews/${review.id}`);\n                              setAllReviews(prev => prev.filter(r => r.id !== review.id));\n                              toast.success(\"Commentaire supprim√©\");\n                            } catch (e) { toast.error(\"Erreur\"); }\n                          }}\n                          className=\"bg-red-500/20 text-red-400 hover:bg-red-500/30 text-xs px-3\"\n                        >\n                          <Trash2 size={14} className=\"mr-1\" />\n                          Supprimer\n                        </Button>\n                      </div>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === \"caisse\" && (\n          <div className=\"space-y-8\">\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div className=\"luxury-card rounded-2xl p-4 text-center\">\n                <p className=\"text-[#A3B1AD] text-xs mb-1\">Ventes du jour</p>\n                <p className=\"text-2xl font-bold text-[#D4AF37]\">{cashStats?.total_sales || 0}</p>\n              </div>\n              <div className=\"luxury-card rounded-2xl p-4 text-center\">\n                <p className=\"text-[#A3B1AD] text-xs mb-1\">Chiffre d'affaires</p>\n                <p className=\"text-2xl font-bold text-[#F9F7F2]\">{(cashStats?.total_revenue || 0).toLocaleString()} F</p>\n              </div>\n              <div className=\"luxury-card rounded-2xl p-4 text-center\">\n                <p className=\"text-[#A3B1AD] text-xs mb-1\">Esp√®ces</p>\n                <p className=\"text-2xl font-bold text-green-400\">{(cashStats?.cash_total || 0).toLocaleString()} F</p>\n              </div>\n              <div className=\"luxury-card rounded-2xl p-4 text-center\">\n                <p className=\"text-[#A3B1AD] text-xs mb-1\">Mobile Money</p>\n                <p className=\"text-2xl font-bold text-blue-400\">{(cashStats?.mobile_money_total || 0).toLocaleString()} F</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4\">\n              <Input\n                type=\"date\"\n                value={cashDate}\n                onChange={(e) => {\n                  setCashDate(e.target.value);\n                  fetchCaisseData(e.target.value);\n                }}\n                className=\"bg-white/5 border-white/10 text-[#F9F7F2] w-48\"\n              />\n              <span className=\"text-[#A3B1AD] text-sm\">Plats vendus: <strong className=\"text-[#F9F7F2]\">{cashStats?.total_dishes_sold || 0}</strong></span>\n              <span className=\"text-[#A3B1AD] text-sm\">Ticket moyen: <strong className=\"text-[#D4AF37]\">{(cashStats?.average_ticket || 0).toLocaleString()} F</strong></span>\n            </div>\n\n            <div className=\"luxury-card rounded-2xl p-6\">\n              <h3 className=\"text-lg font-semibold text-[#D4AF37] mb-4 flex items-center gap-2\">\n                <Plus size={20} />\n                Enregistrer une vente\n              </h3>\n              <form onSubmit={handleCashSaleSubmit} className=\"space-y-4\">\n                {cashItems.map((item, index) => (\n                  <div key={index} className=\"flex gap-3 items-end\">\n                    <div className=\"flex-1\">\n                      {index === 0 && <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Plat</Label>}\n                      <select\n                        value={item.name}\n                        onChange={(e) => {\n                          const selected = menuItems.find(m => m.name === e.target.value);\n                          updateCashItem(index, \"name\", e.target.value);\n                          if (selected) updateCashItem(index, \"price\", selected.price);\n                        }}\n                        className=\"w-full bg-white/5 border border-white/10 text-[#F9F7F2] rounded-lg px-3 py-2 text-sm\"\n                      >\n                        <option value=\"\">Choisir un plat...</option>\n                        {menuItems.filter(m => m.is_available).map(m => (\n                          <option key={m.id} value={m.name} className=\"bg-[#0F2E24]\">{m.name} - {m.price.toLocaleString()} F</option>\n                        ))}\n                      </select>\n                    </div>\n                    <div className=\"w-20\">\n                      {index === 0 && <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Qt√©</Label>}\n                      <Input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => updateCashItem(index, \"quantity\", e.target.value)}\n                        className=\"bg-white/5 border-white/10 text-[#F9F7F2]\"\n                      />\n                    </div>\n                    <div className=\"w-28\">\n                      {index === 0 && <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Prix</Label>}\n                      <Input\n                        type=\"number\"\n                        min=\"0\"\n                        value={item.price}\n                        onChange={(e) => updateCashItem(index, \"price\", e.target.value)}\n                        className=\"bg-white/5 border-white/10 text-[#F9F7F2]\"\n                      />\n                    </div>\n                    {cashItems.length > 1 && (\n                      <Button type=\"button\" size=\"sm\" onClick={() => removeCashItem(index)} className=\"bg-red-500/20 text-red-400 hover:bg-red-500/30 mb-0.5\">\n                        <Trash2 size={14} />\n                      </Button>\n                    )}\n                  </div>\n                ))}\n\n                <div className=\"flex gap-4 items-center\">\n                  <Button type=\"button\" onClick={addCashItem} className=\"bg-white/5 text-[#A3B1AD] hover:bg-white/10 text-sm\">\n                    <Plus size={16} className=\"mr-1\" /> Ajouter un plat\n                  </Button>\n                  <span className=\"text-[#D4AF37] font-bold text-lg ml-auto\">\n                    Total: {cashItems.reduce((sum, item) => sum + (item.price * item.quantity), 0).toLocaleString()} FCFA\n                  </span>\n                </div>\n\n                <div className=\"flex gap-4 items-end\">\n                  <div className=\"flex-1\">\n                    <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Mode de paiement</Label>\n                    <div className=\"flex gap-3\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setCashPaymentMethod(\"especes\")}\n                        className={`flex-1 py-3 rounded-xl text-sm font-medium transition-all ${\n                          cashPaymentMethod === \"especes\"\n                            ? \"bg-green-500/20 text-green-400 border border-green-500/30\"\n                            : \"bg-white/5 text-[#A3B1AD] border border-white/10\"\n                        }`}\n                      >\n                        Esp√®ces\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => setCashPaymentMethod(\"mobile_money\")}\n                        className={`flex-1 py-3 rounded-xl text-sm font-medium transition-all ${\n                          cashPaymentMethod === \"mobile_money\"\n                            ? \"bg-blue-500/20 text-blue-400 border border-blue-500/30\"\n                            : \"bg-white/5 text-[#A3B1AD] border border-white/10\"\n                        }`}\n                      >\n                        Mobile Money\n                      </button>\n                    </div>\n                  </div>\n                  <div className=\"flex-1\">\n                    <Label className=\"text-[#A3B1AD] text-xs mb-1 block\">Note (optionnel)</Label>\n                    <Input\n                      value={cashNote}\n                      onChange={(e) => setCashNote(e.target.value)}\n                      placeholder=\"Ex: Table 5, client r√©gulier...\"\n                      className=\"bg-white/5 border-white/10 text-[#F9F7F2]\"\n                    />\n                  </div>\n                </div>\n\n                <Button\n                  type=\"submit\"\n                  disabled={submittingCash}\n                  className=\"w-full bg-[#D4AF37] text-[#0F2E24] hover:bg-[#F2CC8F] py-3 text-base font-semibold\"\n                >\n                  {submittingCash ? \"Enregistrement...\" : \"Enregistrer la vente\"}\n                </Button>\n              </form>\n            </div>\n\n            {cashStats?.top_dishes?.length > 0 && (\n              <div className=\"luxury-card rounded-2xl p-6\">\n                <h3 className=\"text-lg font-semibold text-[#D4AF37] mb-4\">Top plats vendus</h3>\n                <div className=\"space-y-3\">\n                  {cashStats.top_dishes.map((dish, index) => (\n                    <div key={index} className=\"flex items-center justify-between py-2 border-b border-white/5 last:border-0\">\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"w-6 h-6 rounded-full bg-[#D4AF37]/20 text-[#D4AF37] flex items-center justify-center text-xs font-bold\">{index + 1}</span>\n                        <span className=\"text-[#F9F7F2] text-sm\">{dish.name}</span>\n                      </div>\n                      <div className=\"flex items-center gap-4\">\n                        <span className=\"text-[#A3B1AD] text-sm\">{dish.quantity} vendus</span>\n                        <span className=\"text-[#D4AF37] text-sm font-semibold\">{dish.revenue.toLocaleString()} F</span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"luxury-card rounded-2xl p-6\">\n              <h3 className=\"text-lg font-semibold text-[#D4AF37] mb-4\">Historique des ventes</h3>\n              {cashSales.length === 0 ? (\n                <p className=\"text-[#A3B1AD] text-center py-8\">Aucune vente enregistr√©e pour cette date</p>\n              ) : (\n                <div className=\"space-y-3\">\n                  {cashSales.map((sale) => (\n                    <div key={sale.id} className=\"flex items-center justify-between py-3 px-4 bg-white/5 rounded-xl\">\n                      <div>\n                        <p className=\"text-[#F9F7F2] text-sm font-medium\">\n                          {sale.items.map(i => `${i.name} x${i.quantity}`).join(\", \")}\n                        </p>\n                        <p className=\"text-[#A3B1AD] text-xs mt-1\">\n                          {new Date(sale.created_at).toLocaleTimeString('fr-FR', {hour: '2-digit', minute: '2-digit'})} \n                          {\" - \"}\n                          <span className={sale.payment_method === \"especes\" ? \"text-green-400\" : \"text-blue-400\"}>\n                            {sale.payment_method === \"especes\" ? \"Esp√®ces\" : \"Mobile Money\"}\n                          </span>\n                          {sale.note && <span className=\"ml-2 text-[#A3B1AD]/60\">({sale.note})</span>}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center gap-3\">\n                        <span className=\"text-[#D4AF37] font-bold\">{sale.total.toLocaleString()} F</span>\n                        <Button\n                          size=\"sm\"\n                          onClick={async () => {\n                            if (!window.confirm(\"Supprimer cette vente ?\")) return;\n                            try {\n                              await axios.delete(`${API}/caisse/vente/${sale.id}`);\n                              toast.success(\"Vente supprim√©e\");\n                              fetchCaisseData();\n                            } catch (e) { toast.error(\"Erreur\"); }\n                          }}\n                          className=\"bg-red-500/20 text-red-400 hover:bg-red-500/30\"\n                        >\n                          <Trash2 size={14} />\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminPage;\n","path":null,"size_bytes":80241,"size_tokens":null},"frontend/src/components/ui/toast.jsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva } from \"class-variance-authority\";\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props} />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props} />\n  );\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props} />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}>\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold [&+div]:text-xs\", className)}\n    {...props} />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description ref={ref} className={cn(\"text-sm opacity-90\", className)} {...props} />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\nexport { ToastProvider, ToastViewport, Toast, ToastTitle, ToastDescription, ToastClose, ToastAction };\n","path":null,"size_bytes":3829,"size_tokens":null},"test_result.md":{"content":"#====================================================================================================\n# START - Testing Protocol - DO NOT EDIT OR REMOVE THIS SECTION\n#====================================================================================================\n\n# THIS SECTION CONTAINS CRITICAL TESTING INSTRUCTIONS FOR BOTH AGENTS\n# BOTH MAIN_AGENT AND TESTING_AGENT MUST PRESERVE THIS ENTIRE BLOCK\n\n# Communication Protocol:\n# If the `testing_agent` is available, main agent should delegate all testing tasks to it.\n#\n# You have access to a file called `test_result.md`. This file contains the complete testing state\n# and history, and is the primary means of communication between main and the testing agent.\n#\n# Main and testing agents must follow this exact format to maintain testing data. \n# The testing data must be entered in yaml format Below is the data structure:\n# \n## user_problem_statement: {problem_statement}\n## backend:\n##   - task: \"Task name\"\n##     implemented: true\n##     working: true  # or false or \"NA\"\n##     file: \"file_path.py\"\n##     stuck_count: 0\n##     priority: \"high\"  # or \"medium\" or \"low\"\n##     needs_retesting: false\n##     status_history:\n##         -working: true  # or false or \"NA\"\n##         -agent: \"main\"  # or \"testing\" or \"user\"\n##         -comment: \"Detailed comment about status\"\n##\n## frontend:\n##   - task: \"Task name\"\n##     implemented: true\n##     working: true  # or false or \"NA\"\n##     file: \"file_path.js\"\n##     stuck_count: 0\n##     priority: \"high\"  # or \"medium\" or \"low\"\n##     needs_retesting: false\n##     status_history:\n##         -working: true  # or false or \"NA\"\n##         -agent: \"main\"  # or \"testing\" or \"user\"\n##         -comment: \"Detailed comment about status\"\n##\n## metadata:\n##   created_by: \"main_agent\"\n##   version: \"1.0\"\n##   test_sequence: 0\n##   run_ui: false\n##\n## test_plan:\n##   current_focus:\n##     - \"Task name 1\"\n##     - \"Task name 2\"\n##   stuck_tasks:\n##     - \"Task name with persistent issues\"\n##   test_all: false\n##   test_priority: \"high_first\"  # or \"sequential\" or \"stuck_first\"\n##\n## agent_communication:\n##     -agent: \"main\"  # or \"testing\" or \"user\"\n##     -message: \"Communication message between agents\"\n\n# Protocol Guidelines for Main agent\n#\n# 1. Update Test Result File Before Testing:\n#    - Main agent must always update the `test_result.md` file before calling the testing agent\n#    - Add implementation details to the status_history\n#    - Set `needs_retesting` to true for tasks that need testing\n#    - Update the `test_plan` section to guide testing priorities\n#    - Add a message to `agent_communication` explaining what you've done\n#\n# 2. Incorporate User Feedback:\n#    - When a user provides feedback that something is or isn't working, add this information to the relevant task's status_history\n#    - Update the working status based on user feedback\n#    - If a user reports an issue with a task that was marked as working, increment the stuck_count\n#    - Whenever user reports issue in the app, if we have testing agent and task_result.md file so find the appropriate task for that and append in status_history of that task to contain the user concern and problem as well \n#\n# 3. Track Stuck Tasks:\n#    - Monitor which tasks have high stuck_count values or where you are fixing same issue again and again, analyze that when you read task_result.md\n#    - For persistent issues, use websearch tool to find solutions\n#    - Pay special attention to tasks in the stuck_tasks list\n#    - When you fix an issue with a stuck task, don't reset the stuck_count until the testing agent confirms it's working\n#\n# 4. Provide Context to Testing Agent:\n#    - When calling the testing agent, provide clear instructions about:\n#      - Which tasks need testing (reference the test_plan)\n#      - Any authentication details or configuration needed\n#      - Specific test scenarios to focus on\n#      - Any known issues or edge cases to verify\n#\n# 5. Call the testing agent with specific instructions referring to test_result.md\n#\n# IMPORTANT: Main agent must ALWAYS update test_result.md BEFORE calling the testing agent, as it relies on this file to understand what to test next.\n\n#====================================================================================================\n# END - Testing Protocol - DO NOT EDIT OR REMOVE THIS SECTION\n#====================================================================================================\n\n\n\n#====================================================================================================\n# Testing Data - Main Agent and testing sub agent both should log testing data below this section\n#====================================================================================================","path":null,"size_bytes":4774,"size_tokens":null},"frontend/src/lib/utils.js":{"content":"import { clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs) {\n  return twMerge(clsx(inputs));\n}\n","path":null,"size_bytes":137,"size_tokens":null},"frontend/src/components/ui/menubar.jsx":{"content":"import * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}) {\n  return <MenubarPrimitive.Menu {...props} />;\n}\n\nfunction MenubarGroup({\n  ...props\n}) {\n  return <MenubarPrimitive.Group {...props} />;\n}\n\nfunction MenubarPortal({\n  ...props\n}) {\n  return <MenubarPrimitive.Portal {...props} />;\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}) {\n  return <MenubarPrimitive.RadioGroup {...props} />;\n}\n\nfunction MenubarSub({\n  ...props\n}) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />;\n}\n\nconst Menubar = React.forwardRef(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm\",\n      className\n    )}\n    {...props} />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props} />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}>\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props} />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef((\n  { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n  ref\n) => (\n  <MenubarPrimitive.Portal>\n    <MenubarPrimitive.Content\n      ref={ref}\n      align={align}\n      alignOffset={alignOffset}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n        className\n      )}\n      {...props} />\n  </MenubarPrimitive.Portal>\n))\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props} />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}>\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}>\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", inset && \"pl-8\", className)}\n    {...props} />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props} />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)}\n      {...props} />\n  );\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":6874,"size_tokens":null},"frontend/src/components/ui/dialog.jsx":{"content":"import * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props} />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}>\n      {children}\n      <DialogPrimitive.Close\n        className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}) => (\n  <div\n    className={cn(\"flex flex-col space-y-1.5 text-center sm:text-left\", className)}\n    {...props} />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}) => (\n  <div\n    className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)}\n    {...props} />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\n    {...props} />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props} />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3214,"size_tokens":null},"frontend/src/components/Footer.jsx":{"content":"import { Link } from \"react-router-dom\";\nimport { MapPin, Phone, Clock } from \"lucide-react\";\n\n// TikTok icon component (not available in lucide-react)\nconst TikTokIcon = ({ size = 24, className = \"\" }) => (\n  <svg \n    width={size} \n    height={size} \n    viewBox=\"0 0 24 24\" \n    fill=\"currentColor\" \n    className={className}\n  >\n    <path d=\"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z\"/>\n  </svg>\n);\n\nconst Footer = () => {\n  const currentYear = new Date().getFullYear();\n\n  return (\n    <footer className=\"bg-[#05100D] border-t border-white/5\" data-testid=\"footer\">\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 py-20\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 lg:gap-8\">\n          {/* Brand */}\n          <div className=\"lg:col-span-1\">\n            <img \n              src=\"https://customer-assets.emergentagent.com/job_chezloman/artifacts/dn3n27hs_Design%20sans%20titre.png\" \n              alt=\"Chez Loman\" \n              className=\"h-20 w-20 object-cover rounded-full border-2 border-[#D4AF37]/30 mb-6\"\n            />\n            <p className=\"text-[#A3B1AD] text-sm leading-relaxed\">\n              Une exp√©rience culinaire ivoirienne d'exception au c≈ìur d'Abidjan.\n            </p>\n          </div>\n\n          {/* Navigation */}\n          <div>\n            <h3 className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.2em] mb-6\">\n              Navigation\n            </h3>\n            <ul className=\"space-y-3\">\n              {[\n                { path: \"/\", label: \"Accueil\" },\n                { path: \"/menu\", label: \"La Carte\" },\n                { path: \"/about\", label: \"Notre Histoire\" },\n                { path: \"/gallery\", label: \"Galerie\" },\n                { path: \"/contact\", label: \"Contact\" },\n              ].map((link) => (\n                <li key={link.path}>\n                  <Link \n                    to={link.path} \n                    className=\"text-[#A3B1AD] hover:text-[#D4AF37] transition-colors duration-300 text-sm\"\n                  >\n                    {link.label}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Contact */}\n          <div>\n            <h3 className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.2em] mb-6\">\n              Contact\n            </h3>\n            <ul className=\"space-y-4\">\n              <li className=\"flex items-start gap-3\">\n                <MapPin size={16} className=\"text-[#D4AF37] mt-1 flex-shrink-0\" />\n                <span className=\"text-[#A3B1AD] text-sm\">\n                  Yopougon Abobo Doum√©<br/>Basile Boli, Abidjan\n                </span>\n              </li>\n              <li className=\"flex items-center gap-3\">\n                <Phone size={16} className=\"text-[#D4AF37] flex-shrink-0\" />\n                <a href=\"tel:+2250709508819\" className=\"text-[#A3B1AD] hover:text-[#F9F7F2] text-sm transition-colors\">\n                  +225 07 09 508 819\n                </a>\n              </li>\n            </ul>\n            \n            {/* Social Links */}\n            <div className=\"mt-6\">\n              <h4 className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.2em] mb-4\">\n                Suivez-nous\n              </h4>\n              <div className=\"flex items-center gap-4\">\n                <a \n                  href=\"https://www.facebook.com/profile.php?id=61574715038273\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"w-10 h-10 rounded-full bg-[#1A4D3E] flex items-center justify-center text-[#D4AF37] hover:bg-[#D4AF37] hover:text-[#0F2E24] transition-all duration-300\"\n                  data-testid=\"footer-facebook-link\"\n                >\n                  <svg width=\"18\" height=\"18\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n                  </svg>\n                </a>\n                <a \n                  href=\"https://www.tiktok.com/@lomanschadrac?lang=fr\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"w-10 h-10 rounded-full bg-[#1A4D3E] flex items-center justify-center text-[#D4AF37] hover:bg-[#D4AF37] hover:text-[#0F2E24] transition-all duration-300\"\n                  data-testid=\"footer-tiktok-link\"\n                >\n                  <TikTokIcon size={18} />\n                </a>\n              </div>\n            </div>\n          </div>\n\n          {/* Hours */}\n          <div>\n            <h3 className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.2em] mb-6\">\n              Horaires\n            </h3>\n            <div className=\"flex items-start gap-3\">\n              <Clock size={16} className=\"text-[#D4AF37] mt-1 flex-shrink-0\" />\n              <div className=\"text-[#A3B1AD] text-sm space-y-1\">\n                <p>Mar ‚Äì Sam: 11h ‚Äì 22h</p>\n                <p>Dimanche: 13h ‚Äì 22h</p>\n                <p className=\"text-[#E74C3C]\">Lundi: Ferm√©</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Bottom */}\n        <div className=\"mt-16 pt-8 border-t border-white/5\">\n          {/* Navigation Links */}\n          <div className=\"flex flex-wrap justify-center gap-6 mb-6\">\n            {[\n              { path: \"/\", label: \"Accueil\" },\n              { path: \"/menu\", label: \"La Carte\" },\n              { path: \"/about\", label: \"Notre Histoire\" },\n              { path: \"/gallery\", label: \"Galerie\" },\n              { path: \"/contact\", label: \"Contact\" },\n              { path: \"/admin\", label: \"Admin\" },\n            ].map((link) => (\n              <Link \n                key={link.path}\n                to={link.path} \n                className=\"text-[#A3B1AD]/70 hover:text-[#D4AF37] transition-colors duration-300 text-sm\"\n              >\n                {link.label}\n              </Link>\n            ))}\n          </div>\n          \n          {/* Info line */}\n          <div className=\"flex flex-col items-center gap-2 text-center\">\n            <p className=\"text-[#A3B1AD]/50 text-xs tracking-wide\">\n              ¬© {currentYear} Chez Loman ‚Ä¢ Cuisine Ivoirienne Premium ‚Ä¢ Yopougon, Abidjan\n            </p>\n            <p className=\"text-[#A3B1AD]/40 text-[10px] tracking-wider\">\n              Powered by <span className=\"text-[#D4AF37]/60 font-medium\">AI'vory</span> / <span className=\"text-[#A3B1AD]/60\">Armando Anzan</span>\n            </p>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","path":null,"size_bytes":7033,"size_tokens":null},"frontend/src/components/ui/pagination.jsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\";\n\nconst Pagination = ({\n  className,\n  ...props\n}) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props} />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props} />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(buttonVariants({\n      variant: isActive ? \"outline\" : \"ghost\",\n      size,\n    }), className)}\n    {...props} />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}>\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}>\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}>\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationLink,\n  PaginationItem,\n  PaginationPrevious,\n  PaginationNext,\n  PaginationEllipsis,\n}\n","path":null,"size_bytes":2322,"size_tokens":null},"frontend/src/components/ui/sheet.jsx":{"content":"import * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva } from \"class-variance-authority\";\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref} />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\nconst SheetContent = React.forwardRef(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content ref={ref} className={cn(sheetVariants({ side }), className)} {...props}>\n      <SheetPrimitive.Close\n        className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n      {children}\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}) => (\n  <div\n    className={cn(\"flex flex-col space-y-2 text-center sm:text-left\", className)}\n    {...props} />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}) => (\n  <div\n    className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)}\n    {...props} />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props} />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props} />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":3535,"size_tokens":null},"frontend/src/components/ui/label.jsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":525,"size_tokens":null},"frontend/src/components/ui/alert-dialog.jsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref} />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props} />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}) => (\n  <div\n    className={cn(\"flex flex-col space-y-2 text-center sm:text-left\", className)}\n    {...props} />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}) => (\n  <div\n    className={cn(\"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\", className)}\n    {...props} />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title ref={ref} className={cn(\"text-lg font-semibold\", className)} {...props} />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props} />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action ref={ref} className={cn(buttonVariants(), className)} {...props} />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(buttonVariants({ variant: \"outline\" }), \"mt-2 sm:mt-0\", className)}\n    {...props} />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":3461,"size_tokens":null},"frontend/src/components/ui/radio-group.jsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef(({ className, ...props }, ref) => {\n  return (<RadioGroupPrimitive.Root className={cn(\"grid gap-2\", className)} {...props} ref={ref} />);\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}>\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-3.5 w-3.5 fill-primary\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  );\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1133,"size_tokens":null},"frontend/src/components/ui/slider.jsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\"relative flex w-full touch-none select-none items-center\", className)}\n    {...props}>\n    <SliderPrimitive.Track\n      className=\"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb\n      className=\"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":914,"size_tokens":null},"frontend/src/components/ui/accordion.jsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item ref={ref} className={cn(\"border-b\", className)} {...props} />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}>\n      {children}\n      <ChevronDown\n        className=\"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}>\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1615,"size_tokens":null},"DEPLOYMENT_GUIDE.md":{"content":"# Guide de D√©ploiement - Chez Loman Restaurant\n\n## 1. Export vers GitHub\n\n### √âtapes :\n1. Dans l'interface Emergent, cliquez sur **\"Save to GitHub\"**\n2. Connectez votre compte GitHub si ce n'est pas d√©j√† fait\n3. Choisissez votre repository ou cr√©ez-en un nouveau\n4. Cliquez sur **\"PUSH TO GITHUB\"**\n\n---\n\n## 2. Configuration de la Base de Donn√©es MongoDB Atlas (GRATUIT)\n\n### √âtape 1 : Cr√©er un compte MongoDB Atlas\n1. Allez sur https://www.mongodb.com/atlas\n2. Cr√©ez un compte gratuit (plan M0 gratuit pour toujours)\n3. Cliquez sur \"Build a Database\"\n\n### √âtape 2 : Cr√©er un Cluster\n1. Choisissez **\"FREE\" (Shared)**\n2. S√©lectionnez une r√©gion proche (ex: Paris, Frankfurt)\n3. Nommez votre cluster (ex: \"chez-loman-cluster\")\n4. Cliquez sur \"Create Cluster\"\n\n### √âtape 3 : Configurer l'acc√®s\n1. **Database Access** ‚Üí Add New Database User\n   - Username: `chezloman_admin`\n   - Password: (g√©n√©rez un mot de passe s√©curis√©)\n   - Role: \"Read and write to any database\"\n\n2. **Network Access** ‚Üí Add IP Address\n   - Cliquez sur \"Allow Access from Anywhere\" (0.0.0.0/0)\n   - Ou ajoutez les IPs sp√©cifiques de votre h√©bergeur\n\n### √âtape 4 : Obtenir la cha√Æne de connexion\n1. Cliquez sur \"Connect\" sur votre cluster\n2. Choisissez \"Connect your application\"\n3. Copiez la cha√Æne de connexion :\n   ```\n   mongodb+srv://chezloman_admin:<password>@chez-loman-cluster.xxxxx.mongodb.net/?retryWrites=true&w=majority\n   ```\n4. Remplacez `<password>` par votre mot de passe\n\n---\n\n## 3. Configuration des Variables d'Environnement\n\n### Pour le Backend (Render, Railway, etc.)\n```env\nMONGO_URL=mongodb+srv://chezloman_admin:VOTRE_MOT_DE_PASSE@chez-loman-cluster.xxxxx.mongodb.net/?retryWrites=true&w=majority\nDB_NAME=chez_loman_db\nCORS_ORIGINS=https://votre-frontend.vercel.app\nDEEPSEEK_API_KEY=votre_cle_deepseek  # Optionnel pour l'IA\n```\n\n### Pour le Frontend (Vercel)\n```env\nREACT_APP_BACKEND_URL=https://votre-backend.onrender.com\n```\n\n---\n\n## 4. D√©ploiement sur Vercel (Frontend uniquement)\n\n### √âtapes :\n1. Connectez votre GitHub √† Vercel (https://vercel.com)\n2. Importez votre repository\n3. Configuration :\n   - Framework Preset: Create React App\n   - Root Directory: `frontend`\n   - Build Command: `yarn build`\n   - Output Directory: `build`\n4. Ajoutez la variable d'environnement `REACT_APP_BACKEND_URL`\n5. D√©ployez\n\n---\n\n## 5. D√©ploiement du Backend sur Render (Gratuit)\n\n### √âtapes :\n1. Cr√©ez un compte sur https://render.com\n2. Nouveau ‚Üí Web Service\n3. Connectez votre repository GitHub\n4. Configuration :\n   - Name: `chez-loman-api`\n   - Root Directory: `backend`\n   - Runtime: Python 3\n   - Build Command: `pip install -r requirements.txt`\n   - Start Command: `uvicorn server:app --host 0.0.0.0 --port $PORT`\n5. Ajoutez les variables d'environnement (MONGO_URL, DB_NAME, CORS_ORIGINS)\n6. D√©ployez\n\n---\n\n## 6. Initialisation de la Base de Donn√©es\n\nUne fois d√©ploy√©, appelez ces endpoints pour initialiser les donn√©es :\n\n```bash\n# Initialiser les donn√©es du site\ncurl -X POST https://votre-backend.onrender.com/api/seed\n\n# Initialiser les donn√©es du dashboard\ncurl -X POST https://votre-backend.onrender.com/api/seed-dashboard\n```\n\n---\n\n## R√©sum√© des URLs apr√®s d√©ploiement\n\n| Service | URL |\n|---------|-----|\n| Frontend | https://chez-loman.vercel.app |\n| Backend | https://chez-loman-api.onrender.com |\n| MongoDB | mongodb+srv://...@chez-loman-cluster.mongodb.net |\n\n---\n\n## Identifiants Admin\n\n- **Username**: admin\n- **Password**: chezloman2024\n\n‚ö†Ô∏è **IMPORTANT**: Changez le mot de passe admin en production !\n\n---\n\n## Support\n\nPour toute question, contactez : AI'vory / Armando Anzan\n","path":null,"size_bytes":3636,"size_tokens":null},"frontend/plugins/visual-edits/dev-server-setup.js":{"content":"// dev-server-setup.js\n// Dev server middleware configuration for visual editing\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst express = require(\"express\");\nconst { execSync } = require(\"child_process\");\n\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n// Variable Edit Handler - For editing dynamic content from traceable sources\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\nconst EXTENSIONS = [\".tsx\", \".ts\", \".jsx\", \".js\"];\n\n/**\n * Resolves an import path to an absolute file path\n * @param {string} source - Import source (e.g., \"@/data/products\" or \"./utils\")\n * @param {string} frontendRoot - Root directory of the frontend\n * @returns {string|null} Absolute path or null if not found\n */\nfunction resolveSourceFile(source, frontendRoot) {\n  let base;\n\n  if (source.startsWith(\"@/\")) {\n    base = path.join(frontendRoot, \"src\", source.slice(2));\n  } else if (source.startsWith(\"./\") || source.startsWith(\"../\")) {\n    base = path.resolve(frontendRoot, \"src\", source);\n  } else {\n    return null; // External package\n  }\n\n  // Try direct file with extensions\n  for (const ext of EXTENSIONS) {\n    const file = base.endsWith(ext) ? base : base + ext;\n    if (fs.existsSync(file) && fs.statSync(file).isFile()) {\n      return file;\n    }\n  }\n\n  // Try index file in directory\n  if (fs.existsSync(base) && fs.statSync(base).isDirectory()) {\n    for (const ext of EXTENSIONS) {\n      const indexFile = path.join(base, \"index\" + ext);\n      if (fs.existsSync(indexFile)) {\n        return indexFile;\n      }\n    }\n  }\n\n  return null;\n}\n\n/**\n * Validates if a variable edit request is valid and safe\n * @param {Object} change - The change request\n * @returns {{valid: boolean, error?: string}}\n */\nfunction validateVariableEdit(change) {\n  if (!change.variableName) {\n    return { valid: false, error: \"Missing variableName\" };\n  }\n\n  if (change.newValue === undefined) {\n    return { valid: false, error: \"Missing newValue\" };\n  }\n\n  // Prevent code injection - only allow primitive values\n  if (typeof change.newValue === \"string\") {\n    // Disallow strings that look like code\n    if (change.newValue.includes(\"${\") || change.newValue.includes(\"`\")) {\n      return { valid: false, error: \"Template literals not allowed in newValue\" };\n    }\n  }\n\n  return { valid: true };\n}\n\n/**\n * Processes a variable edit request\n * @param {Object} change - The change request with sourceFile, variableName, etc.\n * @param {string} frontendRoot - Root directory of the frontend\n * @param {Object} babelTools - { parser, traverse, generate, t }\n * @returns {{success: boolean, file?: string, error?: string}}\n */\nfunction processVariableEdit(change, frontendRoot, babelTools) {\n  const { parser, traverse, generate, t } = babelTools;\n\n  // Resolve the source file\n  // Prefer absolute path (sourceFileAbs) if provided, otherwise resolve from sourceFile\n  let targetFile;\n  if (change.sourceFileAbs) {\n    // Use absolute path directly\n    targetFile = change.sourceFileAbs;\n  } else if (change.sourceFile) {\n    targetFile = resolveSourceFile(change.sourceFile, frontendRoot);\n    if (!targetFile) {\n      return { success: false, error: `Could not resolve source file: ${change.sourceFile}` };\n    }\n  } else {\n    return { success: false, error: \"sourceFile or sourceFileAbs is required for variableEdit\" };\n  }\n\n  // Security check\n  const normalizedTarget = path.normalize(targetFile);\n  if (!normalizedTarget.startsWith(frontendRoot) || normalizedTarget.includes(\"node_modules\")) {\n    return { success: false, error: `Forbidden path: ${targetFile}` };\n  }\n\n  // Read and parse the file\n  if (!fs.existsSync(targetFile)) {\n    return { success: false, error: `File not found: ${targetFile}` };\n  }\n\n  const content = fs.readFileSync(targetFile, \"utf8\");\n  let ast;\n  try {\n    ast = parser.parse(content, {\n      sourceType: \"module\",\n      plugins: [\"jsx\", \"typescript\"],\n    });\n  } catch (parseError) {\n    return { success: false, error: `Parse error: ${parseError.message}` };\n  }\n\n  // Find and modify the variable\n  let modified = false;\n  let oldValue = null;\n\n  traverse(ast, {\n    VariableDeclarator(nodePath) {\n      // Match by name and optionally by line\n      if (!t.isIdentifier(nodePath.node.id)) return;\n      if (nodePath.node.id.name !== change.variableName) return;\n\n      // If line is specified, verify it matches\n      if (change.variableLine && nodePath.node.loc?.start.line !== change.variableLine) {\n        return;\n      }\n\n      const init = nodePath.node.init;\n      if (!init) return;\n\n      // Handle different value types\n      if (change.arrayIndex !== undefined) {\n        // Array element modification\n        if (!t.isArrayExpression(init)) {\n          return;\n        }\n\n        const elements = init.elements;\n        if (change.arrayIndex < 0 || change.arrayIndex >= elements.length) {\n          return;\n        }\n\n        const element = elements[change.arrayIndex];\n        if (!element) return;\n\n        if (change.propertyPath) {\n          // Modify property within array element (e.g., PRODUCTS[1].name)\n          if (!t.isObjectExpression(element)) {\n            return;\n          }\n\n          const result = modifyObjectProperty(element, change.propertyPath, change.newValue, t);\n          if (result.success) {\n            oldValue = result.oldValue;\n            modified = true;\n          }\n        } else {\n          // Replace entire array element\n          oldValue = generate(element).code;\n          if (typeof change.newValue === \"string\") {\n            elements[change.arrayIndex] = t.stringLiteral(change.newValue);\n          } else if (typeof change.newValue === \"number\") {\n            elements[change.arrayIndex] = t.numericLiteral(change.newValue);\n          } else if (typeof change.newValue === \"object\") {\n            // For objects, parse the JSON and create an object expression\n            elements[change.arrayIndex] = jsonToAst(change.newValue, t);\n          }\n          modified = true;\n        }\n      } else if (change.propertyPath) {\n        // Object property modification (e.g., CONFIG.title)\n        if (!t.isObjectExpression(init)) {\n          return;\n        }\n\n        const result = modifyObjectProperty(init, change.propertyPath, change.newValue, t);\n        if (result.success) {\n          oldValue = result.oldValue;\n          modified = true;\n        }\n      } else {\n        // Direct value replacement\n        if (t.isStringLiteral(init)) {\n          oldValue = init.value;\n          init.value = String(change.newValue);\n          modified = true;\n        } else if (t.isNumericLiteral(init)) {\n          oldValue = init.value;\n          init.value = Number(change.newValue);\n          modified = true;\n        }\n      }\n\n      if (modified) {\n        nodePath.stop();\n      }\n    },\n  });\n\n  if (!modified) {\n    return { success: false, error: `Variable \"${change.variableName}\" not found or not editable` };\n  }\n\n  // Generate updated code\n  const { code } = generate(ast, {\n    retainLines: true,\n    retainFunctionParens: true,\n    comments: true,\n  });\n\n  // Write the file\n  fs.writeFileSync(targetFile, code, \"utf8\");\n\n  return {\n    success: true,\n    file: targetFile,\n    oldValue,\n    newValue: change.newValue,\n  };\n}\n\n/**\n * Modifies a property within an ObjectExpression\n * @param {Object} objectExpr - The ObjectExpression AST node\n * @param {string} propertyPath - Dot-notation path (e.g., \"name\" or \"address.city\")\n * @param {*} newValue - The new value to set\n * @param {Object} t - Babel types\n * @returns {{success: boolean, oldValue?: string}}\n */\nfunction modifyObjectProperty(objectExpr, propertyPath, newValue, t) {\n  const parts = propertyPath.split(\".\");\n  let current = objectExpr;\n\n  // Navigate to the parent of the target property\n  for (let i = 0; i < parts.length - 1; i++) {\n    const prop = findProperty(current, parts[i], t);\n    if (!prop || !t.isObjectExpression(prop.value)) {\n      return { success: false };\n    }\n    current = prop.value;\n  }\n\n  // Find and modify the target property\n  const targetPropName = parts[parts.length - 1];\n  const targetProp = findProperty(current, targetPropName, t);\n\n  if (!targetProp) {\n    return { success: false };\n  }\n\n  let oldValue;\n  if (t.isStringLiteral(targetProp.value)) {\n    oldValue = targetProp.value.value;\n    targetProp.value = t.stringLiteral(String(newValue));\n    return { success: true, oldValue };\n  } else if (t.isNumericLiteral(targetProp.value)) {\n    oldValue = targetProp.value.value;\n    targetProp.value = t.numericLiteral(Number(newValue));\n    return { success: true, oldValue };\n  }\n\n  return { success: false };\n}\n\n/**\n * Finds a property in an ObjectExpression by name\n */\nfunction findProperty(objectExpr, propName, t) {\n  if (!t.isObjectExpression(objectExpr)) return null;\n\n  for (const prop of objectExpr.properties) {\n    if (t.isObjectProperty(prop)) {\n      if (t.isIdentifier(prop.key) && prop.key.name === propName) {\n        return prop;\n      }\n      if (t.isStringLiteral(prop.key) && prop.key.value === propName) {\n        return prop;\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Converts a JSON value to an AST node\n */\nfunction jsonToAst(value, t) {\n  if (value === null) {\n    return t.nullLiteral();\n  }\n  if (typeof value === \"string\") {\n    return t.stringLiteral(value);\n  }\n  if (typeof value === \"number\") {\n    return t.numericLiteral(value);\n  }\n  if (typeof value === \"boolean\") {\n    return t.booleanLiteral(value);\n  }\n  if (Array.isArray(value)) {\n    return t.arrayExpression(value.map(v => jsonToAst(v, t)));\n  }\n  if (typeof value === \"object\") {\n    return t.objectExpression(\n      Object.entries(value).map(([k, v]) =>\n        t.objectProperty(t.identifier(k), jsonToAst(v, t))\n      )\n    );\n  }\n  return t.nullLiteral();\n}\n\n// üîç Read Supervisor code-server password from conf.d\nfunction getCodeServerPassword() {\n  try {\n    const conf = fs.readFileSync(\n      \"/etc/supervisor/conf.d/supervisord_code_server.conf\",\n      \"utf8\",\n    );\n\n    // Match environment=PASSWORD=\"value\"\n    const match = conf.match(/PASSWORD=\"([^\"]+)\"/);\n    return match ? match[1] : null;\n  } catch {\n    return null;\n  }\n}\n\nconst SUP_PASS = getCodeServerPassword();\n\n// Dev server setup function\nfunction setupDevServer(config) {\n  config.setupMiddlewares = (middlewares, devServer) => {\n    if (!devServer) throw new Error(\"webpack-dev-server not defined\");\n    devServer.app.use(express.json());\n\n    // CORS origin validation\n    const isAllowedOrigin = (origin) => {\n      if (!origin) return false;\n\n      // Allow localhost and 127.0.0.1 on any port\n      if (origin.match(/^https?:\\/\\/(localhost|127\\.0\\.0\\.1)(:\\d+)?$/)) {\n        return true;\n      }\n\n      // Allow all emergent.sh subdomains\n      if (origin.match(/^https:\\/\\/([a-zA-Z0-9-]+\\.)*emergent\\.sh$/)) {\n        return true;\n      }\n\n      // Allow all emergentagent.com subdomains\n      if (origin.match(/^https:\\/\\/([a-zA-Z0-9-]+\\.)*emergentagent\\.com$/)) {\n        return true;\n      }\n\n      // Allow all appspot.com subdomains (for App Engine)\n      if (origin.match(/^https:\\/\\/([a-zA-Z0-9-]+\\.)*appspot\\.com$/)) {\n        return true;\n      }\n\n      return false;\n    };\n\n    // ‚úÖ Health check (no auth)\n    devServer.app.get(\"/ping\", (req, res) => {\n      res.json({ status: \"ok\", time: new Date().toISOString() });\n    });\n\n    // ‚úÖ Protected file editing endpoint with AST processing\n    devServer.app.post(\"/edit-file\", (req, res) => {\n      // Validate and set CORS headers\n      const origin = req.get(\"Origin\");\n      if (origin && isAllowedOrigin(origin)) {\n        res.header(\"Access-Control-Allow-Origin\", origin);\n        res.header(\"Access-Control-Allow-Headers\", \"Content-Type, x-api-key\");\n      }\n\n      // üîë Check header against Supervisor password\n      const key = req.get(\"x-api-key\");\n      if (!SUP_PASS || key !== SUP_PASS) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { changes } = req.body;\n\n      if (!changes || !Array.isArray(changes) || changes.length === 0) {\n        return res.status(400).json({ error: \"No changes provided\" });\n      }\n\n      try {\n        // Track all edits for response\n        const edits = [];\n        const rejectedChanges = [];\n\n        // Import Babel libraries (needed for both variableEdit and regular edits)\n        const parser = require(\"@babel/parser\");\n        const traverse = require(\"@babel/traverse\").default;\n        const generate = require(\"@babel/generator\").default;\n        const t = require(\"@babel/types\");\n        const frontendRoot = path.resolve(__dirname, '../..');\n\n        // Helper function to get consistent relative path\n        const getRelativePath = (absolutePath) => {\n          const rel = path.relative(frontendRoot, absolutePath);\n          return '/' + rel;\n        };\n\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        // Process variableEdit changes separately (they target data source files)\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        const variableEditChanges = changes.filter(c => c.type === \"variableEdit\");\n        const otherChanges = changes.filter(c => c.type !== \"variableEdit\");\n\n        for (const change of variableEditChanges) {\n          console.log(`[backend] Processing variableEdit change:`, {\n            sourceFile: change.sourceFile,\n            variableName: change.variableName,\n            arrayIndex: change.arrayIndex,\n            propertyPath: change.propertyPath,\n          });\n\n          // Validate the change request\n          const validation = validateVariableEdit(change);\n          if (!validation.valid) {\n            rejectedChanges.push({\n              change,\n              reason: validation.error,\n            });\n            continue;\n          }\n\n          // Process the variable edit\n          const result = processVariableEdit(change, frontendRoot, {\n            parser,\n            traverse,\n            generate,\n            t,\n          });\n\n          if (result.success) {\n            edits.push({\n              file: getRelativePath(result.file),\n              type: \"variableEdit\",\n              variableName: change.variableName,\n              arrayIndex: change.arrayIndex,\n              propertyPath: change.propertyPath,\n              oldData: result.oldValue,\n              newData: result.newValue,\n            });\n\n            // Commit the change to git\n            const timestamp = Date.now();\n            try {\n              execSync(`git -c user.name=\"visual-edit\" -c user.email=\"support@emergent.sh\" add \"${result.file}\"`);\n              execSync(`git -c user.name=\"visual-edit\" -c user.email=\"support@emergent.sh\" commit -m \"visual_edit_variable_${timestamp}\"`);\n            } catch (gitError) {\n              console.error(`Git commit failed for variableEdit: ${gitError.message}`);\n            }\n          } else {\n            rejectedChanges.push({\n              change,\n              reason: result.error,\n            });\n          }\n        }\n\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n        // Process regular JSX changes (className, textContent, content)\n        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n        // Group changes by fileName\n        const changesByFile = {};\n        otherChanges.forEach((change) => {\n          if (!changesByFile[change.fileName]) {\n            changesByFile[change.fileName] = [];\n          }\n          changesByFile[change.fileName].push(change);\n        });\n\n        // Process each file's changes\n        Object.entries(changesByFile).forEach(([fileName, fileChanges]) => {\n          const findFileRecursive = (dir, filename) => {\n            try {\n              const files = fs.readdirSync(dir, { withFileTypes: true });\n\n              for (const file of files) {\n                const fullPath = path.join(dir, file.name);\n\n                // Skip excluded directories\n                if (file.isDirectory()) {\n                  if (\n                    file.name === \"node_modules\" ||\n                    file.name === \"public\" ||\n                    file.name === \".git\" ||\n                    file.name === \"build\" ||\n                    file.name === \"dist\" ||\n                    file.name === \"coverage\"\n                  ) {\n                    continue;\n                  }\n                  const found = findFileRecursive(fullPath, filename);\n                  if (found) return found;\n                } else if (file.isFile()) {\n                  // Check if filename matches (basename without extension)\n                  const fileBaseName = file.name.replace(\n                    /\\.(js|jsx|ts|tsx)$/,\n                    \"\",\n                  );\n                  if (fileBaseName === filename) {\n                    return fullPath;\n                  }\n                }\n              }\n            } catch (err) {\n              // Ignore permission errors and continue\n            }\n            return null;\n          };\n\n          // Find the file\n          let targetFile = findFileRecursive(frontendRoot, fileName);\n\n          // If still not found, default to components path with .js for new files\n          if (!targetFile) {\n            targetFile = path.resolve(\n              frontendRoot,\n              \"src/components\",\n              `${fileName}.js`,\n            );\n          }\n\n          // Security check - prevent path traversal and restrict to frontend folder\n          const normalizedTarget = path.normalize(targetFile);\n          const isInFrontend =\n            normalizedTarget.startsWith(frontendRoot) &&\n            !normalizedTarget.includes(\"..\");\n          const isNodeModules = normalizedTarget.includes(\"node_modules\");\n          const isPublic =\n            normalizedTarget.includes(\"/public/\") ||\n            normalizedTarget.endsWith(\"/public\");\n\n          if (!isInFrontend || isNodeModules || isPublic) {\n            throw new Error(`Forbidden path for file ${fileName}`);\n          }\n\n          // Verify file exists before attempting to read\n          if (!fs.existsSync(targetFile)) {\n            throw new Error(`File not found: ${targetFile}`);\n          }\n\n          // Read the current file content\n          const currentContent = fs.readFileSync(targetFile, \"utf8\");\n\n          // Parse the JSX file\n          const ast = parser.parse(currentContent, {\n            sourceType: \"module\",\n            plugins: [\"jsx\", \"typescript\"],\n          });\n\n          // Helper function to parse JSX children\n          const parseJsxChildren = (content) => {\n            if (content === undefined) {\n              return null;\n            }\n\n            const sanitizeMetaAttributes = (node) => {\n              if (t.isJSXElement(node)) {\n                node.openingElement.attributes =\n                  node.openingElement.attributes.filter((attr) => {\n                    if (\n                      t.isJSXAttribute(attr) &&\n                      t.isJSXIdentifier(attr.name)\n                    ) {\n                      return !attr.name.name.startsWith(\"x-\");\n                    }\n                    return true;\n                  });\n\n                node.children.forEach((child) =>\n                  sanitizeMetaAttributes(child),\n                );\n              } else if (t.isJSXFragment(node)) {\n                node.children.forEach((child) =>\n                  sanitizeMetaAttributes(child),\n                );\n              }\n            };\n\n            try {\n              const wrapperExpression = parser.parseExpression(\n                `(<gjs-wrapper>${content}</gjs-wrapper>)`,\n                {\n                  sourceType: \"module\",\n                  plugins: [\"jsx\", \"typescript\"],\n                },\n              );\n\n              if (t.isJSXElement(wrapperExpression)) {\n                const innerChildren = wrapperExpression.children || [];\n                innerChildren.forEach((child) =>\n                  sanitizeMetaAttributes(child),\n                );\n                return innerChildren;\n              }\n            } catch (parseError) {\n              // Fallback to treating content as raw text if parsing fails\n            }\n\n            return [t.jsxText(content)];\n          };\n\n          // Create a map of changes by line number for this file (array of changes per line)\n          const changesByLine = {};\n          fileChanges.forEach((change) => {\n            if (!changesByLine[change.lineNumber]) {\n              changesByLine[change.lineNumber] = [];\n            }\n            changesByLine[change.lineNumber].push(change);\n          });\n\n          // Traverse and update AST using line numbers\n          traverse(ast, {\n            JSXOpeningElement: (path) => {\n              const lineNumber = path.node.loc?.start.line;\n              if (!lineNumber) return;\n\n              const changesAtLine = changesByLine[lineNumber];\n              if (!changesAtLine || changesAtLine.length === 0) return;\n\n              // Verify this is the correct element by checking component type\n              const elementName = path.node.name.name;\n\n              // Process ALL changes for this line\n              changesAtLine.forEach((change) => {\n                if (elementName !== change.component) return;\n\n                // FIXED: Conditional processing based on change type\n                console.log(\n                  `[backend] Processing change type: ${change.type || \"legacy\"} for element: ${elementName}`,\n                );\n\n                if (\n                  change.type === \"className\" &&\n                  change.className !== undefined\n                ) {\n                  // CLASSNAME/TAILWIND PROCESSING\n                  console.log(\n                    `[backend] Processing className change:`,\n                    change.className,\n                  );\n\n                  // Find existing className attribute\n                  let classAttr = path.node.attributes.find(\n                    (attr) =>\n                      t.isJSXAttribute(attr) &&\n                      attr.name.name === \"className\",\n                  );\n\n                  // Capture old className value\n                  const oldClassName = classAttr?.value?.value || \"\";\n\n                  if (classAttr) {\n                    // Update existing className\n                    console.log(\n                      `[backend] Updating existing className from:`,\n                      classAttr.value?.value,\n                      \"to:\",\n                      change.className,\n                    );\n                    classAttr.value = t.stringLiteral(change.className);\n                  } else {\n                    // Create new className attribute\n                    console.log(\n                      `[backend] Creating new className attribute:`,\n                      change.className,\n                    );\n                    const newClassAttr = t.jsxAttribute(\n                      t.jsxIdentifier(\"className\"),\n                      t.stringLiteral(change.className),\n                    );\n                    path.node.attributes.push(newClassAttr);\n                  }\n\n                  // Track this edit\n                  edits.push({\n                    file: getRelativePath(targetFile),\n                    lineNumber: lineNumber,\n                    element: elementName,\n                    type: \"className\",\n                    oldData: oldClassName,\n                    newData: change.className,\n                  });\n                } else if (\n                  change.type === \"textContent\" &&\n                  (Array.isArray(change.textParts) ||\n                    change.textContent !== undefined)\n                ) {\n                  console.log(\n                    `[backend] Processing textContent change:`,\n                    change.textContent,\n                  );\n\n                  const parentElementPath = path.parentPath;\n                  if (parentElementPath && parentElementPath.isJSXElement()) {\n                    const jsxElementNode = parentElementPath.node;\n                    const children = jsxElementNode.children || [];\n\n                    const textParts = Array.isArray(change.textParts)\n                      ? change.textParts\n                      : null;\n\n                    if (textParts) {\n                      const textLikeNodes = children.filter(\n                        (child) =>\n                          t.isJSXText(child) ||\n                          (t.isJSXExpressionContainer(child) &&\n                            t.isStringLiteral(child.expression)),\n                      );\n\n                      const oldContent = textLikeNodes\n                        .map((child) => {\n                          if (t.isJSXText(child)) return child.value || \"\";\n                          if (\n                            t.isJSXExpressionContainer(child) &&\n                            t.isStringLiteral(child.expression)\n                          ) {\n                            return child.expression.value || \"\";\n                          }\n                          return \"\";\n                        })\n                        .join(\"\");\n\n                      textLikeNodes.forEach((child, index) => {\n                        const nextValue = textParts[index] ?? \"\";\n                        if (t.isJSXText(child)) {\n                          child.value = nextValue;\n                        } else if (\n                          t.isJSXExpressionContainer(child) &&\n                          t.isStringLiteral(child.expression)\n                        ) {\n                          child.expression.value = nextValue;\n                        }\n                      });\n\n                      if (textParts.length > textLikeNodes.length) {\n                        const extraNodes = textParts\n                          .slice(textLikeNodes.length)\n                          .map((part) => t.jsxText(part ?? \"\"));\n                        jsxElementNode.children = [...children, ...extraNodes];\n                      }\n\n                      edits.push({\n                        file: getRelativePath(targetFile),\n                        lineNumber: lineNumber,\n                        element: elementName,\n                        type: \"textContent\",\n                        oldData: oldContent,\n                        newData: textParts.join(\"\"),\n                      });\n                    } else {\n                      let targetTextNode = null;\n                      for (const child of children) {\n                        if (t.isJSXText(child) && child.value.trim().length > 0) {\n                          targetTextNode = child;\n                          break;\n                        }\n                      }\n\n                      const firstTextNode = targetTextNode;\n                      const fallbackWhitespaceNode = children.find(\n                        (child) => t.isJSXText(child) && child.value.trim().length === 0,\n                      );\n\n                      const newContent = change.textContent;\n                      let oldContent = \"\";\n\n                      const preserveWhitespace = (originalValue, updatedCore) => {\n                        const leadingWhitespace =\n                          (originalValue.match(/^\\s*/) || [\"\"])[0];\n                        const trailingWhitespace =\n                          (originalValue.match(/\\s*$/) || [\"\"])[0];\n                        return `${leadingWhitespace}${updatedCore}${trailingWhitespace}`;\n                      };\n\n                      if (firstTextNode) {\n                        oldContent = firstTextNode.value.trim();\n                        firstTextNode.value = preserveWhitespace(\n                          firstTextNode.value,\n                          newContent,\n                        );\n                      } else if (fallbackWhitespaceNode) {\n                        oldContent = \"\";\n                        fallbackWhitespaceNode.value = preserveWhitespace(\n                          fallbackWhitespaceNode.value,\n                          newContent,\n                        );\n                      } else {\n                        oldContent = \"\";\n                        const newTextNode = t.jsxText(newContent);\n                        jsxElementNode.children = [newTextNode, ...children];\n                      }\n\n                      edits.push({\n                        file: getRelativePath(targetFile),\n                        lineNumber: lineNumber,\n                        element: elementName,\n                        type: \"textContent\",\n                        oldData: oldContent,\n                        newData: newContent,\n                      });\n                    }\n                  }\n                } else if (\n                  change.type === \"content\" &&\n                  change.content !== undefined\n                ) {\n                  // CONTENT-ONLY PROCESSING\n                  console.log(\n                    `[backend] Processing content-only change:`,\n                    change.content.slice(0, 100),\n                  );\n\n                  const parentElementPath = path.parentPath;\n                  if (parentElementPath && parentElementPath.isJSXElement()) {\n                    // Capture old content before modifying\n                    const oldChildren = parentElementPath.node.children || [];\n                    const generate = require(\"@babel/generator\").default;\n                    const oldContentAST = {\n                      type: \"JSXFragment\",\n                      children: oldChildren,\n                    };\n                    const oldContent = generate(oldContentAST, {}, \"\")\n                      .code.replace(/^<>/, \"\")\n                      .replace(/<\\/>$/, \"\")\n                      .trim();\n\n                    const newChildren = parseJsxChildren(change.content);\n                    if (newChildren) {\n                      parentElementPath.node.children = newChildren;\n                    }\n\n                    // Track this edit\n                    edits.push({\n                      file: getRelativePath(targetFile),\n                      lineNumber: lineNumber,\n                      element: elementName,\n                      type: \"content\",\n                      oldData: oldContent,\n                      newData: change.content,\n                    });\n                  }\n                } else {\n                  // Track rejected change\n                  const reason = `Change must have valid type ('className', 'textContent', or 'content'). Received type: ${change.type || 'undefined'}`;\n                  rejectedChanges.push({\n                    change,\n                    reason,\n                    file: getRelativePath(targetFile),\n                    lineNumber: lineNumber,\n                    element: elementName,\n                  });\n\n                  // Still log for debugging\n                  console.error(`[backend] REJECTED: ${reason}`, change);\n                  console.error(\n                    `[backend] This change will be IGNORED to prevent contamination.`,\n                  );\n                }\n              });\n\n              // Mark all changes at this line as processed\n              delete changesByLine[lineNumber];\n            },\n          });\n\n          // Generate updated code\n          const { code } = generate(ast, {\n            retainLines: true,\n            retainFunctionParens: true,\n            comments: true,\n          });\n\n          // Optional: Create backup before writing\n          const backupFile = targetFile + \".backup\";\n          if (fs.existsSync(targetFile)) {\n            const originalContent = fs.readFileSync(targetFile, \"utf8\");\n            fs.writeFileSync(backupFile, originalContent, \"utf8\");\n          }\n\n          // Write the updated content\n          fs.writeFileSync(targetFile, code, \"utf8\");\n\n          // Commit changes to git with timestamp\n          const timestamp = Date.now();\n          try {\n            // Use -c flag for per-invocation git config to avoid modifying any config\n            execSync(`git -c user.name=\"visual-edit\" -c user.email=\"support@emergent.sh\" add \"${targetFile}\"`);\n            execSync(`git -c user.name=\"visual-edit\" -c user.email=\"support@emergent.sh\" commit -m \"visual_edit_${timestamp}\"`);\n          } catch (gitError) {\n            console.error(`Git commit failed: ${gitError.message}`);\n            // Continue even if git fails - file write succeeded\n          }\n\n          // Clean up backup file after successful write and commit\n          if (fs.existsSync(backupFile)) {\n            fs.unlinkSync(backupFile);\n          }\n        });\n\n        const response = { status: \"ok\", edits };\n        if (rejectedChanges.length > 0) {\n          response.rejectedChanges = rejectedChanges;\n        }\n        res.json(response);\n      } catch (err) {\n        res.status(500).json({ error: err.message });\n      }\n    });\n\n    // Add OPTIONS handler for CORS preflight\n    devServer.app.options(\"/edit-file\", (req, res) => {\n      const origin = req.get(\"Origin\");\n      if (origin && isAllowedOrigin(origin)) {\n        res.header(\"Access-Control-Allow-Origin\", origin);\n        res.header(\"Access-Control-Allow-Methods\", \"POST, OPTIONS\");\n        res.header(\"Access-Control-Allow-Headers\", \"Content-Type, x-api-key\");\n        res.sendStatus(200);\n      } else {\n        res.sendStatus(403);\n      }\n    });\n\n    return middlewares;\n  };\n  return config;\n}\n\nmodule.exports = setupDevServer;\n","path":null,"size_bytes":34570,"size_tokens":null},"memory/PRD.md":{"content":"# Chez Loman - Restaurant Website PRD\n\n## Project Overview\nSite web moderne et responsive pour le restaurant africain \"Chez Loman\" sp√©cialis√© en cuisine ivoirienne et africaine haut de gamme, situ√© √† Yopougon, Abidjan.\n\n## Original Problem Statement\nCr√©er un site web attractif pour pr√©senter le restaurant, attirer des clients, faciliter les r√©servations et commandes via WhatsApp, avec une image premium de cuisine traditionnelle.\n\n## User Personas\n1. **Clients locaux** - Habitants d'Abidjan cherchant cuisine ivoirienne de qualit√©\n2. **Familles** - Groupes cherchant un lieu convivial pour manger ensemble\n3. **Admin/Propri√©taire** - Personne g√©rant le menu du jour, photos, comptabilit√© et dashboard\n\n## Core Requirements (Static)\n- Site multipage: Accueil, Menu, √Ä propos, Galerie, Contact, Admin, Dashboard\n- Menu du jour dynamique (mise √† jour quotidienne)\n- Galerie photos g√©r√©e par admin\n- Bouton WhatsApp flottant\n- Liens r√©seaux sociaux (Facebook, TikTok)\n- Responsive mobile-first\n- SEO optimis√© pour Abidjan/Yopougon\n\n## Tech Stack\n- **Frontend**: React 19, TailwindCSS, Shadcn/UI, Framer Motion\n- **Backend**: FastAPI (Python)\n- **Database**: MongoDB\n- **AI Integration**: DeepSeek API (pour pr√©visions et insights)\n- **Fonts**: Syne (headings), Plus Jakarta Sans (body)\n- **Colors**: Vert fonc√© #1A4D3E, Or #D4AF37, Fond sombre #0F2E24\n\n## What's Been Implemented ‚úÖ\n*Date: 15 F√©vrier 2025 - Derni√®re mise √† jour*\n\n### Pages\n- [x] **Accueil** - Hero dynamique, menu du jour, plats vedettes, vid√©os, promotions\n- [x] **Menu** - Tous les plats avec filtres par cat√©gorie\n- [x] **√Ä Propos** - Histoire, valeurs, √©quipe\n- [x] **Galerie** - Photos avec filtres par cat√©gorie\n- [x] **Contact** - Horaires, adresse, WhatsApp, avis\n- [x] **Admin** - Gestion compl√®te du contenu + acc√®s au Dashboard\n- [x] **Dashboard Pro** - Comptabilit√©, KPIs, Stock, Commandes, Assistant IA\n\n### Dashboard Pro (NOUVEAU) ‚úÖ\n- [x] **Vue d'ensemble** - KPIs (revenus, b√©n√©fices, commandes, alertes), graphiques 7 jours\n- [x] **Comptabilit√©** - Revenus/d√©penses, transactions, ajout de transactions\n- [x] **Commandes** - Suivi des commandes avec statuts\n- [x] **Stock** - Gestion des stocks avec alertes niveau bas\n- [x] **R√©servations** - Liste des r√©servations\n- [x] **Assistant IA** - Insights business, pr√©visions, chat assistant (DeepSeek)\n\n### Fonctionnalit√©s\n- [x] Navigation responsive avec menu mobile\n- [x] Bouton WhatsApp flottant sur toutes les pages\n- [x] Liens Facebook et TikTok dans Hero et Footer\n- [x] Menu du jour dynamique (CRUD complet)\n- [x] Galerie photos dynamique (upload URL ou fichier)\n- [x] Vid√©os et Promotions g√©rables depuis admin\n- [x] Message d'accueil modifiable (Hero section)\n- [x] Authentification admin s√©curis√©e\n- [x] Seed data automatique\n\n### API Endpoints\n#### Site public\n- GET/POST /api/menu - Gestion des plats\n- GET/POST/PUT/DELETE /api/daily-menu - Menu du jour\n- GET/POST/DELETE /api/gallery - Photos galerie\n- GET/POST /api/reviews - Avis clients\n- GET/PUT /api/hero-content - Message d'accueil\n- GET/POST /api/videos - Vid√©os\n- GET/POST /api/promotions - Promotions\n\n#### Dashboard\n- GET /api/dashboard/stats - Statistiques KPIs\n- GET /api/dashboard/chart-data - Donn√©es graphiques\n- GET/POST/DELETE /api/transactions - Comptabilit√©\n- GET/POST/PUT /api/orders - Commandes\n- GET/PUT/DELETE /api/notifications - Notifications\n- GET/POST/PUT/DELETE /api/stock - Gestion stock\n- GET/POST/PUT/DELETE /api/reservations - R√©servations\n\n#### IA (DeepSeek)\n- POST /api/ai/insights - G√©n√©ration insights business\n- POST /api/ai/forecast - Pr√©visions de ventes\n- POST /api/ai/chat - Chat avec l'assistant IA\n- GET /api/ai/status - Statut configuration API\n\n## Prioritized Backlog\n\n### P0 (Critique) - DONE ‚úÖ\n- ‚úÖ Site fonctionnel avec toutes les pages\n- ‚úÖ Admin complet avec authentification\n- ‚úÖ Dashboard pro avec comptabilit√©\n\n### P1 (Important) - √Ä faire\n- [ ] Configurer cl√© API DeepSeek pour IA compl√®te\n- [ ] S√©curiser identifiants admin (changer mot de passe par d√©faut)\n- [ ] Ajouter lien Google Maps r√©el du restaurant\n\n### P2 (Nice to have)\n- [ ] Syst√®me de r√©servation par calendrier int√©gr√©\n- [ ] Notifications push WhatsApp pour nouvelles commandes\n- [ ] Export comptabilit√© en PDF/Excel\n- [ ] Multi-langue (fran√ßais/anglais)\n\n## Credentials\n- **Admin Username**: admin\n- **Admin Password**: chezloman2024\n- **DeepSeek API**: Non configur√©e (mode d√©mo actif)\n\n## R√©seaux sociaux\n- **Facebook**: https://www.facebook.com/profile.php?id=61574715038273\n- **TikTok**: https://www.tiktok.com/@lomanschadrac?lang=fr\n\n## Contact Info\n- **T√©l√©phone**: +225 07 09 508 819\n- **WhatsApp**: 2250709508819\n- **Adresse**: Yopougon Abobo Doum√© ‚Äî Basile Boli, Abidjan\n- **Horaires**: Mar-Sam 11h-22h, Dim 13h-22h, Lun Ferm√©\n\n## Credits\nPowered by AI'vory / Armando Anzan\n","path":null,"size_bytes":4876,"size_tokens":null},"frontend/plugins/health-check/health-endpoints.js":{"content":"// health-endpoints.js\n// API endpoints for health checks and monitoring\n\nconst os = require('os');\n\nconst SERVER_START_TIME = Date.now();\n\n/**\n * Setup health check endpoints on the dev server\n * @param {Object} devServer - Webpack dev server instance\n * @param {Object} healthPlugin - Instance of WebpackHealthPlugin\n */\nfunction setupHealthEndpoints(devServer, healthPlugin) {\n  if (!devServer || !devServer.app) {\n    console.warn('[Health Check] Dev server not available, skipping health endpoints');\n    return;\n  }\n\n  if (!healthPlugin) {\n    console.warn('[Health Check] Health plugin not provided, skipping health endpoints');\n    return;\n  }\n\n  console.log('[Health Check] Setting up health endpoints...');\n\n  // ====================================================================\n  // GET /health - Detailed health status (JSON)\n  // ====================================================================\n  devServer.app.get(\"/health\", (req, res) => {\n    const webpackStatus = healthPlugin.getStatus();\n    const uptime = Date.now() - SERVER_START_TIME;\n    const memUsage = process.memoryUsage();\n\n    res.json({\n      status: webpackStatus.isHealthy ? 'healthy' : 'unhealthy',\n      timestamp: new Date().toISOString(),\n      uptime: {\n        seconds: Math.floor(uptime / 1000),\n        formatted: formatDuration(uptime),\n      },\n      webpack: {\n        state: webpackStatus.state,\n        isHealthy: webpackStatus.isHealthy,\n        hasCompiled: webpackStatus.hasCompiled,\n        errors: webpackStatus.errorCount,\n        warnings: webpackStatus.warningCount,\n        lastCompileTime: webpackStatus.lastCompileTime\n          ? new Date(webpackStatus.lastCompileTime).toISOString()\n          : null,\n        lastSuccessTime: webpackStatus.lastSuccessTime\n          ? new Date(webpackStatus.lastSuccessTime).toISOString()\n          : null,\n        compileDuration: webpackStatus.compileDuration\n          ? `${webpackStatus.compileDuration}ms`\n          : null,\n        totalCompiles: webpackStatus.totalCompiles,\n        firstCompileTime: webpackStatus.firstCompileTime\n          ? new Date(webpackStatus.firstCompileTime).toISOString()\n          : null,\n      },\n      server: {\n        nodeVersion: process.version,\n        platform: os.platform(),\n        arch: os.arch(),\n        cpus: os.cpus().length,\n        memory: {\n          heapUsed: formatBytes(memUsage.heapUsed),\n          heapTotal: formatBytes(memUsage.heapTotal),\n          rss: formatBytes(memUsage.rss),\n          external: formatBytes(memUsage.external),\n        },\n        systemMemory: {\n          total: formatBytes(os.totalmem()),\n          free: formatBytes(os.freemem()),\n          used: formatBytes(os.totalmem() - os.freemem()),\n        },\n      },\n      environment: process.env.NODE_ENV || 'development',\n    });\n  });\n\n  // ====================================================================\n  // GET /health/simple - Simple text response (OK/COMPILING/ERROR)\n  // ====================================================================\n  devServer.app.get(\"/health/simple\", (req, res) => {\n    const webpackStatus = healthPlugin.getSimpleStatus();\n\n    if (webpackStatus.state === 'success') {\n      res.status(200).send('OK');\n    } else if (webpackStatus.state === 'compiling') {\n      res.status(200).send('COMPILING');\n    } else if (webpackStatus.state === 'idle') {\n      res.status(200).send('IDLE');\n    } else {\n      res.status(503).send('ERROR');\n    }\n  });\n\n  // ====================================================================\n  // GET /health/ready - Readiness check (Kubernetes/load balancer)\n  // ====================================================================\n  devServer.app.get(\"/health/ready\", (req, res) => {\n    const webpackStatus = healthPlugin.getSimpleStatus();\n\n    if (webpackStatus.state === 'success') {\n      res.status(200).json({\n        ready: true,\n        state: webpackStatus.state,\n      });\n    } else {\n      res.status(503).json({\n        ready: false,\n        state: webpackStatus.state,\n        reason: webpackStatus.state === 'compiling'\n          ? 'Compilation in progress'\n          : 'Compilation failed',\n      });\n    }\n  });\n\n  // ====================================================================\n  // GET /health/live - Liveness check (Kubernetes)\n  // ====================================================================\n  devServer.app.get(\"/health/live\", (req, res) => {\n    res.status(200).json({\n      alive: true,\n      timestamp: new Date().toISOString(),\n    });\n  });\n\n  // ====================================================================\n  // GET /health/errors - Get current errors and warnings\n  // ====================================================================\n  devServer.app.get(\"/health/errors\", (req, res) => {\n    const webpackStatus = healthPlugin.getStatus();\n\n    res.json({\n      errorCount: webpackStatus.errorCount,\n      warningCount: webpackStatus.warningCount,\n      errors: webpackStatus.errors,\n      warnings: webpackStatus.warnings,\n      state: webpackStatus.state,\n    });\n  });\n\n  // ====================================================================\n  // GET /health/stats - Compilation statistics\n  // ====================================================================\n  devServer.app.get(\"/health/stats\", (req, res) => {\n    const webpackStatus = healthPlugin.getStatus();\n    const uptime = Date.now() - SERVER_START_TIME;\n\n    res.json({\n      totalCompiles: webpackStatus.totalCompiles,\n      averageCompileTime: webpackStatus.totalCompiles > 0\n        ? `${Math.round(uptime / webpackStatus.totalCompiles)}ms`\n        : null,\n      lastCompileDuration: webpackStatus.compileDuration\n        ? `${webpackStatus.compileDuration}ms`\n        : null,\n      firstCompileTime: webpackStatus.firstCompileTime\n        ? new Date(webpackStatus.firstCompileTime).toISOString()\n        : null,\n      serverUptime: formatDuration(uptime),\n    });\n  });\n\n  console.log('[Health Check] ‚úì Health endpoints ready:');\n  console.log('  ‚Ä¢ GET /health         - Detailed status');\n  console.log('  ‚Ä¢ GET /health/simple  - Simple OK/ERROR');\n  console.log('  ‚Ä¢ GET /health/ready   - Readiness check');\n  console.log('  ‚Ä¢ GET /health/live    - Liveness check');\n  console.log('  ‚Ä¢ GET /health/errors  - Error details');\n  console.log('  ‚Ä¢ GET /health/stats   - Statistics');\n}\n\n// ====================================================================\n// Helper Functions\n// ====================================================================\n\n/**\n * Format bytes to human-readable string\n * @param {number} bytes\n * @returns {string}\n */\nfunction formatBytes(bytes) {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n}\n\n/**\n * Format duration to human-readable string\n * @param {number} ms - Duration in milliseconds\n * @returns {string}\n */\nfunction formatDuration(ms) {\n  const seconds = Math.floor(ms / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n\n  if (hours > 0) {\n    return `${hours}h ${minutes % 60}m ${seconds % 60}s`;\n  } else if (minutes > 0) {\n    return `${minutes}m ${seconds % 60}s`;\n  } else {\n    return `${seconds}s`;\n  }\n}\n\nmodule.exports = setupHealthEndpoints;\n","path":null,"size_bytes":7412,"size_tokens":null},"frontend/plugins/health-check/webpack-health-plugin.js":{"content":"// webpack-health-plugin.js\n// Webpack plugin that tracks compilation state and health metrics\n\nclass WebpackHealthPlugin {\n  constructor() {\n    this.status = {\n      state: 'idle',           // idle, compiling, success, failed\n      errors: [],\n      warnings: [],\n      lastCompileTime: null,\n      lastSuccessTime: null,\n      compileDuration: 0,\n      totalCompiles: 0,\n      firstCompileTime: null,\n    };\n  }\n\n  apply(compiler) {\n    const pluginName = 'WebpackHealthPlugin';\n\n    // Hook: Compilation started\n    compiler.hooks.compile.tap(pluginName, () => {\n      const now = Date.now();\n      this.status.state = 'compiling';\n      this.status.lastCompileTime = now;\n\n      if (!this.status.firstCompileTime) {\n        this.status.firstCompileTime = now;\n      }\n    });\n\n    // Hook: Compilation completed\n    compiler.hooks.done.tap(pluginName, (stats) => {\n      const info = stats.toJson({\n        all: false,\n        errors: true,\n        warnings: true,\n      });\n\n      this.status.totalCompiles++;\n      this.status.compileDuration = Date.now() - this.status.lastCompileTime;\n\n      if (stats.hasErrors()) {\n        this.status.state = 'failed';\n        this.status.errors = info.errors.map(err => ({\n          message: err.message || String(err),\n          stack: err.stack,\n          moduleName: err.moduleName,\n          loc: err.loc,\n        }));\n      } else {\n        this.status.state = 'success';\n        this.status.lastSuccessTime = Date.now();\n        this.status.errors = [];\n      }\n\n      if (stats.hasWarnings()) {\n        this.status.warnings = info.warnings.map(warn => ({\n          message: warn.message || String(warn),\n          moduleName: warn.moduleName,\n          loc: warn.loc,\n        }));\n      } else {\n        this.status.warnings = [];\n      }\n    });\n\n    // Hook: Compilation failed\n    compiler.hooks.failed.tap(pluginName, (error) => {\n      this.status.state = 'failed';\n      this.status.errors = [{\n        message: error.message,\n        stack: error.stack,\n      }];\n      this.status.compileDuration = Date.now() - this.status.lastCompileTime;\n    });\n\n    // Hook: Invalid (file changed, recompiling)\n    compiler.hooks.invalid.tap(pluginName, () => {\n      this.status.state = 'compiling';\n    });\n  }\n\n  getStatus() {\n    return {\n      ...this.status,\n      // Add computed fields\n      isHealthy: this.status.state === 'success',\n      errorCount: this.status.errors.length,\n      warningCount: this.status.warnings.length,\n      hasCompiled: this.status.totalCompiles > 0,\n    };\n  }\n\n  // Get simplified status for quick checks\n  getSimpleStatus() {\n    return {\n      state: this.status.state,\n      isHealthy: this.status.state === 'success',\n      errorCount: this.status.errors.length,\n      warningCount: this.status.warnings.length,\n    };\n  }\n\n  // Reset statistics (useful for testing)\n  reset() {\n    this.status = {\n      state: 'idle',\n      errors: [],\n      warnings: [],\n      lastCompileTime: null,\n      lastSuccessTime: null,\n      compileDuration: 0,\n      totalCompiles: 0,\n      firstCompileTime: null,\n    };\n  }\n}\n\nmodule.exports = WebpackHealthPlugin;\n","path":null,"size_bytes":3141,"size_tokens":null},"frontend/craco.config.js":{"content":"// craco.config.js\nconst path = require(\"path\");\nrequire(\"dotenv\").config();\n\n// Check if we're in development/preview mode (not production build)\n// Craco sets NODE_ENV=development for start, NODE_ENV=production for build\nconst isDevServer = process.env.NODE_ENV !== \"production\";\n\n// Environment variable overrides\nconst config = {\n  enableHealthCheck: process.env.ENABLE_HEALTH_CHECK === \"true\",\n  enableVisualEdits: isDevServer, // Only enable during dev server\n};\n\n// Conditionally load visual edits modules only in dev mode\nlet setupDevServer;\nlet babelMetadataPlugin;\n\nif (config.enableVisualEdits) {\n  setupDevServer = require(\"./plugins/visual-edits/dev-server-setup\");\n  babelMetadataPlugin = require(\"./plugins/visual-edits/babel-metadata-plugin\");\n}\n\n// Conditionally load health check modules only if enabled\nlet WebpackHealthPlugin;\nlet setupHealthEndpoints;\nlet healthPluginInstance;\n\nif (config.enableHealthCheck) {\n  WebpackHealthPlugin = require(\"./plugins/health-check/webpack-health-plugin\");\n  setupHealthEndpoints = require(\"./plugins/health-check/health-endpoints\");\n  healthPluginInstance = new WebpackHealthPlugin();\n}\n\nconst webpackConfig = {\n  eslint: {\n    configure: {\n      extends: [\"plugin:react-hooks/recommended\"],\n      rules: {\n        \"react-hooks/rules-of-hooks\": \"error\",\n        \"react-hooks/exhaustive-deps\": \"warn\",\n      },\n    },\n  },\n  webpack: {\n    alias: {\n      '@': path.resolve(__dirname, 'src'),\n    },\n    configure: (webpackConfig) => {\n\n      // Add ignored patterns to reduce watched directories\n        webpackConfig.watchOptions = {\n          ...webpackConfig.watchOptions,\n          ignored: [\n            '**/node_modules/**',\n            '**/.git/**',\n            '**/build/**',\n            '**/dist/**',\n            '**/coverage/**',\n            '**/public/**',\n        ],\n      };\n\n      // Add health check plugin to webpack if enabled\n      if (config.enableHealthCheck && healthPluginInstance) {\n        webpackConfig.plugins.push(healthPluginInstance);\n      }\n      return webpackConfig;\n    },\n  },\n};\n\n// Only add babel metadata plugin during dev server\nif (config.enableVisualEdits && babelMetadataPlugin) {\n  webpackConfig.babel = {\n    plugins: [babelMetadataPlugin],\n  };\n}\n\nwebpackConfig.devServer = (devServerConfig) => {\n  devServerConfig.allowedHosts = \"all\";\n  devServerConfig.host = \"0.0.0.0\";\n  devServerConfig.port = 5000;\n\n  // Apply visual edits dev server setup only if enabled\n  if (config.enableVisualEdits && setupDevServer) {\n    devServerConfig = setupDevServer(devServerConfig);\n  }\n\n  // Add health check endpoints if enabled\n  if (config.enableHealthCheck && setupHealthEndpoints && healthPluginInstance) {\n    const originalSetupMiddlewares = devServerConfig.setupMiddlewares;\n\n    devServerConfig.setupMiddlewares = (middlewares, devServer) => {\n      // Call original setup if exists\n      if (originalSetupMiddlewares) {\n        middlewares = originalSetupMiddlewares(middlewares, devServer);\n      }\n\n      // Setup health endpoints\n      setupHealthEndpoints(devServer, healthPluginInstance);\n\n      return middlewares;\n    };\n  }\n\n  return devServerConfig;\n};\n\nmodule.exports = webpackConfig;\n","path":null,"size_bytes":3193,"size_tokens":null},"frontend/src/hooks/use-toast.js":{"content":"\"use client\";\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\"\n}\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString();\n}\n\nconst toastTimeouts = new Map()\n\nconst addToRemoveQueue = (toastId) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t),\n      };\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t),\n      };\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      };\n  }\n}\n\nconst listeners = []\n\nlet memoryState = { toasts: [] }\n\nfunction dispatch(action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\nfunction toast({\n  ...props\n}) {\n  const id = genId()\n\n  const update = (props) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    };\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  };\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3085,"size_tokens":null},"frontend/postcss.config.js":{"content":"module.exports = {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":82,"size_tokens":null},"frontend/src/index.js":{"content":"import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"@/index.css\";\nimport App from \"@/App\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n);\n","path":null,"size_bytes":255,"size_tokens":null},"render.yaml":{"content":"services:\n  - type: web\n    name: chez-loman\n    runtime: python\n    buildCommand: pip install -r backend/requirements.txt && cd frontend && npm install && npm run build\n    startCommand: uvicorn backend.server:app --host 0.0.0.0 --port $PORT\n    envVars:\n      - key: PYTHON_VERSION\n        value: 3.11.11\n      - key: NODE_VERSION\n        value: 20.18.0\n      - key: DB_NAME\n        value: chezloman\n      - key: MONGO_URL\n        sync: false\n","path":null,"size_bytes":445,"size_tokens":null},"frontend/src/components/ui/dropdown-menu.jsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}>\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props} />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props} />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props} />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}>\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}>\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", inset && \"pl-8\", className)}\n    {...props} />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props} />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props} />\n  );\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":6345,"size_tokens":null},"frontend/src/components/ui/form.jsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { Controller, FormProvider, useFormContext } from \"react-hook-form\";\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\nconst FormFieldContext = React.createContext({})\n\nconst FormField = (\n  {\n    ...props\n  }\n) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\nconst FormItemContext = React.createContext({})\n\nconst FormItem = React.forwardRef(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  );\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props} />\n  );\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props} />\n  );\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props} />\n  );\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}>\n      {body}\n    </p>\n  );\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":3121,"size_tokens":null},"frontend/README.md":{"content":"# Getting Started with Create React App\n\nThis project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).\n\n## Available Scripts\n\nIn the project directory, you can run:\n\n### `npm start`\n\nRuns the app in the development mode.\\\nOpen [http://localhost:3000](http://localhost:3000) to view it in your browser.\n\nThe page will reload when you make changes.\\\nYou may also see any lint errors in the console.\n\n### `npm test`\n\nLaunches the test runner in the interactive watch mode.\\\nSee the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.\n\n### `npm run build`\n\nBuilds the app for production to the `build` folder.\\\nIt correctly bundles React in production mode and optimizes the build for the best performance.\n\nThe build is minified and the filenames include the hashes.\\\nYour app is ready to be deployed!\n\nSee the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.\n\n### `npm run eject`\n\n**Note: this is a one-way operation. Once you `eject`, you can't go back!**\n\nIf you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.\n\nInstead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.\n\nYou don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.\n\n## Learn More\n\nYou can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).\n\nTo learn React, check out the [React documentation](https://reactjs.org/).\n\n### Code Splitting\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)\n\n### Analyzing the Bundle Size\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)\n\n### Making a Progressive Web App\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)\n\n### Advanced Configuration\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)\n\n### Deployment\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)\n\n### `npm run build` fails to minify\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)\n","path":null,"size_bytes":3359,"size_tokens":null},"frontend/src/pages/ContactPage.jsx":{"content":"import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { API } from \"../App\";\nimport { Button } from \"../components/ui/button\";\nimport StarRating from \"../components/StarRating\";\nimport { motion } from \"framer-motion\";\nimport { MapPin, Phone, Clock, MessageCircle } from \"lucide-react\";\n\nconst ContactPage = () => {\n  const [reviews, setReviews] = useState([]);\n\n  const hours = {\n    dimanche: \"13:00 ‚Äì 22:00\",\n    lundi: \"Ferm√©\",\n    mardi: \"11:00 ‚Äì 22:00\",\n    mercredi: \"11:00 ‚Äì 22:00\",\n    jeudi: \"11:00 ‚Äì 22:00\",\n    vendredi: \"11:00 ‚Äì 22:00\",\n    samedi: \"11:00 ‚Äì 22:00\"\n  };\n\n  const daysOrder = [\"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\", \"dimanche\"];\n\n  useEffect(() => {\n    const fetchReviews = async () => {\n      try {\n        const response = await axios.get(`${API}/reviews`);\n        setReviews(response.data);\n      } catch (error) {\n        console.error(\"Error fetching reviews:\", error);\n      }\n    };\n    fetchReviews();\n  }, []);\n\n  const today = new Date().toLocaleDateString('fr-FR', { weekday: 'long' }).toLowerCase();\n\n  return (\n    <div className=\"min-h-screen bg-[#05100D] pt-32 pb-24\" data-testid=\"contact-page\">\n      {/* Header */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 mb-16\">\n        <motion.div \n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.8 }}\n          className=\"max-w-2xl\"\n        >\n          <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n            Contactez-nous\n          </span>\n          <h1 className=\"text-5xl md:text-6xl text-[#F9F7F2] mb-4\">\n            R√©servation & Contact\n          </h1>\n          <div className=\"divider-gold mb-6\"></div>\n          <p className=\"text-lg text-[#A3B1AD] leading-relaxed\">\n            Nous sommes √† votre disposition pour toute question ou r√©servation\n          </p>\n        </motion.div>\n      </div>\n\n      {/* Contact Grid */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-20\">\n          {/* Contact Info */}\n          <div className=\"space-y-8\">\n            {/* Quick Actions */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <motion.a\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.5 }}\n                href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite passer une commande\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"flex items-center gap-4 p-6 rounded-2xl bg-[#25D366]/20 border border-[#25D366]/30 hover:bg-[#25D366]/30 transition-colors group\"\n              >\n                <MessageCircle className=\"text-[#25D366]\" size={28} />\n                <div>\n                  <p className=\"text-[#F9F7F2] font-semibold\">WhatsApp</p>\n                  <p className=\"text-[#A3B1AD] text-sm\">Commander rapidement</p>\n                </div>\n              </motion.a>\n              \n              <motion.a\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.5, delay: 0.1 }}\n                href=\"tel:+2250709508819\"\n                className=\"flex items-center gap-4 p-6 rounded-2xl bg-[#D4AF37]/10 border border-[#D4AF37]/30 hover:bg-[#D4AF37]/20 transition-colors group\"\n              >\n                <Phone className=\"text-[#D4AF37]\" size={28} />\n                <div>\n                  <p className=\"text-[#F9F7F2] font-semibold\">Appeler</p>\n                  <p className=\"text-[#A3B1AD] text-sm\">07 09 508 819</p>\n                </div>\n              </motion.a>\n            </div>\n\n            {/* Address */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.5, delay: 0.2 }}\n              className=\"luxury-card p-8 rounded-2xl\"\n            >\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-12 h-12 rounded-full border border-[#D4AF37]/30 flex items-center justify-center flex-shrink-0\">\n                  <MapPin className=\"text-[#D4AF37]\" size={20} />\n                </div>\n                <div>\n                  <h3 className=\"text-[#F9F7F2] font-semibold mb-2\">Adresse</h3>\n                  <p className=\"text-[#A3B1AD] leading-relaxed\">\n                    Yopougon Abobo Doum√© ‚Äî Basile Boli<br/>\n                    Abidjan, C√¥te d'Ivoire\n                  </p>\n                </div>\n              </div>\n            </motion.div>\n\n            {/* Hours */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.5, delay: 0.3 }}\n              className=\"luxury-card p-8 rounded-2xl\"\n            >\n              <div className=\"flex items-start gap-4 mb-6\">\n                <div className=\"w-12 h-12 rounded-full border border-[#D4AF37]/30 flex items-center justify-center flex-shrink-0\">\n                  <Clock className=\"text-[#D4AF37]\" size={20} />\n                </div>\n                <h3 className=\"text-[#F9F7F2] font-semibold mt-3\">Horaires d'Ouverture</h3>\n              </div>\n              <div className=\"space-y-2\">\n                {daysOrder.map((day) => (\n                  <div \n                    key={day} \n                    className={`flex justify-between items-center py-3 px-4 rounded-lg ${\n                      day === today \n                        ? \"bg-[#D4AF37] text-[#0F2E24]\" \n                        : hours[day] === \"Ferm√©\" \n                          ? \"bg-white/5 text-[#A3B1AD]\"\n                          : \"bg-white/5\"\n                    }`}\n                  >\n                    <span className=\"capitalize font-medium\">{day}</span>\n                    <span className={hours[day] === \"Ferm√©\" ? \"text-red-400\" : day === today ? \"\" : \"text-[#F9F7F2]\"}>\n                      {hours[day]}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </motion.div>\n          </div>\n\n          {/* Map & CTA */}\n          <div className=\"space-y-8\">\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.5, delay: 0.4 }}\n              className=\"h-[400px] rounded-2xl overflow-hidden border border-white/10\"\n            >\n              <iframe\n                src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3972.5097839068377!2d-4.0917!3d5.3364!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNcKwMjAnMTEuMCJOIDTCsDA1JzMwLjEiVw!5e0!3m2!1sfr!2sci!4v1234567890\"\n                width=\"100%\"\n                height=\"100%\"\n                style={{ border: 0, filter: 'grayscale(100%) invert(90%) contrast(90%)' }}\n                allowFullScreen=\"\"\n                loading=\"lazy\"\n                referrerPolicy=\"no-referrer-when-downgrade\"\n                title=\"Chez Loman Location\"\n                data-testid=\"google-map\"\n              ></iframe>\n            </motion.div>\n\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.5, delay: 0.5 }}\n              className=\"glass p-8 rounded-2xl gold-border text-center\"\n            >\n              <h3 className=\"text-2xl text-[#F9F7F2] mb-4\">\n                R√©servez Votre Table\n              </h3>\n              <p className=\"text-[#A3B1AD] mb-6\">\n                Pour les grands groupes ou √©v√©nements sp√©ciaux, contactez-nous √† l'avance\n              </p>\n              <a\n                href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite r√©server une table pour [nombre] personnes le [date]\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <Button className=\"btn-gold w-full\">\n                  R√©server sur WhatsApp\n                </Button>\n              </a>\n            </motion.div>\n          </div>\n        </div>\n\n        {/* Reviews Section */}\n        <div>\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8 }}\n            className=\"text-center mb-12\"\n          >\n            <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n              Avis Clients\n            </span>\n            <h2 className=\"text-3xl md:text-4xl text-[#F9F7F2]\">\n              Ce Que Disent Nos Clients\n            </h2>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {reviews.map((review, index) => (\n              <motion.div\n                key={review.id}\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.6, delay: index * 0.1 }}\n                className=\"luxury-card p-8 rounded-2xl\"\n              >\n                <StarRating rating={review.rating} />\n                <p className=\"text-[#F9F7F2]/80 mt-6 mb-8 font-accent italic text-lg leading-relaxed\">\n                  \"{review.comment}\"\n                </p>\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-[#1A4D3E] flex items-center justify-center text-[#D4AF37] font-semibold\">\n                    {review.author.charAt(0)}\n                  </div>\n                  <span className=\"text-[#F9F7F2] font-medium\">{review.author}</span>\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ContactPage;\n","path":null,"size_bytes":10057,"size_tokens":null},"frontend/src/components/ui/button.jsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Button = React.forwardRef(({ className, variant, size, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n  return (\n    <Comp\n      className={cn(buttonVariants({ variant, size, className }))}\n      ref={ref}\n      {...props} />\n  );\n})\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":1662,"size_tokens":null},"backend_test.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nBackend API Testing for Chez Loman Restaurant Website\nTests all API endpoints for functionality and data integrity\n\"\"\"\n\nimport requests\nimport sys\nimport json\nfrom datetime import datetime, timedelta\nfrom typing import Dict, List, Any\n\nclass ChezLomanAPITester:\n    def __init__(self, base_url=\"https://loman-restaurant.preview.emergentagent.com\"):\n        self.base_url = base_url\n        self.api_url = f\"{base_url}/api\"\n        self.tests_run = 0\n        self.tests_passed = 0\n        self.test_results = []\n\n    def log_test(self, name: str, success: bool, details: str = \"\"):\n        \"\"\"Log test result\"\"\"\n        self.tests_run += 1\n        if success:\n            self.tests_passed += 1\n            print(f\"‚úÖ {name}: PASSED\")\n        else:\n            print(f\"‚ùå {name}: FAILED - {details}\")\n        \n        self.test_results.append({\n            \"test\": name,\n            \"success\": success,\n            \"details\": details\n        })\n\n    def make_request(self, method: str, endpoint: str, data: Dict = None) -> tuple:\n        \"\"\"Make HTTP request and return (success, response_data, status_code)\"\"\"\n        url = f\"{self.api_url}/{endpoint}\"\n        headers = {'Content-Type': 'application/json'}\n        \n        try:\n            if method == 'GET':\n                response = requests.get(url, headers=headers, timeout=10)\n            elif method == 'POST':\n                response = requests.post(url, json=data, headers=headers, timeout=10)\n            elif method == 'PUT':\n                response = requests.put(url, json=data, headers=headers, timeout=10)\n            elif method == 'DELETE':\n                response = requests.delete(url, headers=headers, timeout=10)\n            else:\n                return False, {}, 0\n            \n            try:\n                response_data = response.json()\n            except:\n                response_data = {\"text\": response.text}\n            \n            return response.status_code < 400, response_data, response.status_code\n            \n        except requests.exceptions.RequestException as e:\n            return False, {\"error\": str(e)}, 0\n\n    def test_root_endpoint(self):\n        \"\"\"Test API root endpoint\"\"\"\n        success, data, status = self.make_request('GET', '')\n        expected_message = \"Bienvenue chez Loman API\"\n        \n        if success and data.get('message') == expected_message:\n            self.log_test(\"API Root Endpoint\", True)\n            return True\n        else:\n            self.log_test(\"API Root Endpoint\", False, f\"Status: {status}, Data: {data}\")\n            return False\n\n    def test_restaurant_info(self):\n        \"\"\"Test restaurant info endpoint\"\"\"\n        success, data, status = self.make_request('GET', 'info')\n        \n        if success and data.get('name') == \"Chez Loman\":\n            self.log_test(\"Restaurant Info\", True)\n            return True\n        else:\n            self.log_test(\"Restaurant Info\", False, f\"Status: {status}, Data: {data}\")\n            return False\n\n    def test_seed_data(self):\n        \"\"\"Test seed data endpoint\"\"\"\n        success, data, status = self.make_request('POST', 'seed')\n        \n        if success and (\"seeded\" in data.get('message', '').lower() or \"already\" in data.get('message', '').lower()):\n            self.log_test(\"Seed Data\", True)\n            return True\n        else:\n            self.log_test(\"Seed Data\", False, f\"Status: {status}, Data: {data}\")\n            return False\n\n    def test_menu_endpoints(self):\n        \"\"\"Test menu-related endpoints\"\"\"\n        # Test get all menu items\n        success, data, status = self.make_request('GET', 'menu')\n        if not success or not isinstance(data, list):\n            self.log_test(\"Get All Menu Items\", False, f\"Status: {status}, Data: {data}\")\n            return False\n        \n        self.log_test(\"Get All Menu Items\", True, f\"Found {len(data)} items\")\n        \n        # Test get featured items\n        success, data, status = self.make_request('GET', 'menu/featured')\n        if success and isinstance(data, list):\n            self.log_test(\"Get Featured Menu Items\", True, f\"Found {len(data)} featured items\")\n        else:\n            self.log_test(\"Get Featured Menu Items\", False, f\"Status: {status}\")\n        \n        # Test category filtering\n        categories = [\"Plats Ivoiriens\", \"Grillades\", \"Sp√©cialit√©s\", \"Boissons\"]\n        for category in categories:\n            success, data, status = self.make_request('GET', f'menu?category={category}')\n            if success and isinstance(data, list):\n                self.log_test(f\"Menu Category Filter: {category}\", True, f\"Found {len(data)} items\")\n            else:\n                self.log_test(f\"Menu Category Filter: {category}\", False, f\"Status: {status}\")\n\n        return True\n\n    def test_daily_menu_endpoints(self):\n        \"\"\"Test daily menu endpoints\"\"\"\n        # Test get current daily menu\n        success, data, status = self.make_request('GET', 'daily-menu')\n        if success:\n            self.log_test(\"Get Current Daily Menu\", True)\n        else:\n            self.log_test(\"Get Current Daily Menu\", False, f\"Status: {status}, Data: {data}\")\n        \n        # Test get all daily menus\n        success, data, status = self.make_request('GET', 'daily-menus')\n        if success and isinstance(data, list):\n            self.log_test(\"Get All Daily Menus\", True, f\"Found {len(data)} menus\")\n        else:\n            self.log_test(\"Get All Daily Menus\", False, f\"Status: {status}\")\n        \n        # Test create daily menu\n        tomorrow = (datetime.now() + timedelta(days=1)).strftime(\"%Y-%m-%d\")\n        test_menu = {\n            \"date\": tomorrow,\n            \"items\": [\n                \"Test Atti√®k√® Poisson - 3500 FCFA\",\n                \"Test Foutou Sauce - 3000 FCFA\"\n            ],\n            \"special_message\": \"Test menu cr√©√© par l'API\"\n        }\n        \n        success, data, status = self.make_request('POST', 'daily-menu', test_menu)\n        if success and data.get('id'):\n            menu_id = data['id']\n            self.log_test(\"Create Daily Menu\", True, f\"Created menu ID: {menu_id}\")\n            \n            # Test delete the created menu\n            success, data, status = self.make_request('DELETE', f'daily-menu/{menu_id}')\n            if success:\n                self.log_test(\"Delete Daily Menu\", True)\n            else:\n                self.log_test(\"Delete Daily Menu\", False, f\"Status: {status}\")\n        else:\n            self.log_test(\"Create Daily Menu\", False, f\"Status: {status}, Data: {data}\")\n\n        return True\n\n    def test_gallery_endpoints(self):\n        \"\"\"Test gallery endpoints\"\"\"\n        # Test get all gallery photos\n        success, data, status = self.make_request('GET', 'gallery')\n        if success and isinstance(data, list):\n            self.log_test(\"Get All Gallery Photos\", True, f\"Found {len(data)} photos\")\n        else:\n            self.log_test(\"Get All Gallery Photos\", False, f\"Status: {status}\")\n            return False\n        \n        # Test category filtering\n        categories = [\"restaurant\", \"plats\", \"clients\", \"ambiance\"]\n        for category in categories:\n            success, data, status = self.make_request('GET', f'gallery?category={category}')\n            if success and isinstance(data, list):\n                self.log_test(f\"Gallery Category Filter: {category}\", True, f\"Found {len(data)} photos\")\n            else:\n                self.log_test(f\"Gallery Category Filter: {category}\", False, f\"Status: {status}\")\n        \n        # Test add photo\n        test_photo = {\n            \"image_url\": \"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400\",\n            \"caption\": \"Test photo from API\",\n            \"category\": \"restaurant\"\n        }\n        \n        success, data, status = self.make_request('POST', 'gallery', test_photo)\n        if success and data.get('id'):\n            photo_id = data['id']\n            self.log_test(\"Add Gallery Photo\", True, f\"Created photo ID: {photo_id}\")\n            \n            # Test delete the created photo\n            success, data, status = self.make_request('DELETE', f'gallery/{photo_id}')\n            if success:\n                self.log_test(\"Delete Gallery Photo\", True)\n            else:\n                self.log_test(\"Delete Gallery Photo\", False, f\"Status: {status}\")\n        else:\n            self.log_test(\"Add Gallery Photo\", False, f\"Status: {status}, Data: {data}\")\n\n        return True\n\n    def test_reviews_endpoints(self):\n        \"\"\"Test reviews endpoints\"\"\"\n        # Test get all reviews\n        success, data, status = self.make_request('GET', 'reviews')\n        if success and isinstance(data, list):\n            self.log_test(\"Get All Reviews\", True, f\"Found {len(data)} reviews\")\n        else:\n            self.log_test(\"Get All Reviews\", False, f\"Status: {status}\")\n            return False\n        \n        # Test create review\n        test_review = {\n            \"author\": \"Test User API\",\n            \"rating\": 5,\n            \"comment\": \"Excellent test review from API testing!\"\n        }\n        \n        success, data, status = self.make_request('POST', 'reviews', test_review)\n        if success and data.get('id'):\n            self.log_test(\"Create Review\", True, f\"Created review ID: {data['id']}\")\n        else:\n            self.log_test(\"Create Review\", False, f\"Status: {status}, Data: {data}\")\n\n        return True\n\n    def test_videos_endpoints(self):\n        \"\"\"Test videos endpoints\"\"\"\n        # Test get all videos\n        success, data, status = self.make_request('GET', 'videos')\n        if success and isinstance(data, list):\n            self.log_test(\"Get All Videos\", True, f\"Found {len(data)} videos\")\n        else:\n            self.log_test(\"Get All Videos\", False, f\"Status: {status}\")\n            return False\n        \n        # Test get active videos only\n        success, data, status = self.make_request('GET', 'videos?active_only=true')\n        if success and isinstance(data, list):\n            self.log_test(\"Get Active Videos Only\", True, f\"Found {len(data)} active videos\")\n        else:\n            self.log_test(\"Get Active Videos Only\", False, f\"Status: {status}\")\n        \n        # Test create video\n        test_video = {\n            \"title\": \"Test Video from API\",\n            \"video_url\": \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n            \"video_type\": \"youtube\",\n            \"description\": \"Test video created by API testing\"\n        }\n        \n        success, data, status = self.make_request('POST', 'videos', test_video)\n        if success and data.get('id'):\n            video_id = data['id']\n            self.log_test(\"Create Video\", True, f\"Created video ID: {video_id}\")\n            \n            # Test update video (toggle active status)\n            success, data, status = self.make_request('PUT', f'videos/{video_id}?is_active=false')\n            if success:\n                self.log_test(\"Update Video Status\", True)\n            else:\n                self.log_test(\"Update Video Status\", False, f\"Status: {status}\")\n            \n            # Test delete the created video\n            success, data, status = self.make_request('DELETE', f'videos/{video_id}')\n            if success:\n                self.log_test(\"Delete Video\", True)\n            else:\n                self.log_test(\"Delete Video\", False, f\"Status: {status}\")\n        else:\n            self.log_test(\"Create Video\", False, f\"Status: {status}, Data: {data}\")\n\n        return True\n\n    def test_promotions_endpoints(self):\n        \"\"\"Test promotions endpoints\"\"\"\n        # Test get all promotions\n        success, data, status = self.make_request('GET', 'promotions')\n        if success and isinstance(data, list):\n            self.log_test(\"Get All Promotions\", True, f\"Found {len(data)} promotions\")\n        else:\n            self.log_test(\"Get All Promotions\", False, f\"Status: {status}\")\n            return False\n        \n        # Test get active promotions only\n        success, data, status = self.make_request('GET', 'promotions?active_only=true')\n        if success and isinstance(data, list):\n            self.log_test(\"Get Active Promotions Only\", True, f\"Found {len(data)} active promotions\")\n        else:\n            self.log_test(\"Get Active Promotions Only\", False, f\"Status: {status}\")\n        \n        # Test create promotion\n        tomorrow = (datetime.now() + timedelta(days=1)).strftime(\"%Y-%m-%d\")\n        next_week = (datetime.now() + timedelta(days=7)).strftime(\"%Y-%m-%d\")\n        \n        test_promotion = {\n            \"title\": \"Test Promotion from API\",\n            \"description\": \"This is a test promotion created by API testing\",\n            \"promo_type\": \"banner\",\n            \"start_date\": tomorrow,\n            \"end_date\": next_week\n        }\n        \n        success, data, status = self.make_request('POST', 'promotions', test_promotion)\n        if success and data.get('id'):\n            promo_id = data['id']\n            self.log_test(\"Create Promotion\", True, f\"Created promotion ID: {promo_id}\")\n            \n            # Test update promotion\n            update_data = {\n                \"title\": \"Updated Test Promotion\",\n                \"is_active\": False\n            }\n            success, data, status = self.make_request('PUT', f'promotions/{promo_id}', update_data)\n            if success:\n                self.log_test(\"Update Promotion\", True)\n            else:\n                self.log_test(\"Update Promotion\", False, f\"Status: {status}\")\n            \n            # Test delete the created promotion\n            success, data, status = self.make_request('DELETE', f'promotions/{promo_id}')\n            if success:\n                self.log_test(\"Delete Promotion\", True)\n            else:\n                self.log_test(\"Delete Promotion\", False, f\"Status: {status}\")\n        else:\n            self.log_test(\"Create Promotion\", False, f\"Status: {status}, Data: {data}\")\n\n        return True\n\n    def test_menu_item_management(self):\n        \"\"\"Test menu item management endpoints\"\"\"\n        # First get existing menu items\n        success, data, status = self.make_request('GET', 'menu')\n        if not success or not isinstance(data, list) or len(data) == 0:\n            self.log_test(\"Menu Item Management - Get Items\", False, \"No menu items found\")\n            return False\n        \n        # Test updating a menu item (toggle availability and featured status)\n        test_item = data[0]  # Use first item for testing\n        item_id = test_item['id']\n        \n        # Test toggle availability\n        current_availability = test_item.get('is_available', True)\n        success, data, status = self.make_request('PUT', f'menu/{item_id}?is_available={not current_availability}')\n        if success:\n            self.log_test(\"Toggle Menu Item Availability\", True)\n        else:\n            self.log_test(\"Toggle Menu Item Availability\", False, f\"Status: {status}\")\n        \n        # Test toggle featured status\n        current_featured = test_item.get('is_featured', False)\n        success, data, status = self.make_request('PUT', f'menu/{item_id}?is_featured={not current_featured}')\n        if success:\n            self.log_test(\"Toggle Menu Item Featured Status\", True)\n        else:\n            self.log_test(\"Toggle Menu Item Featured Status\", False, f\"Status: {status}\")\n        \n        # Restore original values\n        success, data, status = self.make_request('PUT', f'menu/{item_id}?is_available={current_availability}&is_featured={current_featured}')\n        if success:\n            self.log_test(\"Restore Menu Item Original Status\", True)\n        else:\n            self.log_test(\"Restore Menu Item Original Status\", False, f\"Status: {status}\")\n\n        return True\n\n    def test_error_handling(self):\n        \"\"\"Test error handling for invalid requests\"\"\"\n        # Test invalid menu item deletion\n        success, data, status = self.make_request('DELETE', 'menu/invalid-id')\n        if status == 404:\n            self.log_test(\"Error Handling - Invalid Menu Delete\", True)\n        else:\n            self.log_test(\"Error Handling - Invalid Menu Delete\", False, f\"Expected 404, got {status}\")\n        \n        # Test invalid daily menu deletion\n        success, data, status = self.make_request('DELETE', 'daily-menu/invalid-id')\n        if status == 404:\n            self.log_test(\"Error Handling - Invalid Daily Menu Delete\", True)\n        else:\n            self.log_test(\"Error Handling - Invalid Daily Menu Delete\", False, f\"Expected 404, got {status}\")\n        \n        # Test invalid photo deletion\n        success, data, status = self.make_request('DELETE', 'gallery/invalid-id')\n        if status == 404:\n            self.log_test(\"Error Handling - Invalid Photo Delete\", True)\n        else:\n            self.log_test(\"Error Handling - Invalid Photo Delete\", False, f\"Expected 404, got {status}\")\n\n        return True\n\n    def run_all_tests(self):\n        \"\"\"Run all API tests\"\"\"\n        print(\"üß™ Starting Chez Loman API Tests...\")\n        print(f\"üåê Testing API at: {self.api_url}\")\n        print(\"=\" * 60)\n        \n        # Basic connectivity tests\n        if not self.test_root_endpoint():\n            print(\"‚ùå API is not accessible. Stopping tests.\")\n            return False\n        \n        self.test_restaurant_info()\n        self.test_seed_data()\n        \n        # Core functionality tests\n        self.test_menu_endpoints()\n        self.test_daily_menu_endpoints()\n        self.test_gallery_endpoints()\n        self.test_reviews_endpoints()\n        self.test_videos_endpoints()\n        self.test_promotions_endpoints()\n        self.test_menu_item_management()\n        \n        # Error handling tests\n        self.test_error_handling()\n        \n        # Print summary\n        print(\"=\" * 60)\n        print(f\"üìä Test Summary:\")\n        print(f\"   Total Tests: {self.tests_run}\")\n        print(f\"   Passed: {self.tests_passed}\")\n        print(f\"   Failed: {self.tests_run - self.tests_passed}\")\n        print(f\"   Success Rate: {(self.tests_passed/self.tests_run)*100:.1f}%\")\n        \n        if self.tests_passed == self.tests_run:\n            print(\"üéâ All tests passed!\")\n            return True\n        else:\n            print(\"‚ö†Ô∏è  Some tests failed. Check the details above.\")\n            return False\n\ndef main():\n    \"\"\"Main test execution\"\"\"\n    tester = ChezLomanAPITester()\n    success = tester.run_all_tests()\n    return 0 if success else 1\n\nif __name__ == \"__main__\":\n    sys.exit(main())","path":null,"size_bytes":18526,"size_tokens":null},"frontend/src/hooks/useTheme.js":{"content":"import { createContext, useContext, useState, useEffect } from \"react\";\n\nconst ThemeContext = createContext();\n\nexport const ThemeProvider = ({ children }) => {\n  const [theme, setTheme] = useState(() => {\n    return localStorage.getItem(\"chezloman-theme\") || \"dark\";\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    if (theme === \"light\") {\n      root.classList.add(\"light-mode\");\n      root.classList.remove(\"dark-mode\");\n    } else {\n      root.classList.add(\"dark-mode\");\n      root.classList.remove(\"light-mode\");\n    }\n    localStorage.setItem(\"chezloman-theme\", theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === \"dark\" ? \"light\" : \"dark\");\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n\nexport const useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n  return context;\n};\n","path":null,"size_bytes":1025,"size_tokens":null},"tests/__init__.py":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"frontend/src/App.js":{"content":"import { useEffect, useState } from \"react\";\nimport \"@/App.css\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Toaster } from \"./components/ui/sonner\";\nimport { ThemeProvider } from \"./hooks/useTheme\";\n\n// Components\nimport Navbar from \"./components/Navbar\";\nimport Footer from \"./components/Footer\";\nimport WhatsAppButton from \"./components/WhatsAppButton\";\nimport ScrollToTop from \"./components/ScrollToTop\";\n\n// Pages\nimport HomePage from \"./pages/HomePage\";\nimport MenuPage from \"./pages/MenuPage\";\nimport AboutPage from \"./pages/AboutPage\";\nimport GalleryPage from \"./pages/GalleryPage\";\nimport ContactPage from \"./pages/ContactPage\";\nimport AdminPage from \"./pages/AdminPage\";\nimport DashboardPage from \"./pages/DashboardPage\";\n\nexport const API = \"/api\";\n\n// Logo animation video URL\nexport const LOGO_VIDEO_URL = \"https://customer-assets.emergentagent.com/job_chezloman/artifacts/n2k28tuu_animation%20logo%20chez%20loman%20%20%28Vid%C3%A9o%20Facebook%29.mp4\";\nexport const LOGO_IMAGE_URL = \"https://customer-assets.emergentagent.com/job_chezloman/artifacts/dn3n27hs_Design%20sans%20titre.png\";\n\nfunction App() {\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const timer = setTimeout(() => setIsLoading(false), 2000);\n    const seedData = async () => {\n      try {\n        await axios.post(`${API}/seed`);\n      } catch (e) {\n        console.log(\"Data may already be seeded\");\n      } finally {\n        clearTimeout(timer);\n        setIsLoading(false);\n      }\n    };\n    seedData();\n    return () => clearTimeout(timer);\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-[#05100D]\">\n        <div className=\"text-center\">\n          <img \n            src={LOGO_IMAGE_URL} \n            alt=\"Chez Loman\" \n            className=\"w-32 h-32 object-cover rounded-full border-2 border-[#D4AF37]/30 mx-auto animate-pulse\"\n          />\n          <p className=\"mt-4 text-[#D4AF37] font-medium\">Chargement...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <ThemeProvider>\n      <div className=\"App min-h-screen theme-bg transition-colors duration-300\">\n        <BrowserRouter>\n          <ScrollToTop />\n          <Navbar />\n          <main>\n            <Routes>\n              <Route path=\"/\" element={<HomePage />} />\n              <Route path=\"/menu\" element={<MenuPage />} />\n              <Route path=\"/about\" element={<AboutPage />} />\n              <Route path=\"/gallery\" element={<GalleryPage />} />\n              <Route path=\"/contact\" element={<ContactPage />} />\n              <Route path=\"/admin\" element={<AdminPage />} />\n              <Route path=\"/dashboard\" element={<DashboardPage />} />\n            </Routes>\n          </main>\n          <Footer />\n          <WhatsAppButton />\n          <Toaster position=\"top-right\" />\n        </BrowserRouter>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":2981,"size_tokens":null},"frontend/src/components/ui/badge.jsx":{"content":"import * as React from \"react\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  ...props\n}) {\n  return (<div className={cn(badgeVariants({ variant }), className)} {...props} />);\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":990,"size_tokens":null},"frontend/src/components/ui/resizable.jsx":{"content":"import { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props} />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}>\n    {withHandle && (\n      <div\n        className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1556,"size_tokens":null},"frontend/src/pages/GalleryPage.jsx":{"content":"import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { API } from \"../App\";\nimport { Button } from \"../components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"../components/ui/dialog\";\nimport { motion } from \"framer-motion\";\nimport { X } from \"lucide-react\";\n\nconst GalleryPage = () => {\n  const [photos, setPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [activeCategory, setActiveCategory] = useState(\"all\");\n  const [selectedPhoto, setSelectedPhoto] = useState(null);\n\n  const categories = [\n    { id: \"all\", label: \"Toutes\" },\n    { id: \"plats\", label: \"Nos Plats\" },\n    { id: \"restaurant\", label: \"Le Restaurant\" },\n    { id: \"clients\", label: \"Nos Clients\" },\n    { id: \"ambiance\", label: \"Ambiance\" },\n  ];\n\n  useEffect(() => {\n    const fetchGallery = async () => {\n      try {\n        const response = await axios.get(`${API}/gallery`);\n        setPhotos(response.data);\n      } catch (error) {\n        console.error(\"Error fetching gallery:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchGallery();\n  }, []);\n\n  const filteredPhotos = activeCategory === \"all\"\n    ? photos\n    : photos.filter(photo => photo.category === activeCategory);\n\n  return (\n    <div className=\"min-h-screen bg-[#05100D] pt-32 pb-24\" data-testid=\"gallery-page\">\n      {/* Header */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 mb-16\">\n        <motion.div \n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.8 }}\n          className=\"max-w-2xl\"\n        >\n          <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n            Nos Photos\n          </span>\n          <h1 className=\"text-5xl md:text-6xl text-[#F9F7F2] mb-4\">\n            La Galerie\n          </h1>\n          <div className=\"divider-gold mb-6\"></div>\n          <p className=\"text-lg text-[#A3B1AD] leading-relaxed\">\n            D√©couvrez l'ambiance de Chez Loman, nos plats signatures et nos clients satisfaits\n          </p>\n        </motion.div>\n      </div>\n\n      {/* Category Filters */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 mb-12\">\n        <div className=\"flex flex-wrap gap-3\">\n          {categories.map((cat) => (\n            <button\n              key={cat.id}\n              onClick={() => setActiveCategory(cat.id)}\n              className={`px-6 py-3 rounded-full text-sm font-medium tracking-wide transition-all duration-400 ${\n                activeCategory === cat.id\n                  ? \"bg-[#D4AF37] text-[#0F2E24]\"\n                  : \"bg-white/5 text-[#A3B1AD] border border-white/10 hover:border-[#D4AF37]/50 hover:text-[#D4AF37]\"\n              }`}\n              data-testid={`gallery-category-${cat.id}`}\n            >\n              {cat.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Gallery Grid */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n        {loading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {[1, 2, 3, 4, 5, 6].map((i) => (\n              <div key={i} className=\"h-72 bg-white/5 rounded-xl animate-pulse\"></div>\n            ))}\n          </div>\n        ) : filteredPhotos.length === 0 ? (\n          <div className=\"text-center py-20\">\n            <p className=\"text-[#A3B1AD] text-lg\">Aucune photo dans cette cat√©gorie</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredPhotos.map((photo, index) => (\n              <motion.div\n                key={photo.id}\n                initial={{ opacity: 0, y: 30 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.5, delay: index * 0.05 }}\n              >\n                <Dialog>\n                  <DialogTrigger asChild>\n                    <div \n                      className=\"gallery-item-luxury group cursor-pointer h-72 relative\"\n                      data-testid={`gallery-photo-${photo.id}`}\n                    >\n                      <img \n                        src={photo.image_url} \n                        alt={photo.caption || \"Photo Chez Loman\"}\n                        className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\n                        loading=\"lazy\"\n                      />\n                      <div className=\"absolute inset-0 bg-gradient-to-t from-[#05100D]/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500\">\n                        <div className=\"absolute bottom-0 left-0 right-0 p-6\">\n                          {photo.caption && (\n                            <p className=\"text-[#F9F7F2] font-medium\">{photo.caption}</p>\n                          )}\n                          <span className=\"text-[#D4AF37] text-xs uppercase tracking-wider\">{photo.category}</span>\n                        </div>\n                      </div>\n                      {photo.is_featured && (\n                        <span className=\"absolute top-4 left-4 bg-[#D4AF37] text-[#0F2E24] text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider\">\n                          √Ä la une\n                        </span>\n                      )}\n                    </div>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-4xl bg-[#05100D] border border-white/10 p-0 overflow-hidden\">\n                    <DialogHeader className=\"sr-only\">\n                      <DialogTitle>{photo.caption || \"Photo\"}</DialogTitle>\n                    </DialogHeader>\n                    <img \n                      src={photo.image_url} \n                      alt={photo.caption || \"Photo Chez Loman\"}\n                      className=\"w-full h-auto max-h-[80vh] object-contain\"\n                    />\n                    {photo.caption && (\n                      <div className=\"p-6 border-t border-white/10\">\n                        <p className=\"text-[#F9F7F2]\">{photo.caption}</p>\n                        <span className=\"text-[#D4AF37] text-xs uppercase tracking-wider\">{photo.category}</span>\n                      </div>\n                    )}\n                  </DialogContent>\n                </Dialog>\n              </motion.div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* CTA */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 mt-24\">\n        <div className=\"glass rounded-3xl p-12 md:p-16 text-center gold-border\">\n          <h2 className=\"text-3xl md:text-4xl text-[#F9F7F2] mb-4\">\n            Venez Cr√©er Vos Propres Souvenirs\n          </h2>\n          <p className=\"text-[#A3B1AD] mb-8 max-w-xl mx-auto\">\n            Rejoignez-nous pour vivre l'exp√©rience Chez Loman en personne\n          </p>\n          <a\n            href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite r√©server une table\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <Button className=\"btn-gold text-lg\">\n              R√©server Maintenant\n            </Button>\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GalleryPage;\n","path":null,"size_bytes":7286,"size_tokens":null},"frontend/src/pages/HomePage.jsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { API } from \"../App\";\nimport { Button } from \"../components/ui/button\";\nimport MenuCard from \"../components/MenuCard\";\nimport StarRating from \"../components/StarRating\";\nimport { ArrowRight, MapPin, Clock, Sparkles, Send, CheckCircle } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { toast } from \"sonner\";\n\n// TikTok icon component (not available in lucide-react)\nconst TikTokIcon = ({ size = 24, className = \"\" }) => (\n  <svg \n    width={size} \n    height={size} \n    viewBox=\"0 0 24 24\" \n    fill=\"currentColor\" \n    className={className}\n  >\n    <path d=\"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z\"/>\n  </svg>\n);\n\n// Facebook icon component\nconst FacebookIcon = ({ size = 24, className = \"\" }) => (\n  <svg \n    width={size} \n    height={size} \n    viewBox=\"0 0 24 24\" \n    fill=\"currentColor\" \n    className={className}\n  >\n    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\n  </svg>\n);\n\nconst HomePage = () => {\n  const [featuredItems, setFeaturedItems] = useState([]);\n  const [dailyMenu, setDailyMenu] = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const [videos, setVideos] = useState([]);\n  const [promotions, setPromotions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [heroContent, setHeroContent] = useState(null);\n  const [commentName, setCommentName] = useState(\"\");\n  const [commentText, setCommentText] = useState(\"\");\n  const [commentSubmitted, setCommentSubmitted] = useState(false);\n  const [submittingComment, setSubmittingComment] = useState(false);\n\n  // Helper to extract YouTube video ID\n  const getYouTubeId = (url) => {\n    const match = url.match(/(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/);\n    return match ? match[1] : null;\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [featuredRes, dailyRes, reviewsRes, videosRes, promosRes, heroRes] = await Promise.all([\n          axios.get(`${API}/menu/featured`),\n          axios.get(`${API}/daily-menu`),\n          axios.get(`${API}/reviews`),\n          axios.get(`${API}/videos?active_only=true`),\n          axios.get(`${API}/promotions?active_only=true`),\n          axios.get(`${API}/hero-content`)\n        ]);\n        setFeaturedItems(featuredRes.data);\n        setDailyMenu(dailyRes.data);\n        setReviews(reviewsRes.data.slice(0, 3));\n        setVideos(videosRes.data.slice(0, 3));\n        setPromotions(promosRes.data);\n        setHeroContent(heroRes.data);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  const handleCommentSubmit = async (e) => {\n    e.preventDefault();\n    if (!commentName.trim() || !commentText.trim()) {\n      toast.error(\"Veuillez remplir tous les champs\");\n      return;\n    }\n    setSubmittingComment(true);\n    try {\n      await axios.post(`${API}/reviews`, {\n        author: commentName.trim(),\n        comment: commentText.trim(),\n      });\n      setCommentSubmitted(true);\n      setCommentName(\"\");\n      setCommentText(\"\");\n      toast.success(\"Merci pour votre commentaire !\");\n      setTimeout(() => setCommentSubmitted(false), 5000);\n    } catch (error) {\n      toast.error(\"Erreur lors de l'envoi du commentaire\");\n    } finally {\n      setSubmittingComment(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-[#05100D]\" data-testid=\"home-page\">\n      {/* Hero Section */}\n      <section className=\"relative min-h-screen flex items-center\" data-testid=\"hero-section\">\n        <div className=\"absolute inset-0\">\n          <img \n            src={heroContent?.background_image || \"https://customer-assets.emergentagent.com/job_loman-restaurant/artifacts/jde9y3pb_chl.jpg\"}\n            alt=\"Restaurant ambiance\"\n            className=\"w-full h-full object-cover\"\n          />\n          <div className=\"absolute inset-0 hero-overlay\"></div>\n          <div className=\"absolute inset-0 noise-overlay\"></div>\n        </div>\n        \n        <div className=\"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-32\">\n          <motion.div \n            initial={{ opacity: 0, y: 40 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 1, ease: \"easeOut\" }}\n            className=\"max-w-3xl\"\n          >\n            <span className=\"inline-block text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-6\">\n              Restaurant Ivoirien d'Exception\n            </span>\n            \n            <h1 className=\"text-5xl md:text-7xl lg:text-8xl font-accent italic text-[#F9F7F2] leading-[0.9] mb-6\">\n              {heroContent?.title_line1 || \"Ici c'est manger\"}<br/>\n              <span className=\"text-[#D4AF37]\">{heroContent?.title_line2 || \"bien hein\"}</span>\n            </h1>\n            \n            <p className=\"text-lg md:text-xl text-[#A3B1AD] max-w-xl mb-10 leading-relaxed\">\n              {heroContent?.description || \"Une cuisine ivoirienne authentique, sublim√©e par notre savoir-faire. D√©couvrez les saveurs du pays dans un cadre raffin√©.\"}\n            </p>\n            \n            <div className=\"flex flex-wrap gap-4\">\n              <a\n                href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite r√©server une table\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <Button className=\"btn-gold text-base\">\n                  R√©server une Table\n                </Button>\n              </a>\n              <Link to=\"/menu\">\n                <Button className=\"btn-outline-gold text-base\">\n                  D√©couvrir la Carte\n                </Button>\n              </Link>\n            </div>\n            \n            {/* Info badges */}\n            <div className=\"flex flex-wrap gap-8 mt-16\">\n              <div className=\"flex items-center gap-3 text-[#A3B1AD]/70\">\n                <MapPin size={16} className=\"text-[#D4AF37]\" />\n                <span className=\"text-sm\">Yopougon, Abidjan</span>\n              </div>\n              <div className=\"flex items-center gap-3 text-[#A3B1AD]/70\">\n                <Clock size={16} className=\"text-[#D4AF37]\" />\n                <span className=\"text-sm\">11h ‚Äì 22h</span>\n              </div>\n              \n              {/* Social Links */}\n              <div className=\"flex items-center gap-3\">\n                <a \n                  href=\"https://www.facebook.com/profile.php?id=61574715038273\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"w-9 h-9 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-[#D4AF37] hover:bg-[#D4AF37] hover:text-[#0F2E24] transition-all duration-300\"\n                  data-testid=\"hero-facebook-link\"\n                >\n                  <FacebookIcon size={16} />\n                </a>\n                <a \n                  href=\"https://www.tiktok.com/@lomanschadrac?lang=fr\" \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"w-9 h-9 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-[#D4AF37] hover:bg-[#D4AF37] hover:text-[#0F2E24] transition-all duration-300\"\n                  data-testid=\"hero-tiktok-link\"\n                >\n                  <TikTokIcon size={16} />\n                </a>\n              </div>\n            </div>\n          </motion.div>\n        </div>\n        \n        {/* Scroll indicator */}\n        <div className=\"absolute bottom-10 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2\">\n          <span className=\"text-[#A3B1AD]/50 text-xs uppercase tracking-widest\">D√©couvrir</span>\n          <div className=\"w-px h-12 bg-gradient-to-b from-[#D4AF37] to-transparent\"></div>\n        </div>\n      </section>\n\n      {/* Daily Menu Section */}\n      {dailyMenu && (\n        <section className=\"py-24 md:py-32 relative\" data-testid=\"daily-menu-section\">\n          <div className=\"absolute inset-0 bg-[#1A4D3E]/20\"></div>\n          <div className=\"max-w-7xl mx-auto px-6 md:px-12 relative z-10\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center\">\n              <div>\n                <motion.div\n                  initial={{ opacity: 0, y: 30 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.8 }}\n                >\n                  <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n                    Aujourd'hui\n                  </span>\n                  <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2] mb-6\">\n                    Menu du Jour\n                  </h2>\n                  <div className=\"divider-gold mb-8\"></div>\n                  \n                  {dailyMenu.special_message && (\n                    <p className=\"text-[#D4AF37] font-accent italic text-lg mb-8\">\n                      {dailyMenu.special_message}\n                    </p>\n                  )}\n                  \n                  <ul className=\"space-y-4 mb-10\">\n                    {dailyMenu.items.map((item, index) => (\n                      <li key={index} className=\"flex items-center gap-4 text-[#F9F7F2]/80\">\n                        <span className=\"w-2 h-2 rounded-full bg-[#D4AF37]\"></span>\n                        <span className=\"text-lg\">{item}</span>\n                      </li>\n                    ))}\n                  </ul>\n                  \n                  <a\n                    href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite commander le menu du jour\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <Button className=\"btn-gold\">\n                      Commander Maintenant\n                    </Button>\n                  </a>\n                </motion.div>\n              </div>\n              \n              <div className=\"relative\">\n                <img \n                  src=\"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/ha2l407l_cv.jpg\"\n                  alt=\"Client satisfait\"\n                  className=\"rounded-2xl shadow-2xl w-full\"\n                />\n                <div className=\"absolute -bottom-6 -right-6 glass p-6 rounded-xl\">\n                  <Sparkles className=\"text-[#D4AF37] mb-2\" size={24} />\n                  <p className=\"text-[#F9F7F2] font-semibold\">Fait maison</p>\n                  <p className=\"text-[#A3B1AD] text-sm\">Chaque jour</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Featured Dishes */}\n      <section className=\"py-24 md:py-32\" data-testid=\"featured-section\">\n        <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n          <motion.div \n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8 }}\n            className=\"text-center mb-16\"\n          >\n            <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n              Nos Sp√©cialit√©s\n            </span>\n            <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2] mb-4\">\n              Plats Signature\n            </h2>\n            <div className=\"divider-gold mx-auto\"></div>\n          </motion.div>\n          \n          {loading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {[1, 2, 3].map((i) => (\n                <div key={i} className=\"h-96 bg-white/5 rounded-xl animate-pulse\"></div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {featuredItems.slice(0, 6).map((item, index) => (\n                <motion.div\n                  key={item.id}\n                  initial={{ opacity: 0, y: 30 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.6, delay: index * 0.1 }}\n                >\n                  <MenuCard item={item} />\n                </motion.div>\n              ))}\n            </div>\n          )}\n          \n          <div className=\"text-center mt-16\">\n            <Link to=\"/menu\">\n              <Button className=\"btn-outline-gold group\">\n                Voir Toute la Carte\n                <ArrowRight className=\"ml-2 group-hover:translate-x-1 transition-transform\" size={18} />\n              </Button>\n            </Link>\n          </div>\n        </div>\n      </section>\n\n      {/* About Preview */}\n      <section className=\"py-24 md:py-32 relative overflow-hidden\">\n        <div className=\"absolute inset-0\">\n          <img \n            src=\"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/smtxt9or_chl.jpg\"\n            alt=\"Notre √©quipe\"\n            className=\"w-full h-full object-cover opacity-30\"\n          />\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[#05100D] via-[#05100D]/90 to-[#05100D]/70\"></div>\n        </div>\n        \n        <div className=\"max-w-7xl mx-auto px-6 md:px-12 relative z-10\">\n          <div className=\"max-w-2xl\">\n            <motion.div\n              initial={{ opacity: 0, y: 30 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8 }}\n            >\n              <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n                Notre Histoire\n              </span>\n              <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2] mb-6\">\n                L'Art de la Cuisine Ivoirienne\n              </h2>\n              <div className=\"divider-gold mb-8\"></div>\n              <p className=\"text-lg text-[#A3B1AD] leading-relaxed mb-8\">\n                Chez Loman, nous perp√©tuons la tradition culinaire ivoirienne avec passion et excellence. \n                Chaque plat raconte une histoire, chaque saveur vous transporte au c≈ìur de la C√¥te d'Ivoire.\n              </p>\n              <p className=\"text-2xl font-accent italic text-[#D4AF37] mb-10\">\n                \"Viens go√ªter, tu vas comprendre\"\n              </p>\n              <Link to=\"/about\">\n                <Button className=\"btn-outline-gold\">\n                  D√©couvrir Notre Histoire\n                </Button>\n              </Link>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* Promotions Banner */}\n      {promotions.length > 0 && (\n        <section className=\"py-12 bg-[#D4AF37]\" data-testid=\"promo-banner\">\n          <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n            <div className=\"flex flex-col md:flex-row items-center justify-center gap-4 text-center md:text-left\">\n              <Sparkles className=\"text-[#0F2E24]\" size={28} />\n              <div>\n                <h3 className=\"text-xl font-bold text-[#0F2E24]\">{promotions[0].title}</h3>\n                <p className=\"text-[#0F2E24]/80\">{promotions[0].description}</p>\n              </div>\n              <a\n                href=\"https://wa.me/2250709508819?text=Bonjour, je suis int√©ress√© par la promotion\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"bg-[#0F2E24] text-[#D4AF37] px-6 py-3 rounded-full font-semibold hover:bg-[#1A4D3E] transition-colors\"\n              >\n                En Profiter\n              </a>\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Videos Section */}\n      {videos.length > 0 && (\n        <section className=\"py-24 md:py-32\" data-testid=\"videos-section\">\n          <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n            <motion.div \n              initial={{ opacity: 0, y: 30 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8 }}\n              className=\"text-center mb-16\"\n            >\n              <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n                En Vid√©o\n              </span>\n              <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2]\">\n                D√©couvrez Notre Ambiance\n              </h2>\n            </motion.div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {videos.map((video, index) => (\n                <motion.div\n                  key={video.id}\n                  initial={{ opacity: 0, y: 30 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ duration: 0.6, delay: index * 0.1 }}\n                  className=\"luxury-card rounded-2xl overflow-hidden\"\n                >\n                  {video.video_type === \"youtube\" && getYouTubeId(video.video_url) && (\n                    <div className=\"aspect-video\">\n                      <iframe \n                        src={`https://www.youtube.com/embed/${getYouTubeId(video.video_url)}`} \n                        className=\"w-full h-full\" \n                        allowFullScreen \n                        title={video.title}\n                      ></iframe>\n                    </div>\n                  )}\n                  {video.video_type === \"direct\" && (\n                    <video src={video.video_url} controls className=\"w-full aspect-video object-cover\"></video>\n                  )}\n                  <div className=\"p-5\">\n                    <h3 className=\"text-[#F9F7F2] font-semibold\">{video.title}</h3>\n                    {video.description && (\n                      <p className=\"text-sm text-[#A3B1AD] mt-2\">{video.description}</p>\n                    )}\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Reviews */}\n      <section className=\"py-24 md:py-32 bg-[#0F2E24]/30\" data-testid=\"reviews-section\">\n        <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n          <motion.div \n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8 }}\n            className=\"text-center mb-16\"\n          >\n            <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n              T√©moignages\n            </span>\n            <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2]\">\n              Ce Qu'ils en Disent\n            </h2>\n          </motion.div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {reviews.map((review, index) => (\n              <motion.div\n                key={review.id}\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.6, delay: index * 0.1 }}\n                className=\"luxury-card p-8 rounded-2xl\"\n              >\n                <StarRating rating={review.rating} />\n                <p className=\"text-[#F9F7F2]/80 mt-6 mb-8 font-accent italic text-lg leading-relaxed\">\n                  \"{review.comment}\"\n                </p>\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 rounded-full bg-[#1A4D3E] flex items-center justify-center text-[#D4AF37] font-semibold\">\n                    {review.author.charAt(0)}\n                  </div>\n                  <span className=\"text-[#F9F7F2] font-medium\">{review.author}</span>\n                </div>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Comment Form */}\n      <section className=\"py-24 md:py-32\" data-testid=\"comment-section\">\n        <div className=\"max-w-3xl mx-auto px-6 md:px-12\">\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8 }}\n            className=\"text-center mb-12\"\n          >\n            <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n              Votre Avis Compte\n            </span>\n            <h2 className=\"text-4xl md:text-5xl text-[#F9F7F2]\">\n              Laissez un Commentaire\n            </h2>\n          </motion.div>\n\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8, delay: 0.2 }}\n          >\n            {commentSubmitted ? (\n              <div className=\"luxury-card rounded-2xl p-10 text-center\">\n                <CheckCircle className=\"mx-auto text-[#D4AF37] mb-4\" size={48} />\n                <h3 className=\"text-xl text-[#F9F7F2] font-semibold mb-2\">Merci pour votre commentaire !</h3>\n                <p className=\"text-[#A3B1AD]\">Il sera visible apr√®s validation par notre √©quipe.</p>\n              </div>\n            ) : (\n              <form onSubmit={handleCommentSubmit} className=\"luxury-card rounded-2xl p-8 md:p-10 space-y-6\">\n                <div>\n                  <label className=\"block text-[#A3B1AD] text-sm mb-2 uppercase tracking-wider\">Nom et Pr√©noms</label>\n                  <input\n                    type=\"text\"\n                    value={commentName}\n                    onChange={(e) => setCommentName(e.target.value)}\n                    placeholder=\"Ex: Kouadio Aman Jean\"\n                    className=\"w-full input-luxury rounded-xl px-5 py-4 text-base\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-[#A3B1AD] text-sm mb-2 uppercase tracking-wider\">Votre Commentaire</label>\n                  <textarea\n                    value={commentText}\n                    onChange={(e) => setCommentText(e.target.value)}\n                    placeholder=\"Partagez votre exp√©rience chez Loman...\"\n                    rows={4}\n                    className=\"w-full input-luxury rounded-xl px-5 py-4 text-base resize-none\"\n                    required\n                  />\n                </div>\n                <Button\n                  type=\"submit\"\n                  disabled={submittingComment}\n                  className=\"btn-gold w-full text-base flex items-center justify-center gap-2\"\n                >\n                  {submittingComment ? \"Envoi en cours...\" : (\n                    <>\n                      <Send size={18} />\n                      Envoyer mon commentaire\n                    </>\n                  )}\n                </Button>\n                <p className=\"text-xs text-[#A3B1AD] text-center\">\n                  Votre commentaire sera publi√© apr√®s validation par notre √©quipe.\n                </p>\n              </form>\n            )}\n          </motion.div>\n        </div>\n      </section>\n\n      {/* CTA */}\n      <section className=\"py-24 md:py-32 relative\" data-testid=\"cta-section\">\n        <div className=\"absolute inset-0 bg-[#1A4D3E]\"></div>\n        <div className=\"absolute inset-0 noise-overlay\"></div>\n        \n        <div className=\"max-w-4xl mx-auto px-6 md:px-12 text-center relative z-10\">\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8 }}\n          >\n            <h2 className=\"text-4xl md:text-6xl font-accent italic text-[#F9F7F2] mb-6\">\n              Une Table Vous Attend\n            </h2>\n            <p className=\"text-lg text-[#F9F7F2]/70 mb-10 max-w-xl mx-auto\">\n              R√©servez d√®s maintenant et laissez-nous vous faire d√©couvrir \n              les meilleures saveurs de la cuisine ivoirienne\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-4\">\n              <a\n                href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite r√©server une table\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <Button className=\"bg-[#D4AF37] text-[#0F2E24] hover:bg-[#F9F7F2] rounded-full px-10 py-6 text-lg font-semibold transition-all duration-400\">\n                  R√©server sur WhatsApp\n                </Button>\n              </a>\n              <a href=\"tel:+2250709508819\">\n                <Button className=\"bg-transparent border border-[#F9F7F2]/30 text-[#F9F7F2] hover:bg-[#F9F7F2] hover:text-[#1A4D3E] rounded-full px-10 py-6 text-lg font-medium transition-all duration-400\">\n                  Appeler: 07 09 508 819\n                </Button>\n              </a>\n            </div>\n          </motion.div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default HomePage;\n","path":null,"size_bytes":25628,"size_tokens":null},"frontend/src/components/WhatsAppButton.jsx":{"content":"import { MessageCircle } from \"lucide-react\";\n\nconst WhatsAppButton = () => {\n  return (\n    <a\n      href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite passer une commande chez Loman\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"fixed bottom-8 right-8 z-50 whatsapp-luxury p-4 rounded-full\"\n      data-testid=\"whatsapp-floating-btn\"\n      aria-label=\"Commander sur WhatsApp\"\n    >\n      <MessageCircle size={28} className=\"text-white\" fill=\"white\" />\n    </a>\n  );\n};\n\nexport default WhatsAppButton;\n","path":null,"size_bytes":536,"size_tokens":null},"frontend/src/components/ui/input-otp.jsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Minus } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\"flex items-center gap-2 has-[:disabled]:opacity-50\", containerClassName)}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props} />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-1 ring-ring\",\n        className\n      )}\n      {...props}>\n      {char}\n      {hasFakeCaret && (\n        <div\n          className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  );\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Minus />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":1809,"size_tokens":null},"backend/__init__.py":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"backend/ai_service.py":{"content":"\"\"\"\nDeepSeek AI Service for Restaurant Analytics\n\"\"\"\nfrom openai import AsyncOpenAI\nimport os\nimport json\nfrom typing import Dict, Any, List, Optional\nfrom datetime import datetime, timezone\n\n# DeepSeek API Configuration\nDEEPSEEK_API_KEY = os.environ.get('DEEPSEEK_API_KEY', '')\nDEEPSEEK_BASE_URL = \"https://api.deepseek.com\"\n\nclass DeepSeekService:\n    def __init__(self):\n        self.client = AsyncOpenAI(\n            api_key=DEEPSEEK_API_KEY,\n            base_url=DEEPSEEK_BASE_URL\n        ) if DEEPSEEK_API_KEY else None\n        self.model = \"deepseek-chat\"\n    \n    def is_configured(self) -> bool:\n        return self.client is not None and DEEPSEEK_API_KEY != ''\n    \n    async def generate_business_insights(\n        self,\n        sales_data: Dict[str, Any],\n        restaurant_context: Dict[str, Any]\n    ) -> Dict[str, Any]:\n        \"\"\"Generate actionable business insights from sales data\"\"\"\n        \n        if not self.is_configured():\n            return self._get_mock_insights(sales_data)\n        \n        system_prompt = \"\"\"Tu es un expert analyste business pour restaurants africains haut de gamme.\n        Analyse les donn√©es de ventes et op√©rationnelles pour g√©n√©rer des insights clairs et actionnables.\n        R√©ponds toujours en fran√ßais. Sois concis et pratique.\"\"\"\n        \n        user_prompt = f\"\"\"Analyse ces donn√©es du restaurant et donne des insights:\n        \n        Donn√©es de ventes:\n        {json.dumps(sales_data, indent=2, default=str)}\n        \n        Contexte restaurant:\n        {json.dumps(restaurant_context, indent=2, default=str)}\n        \n        R√©ponds en JSON avec ce format:\n        {{\n            \"resume\": \"r√©sum√© en 2 phrases\",\n            \"points_cles\": [\"point1\", \"point2\", \"point3\"],\n            \"opportunites\": [\"opportunit√©1\", \"opportunit√©2\"],\n            \"recommandations\": [\"action1\", \"action2\", \"action3\"],\n            \"alertes\": [\"alerte si n√©cessaire\"],\n            \"score_sante\": 85\n        }}\"\"\"\n        \n        try:\n            response = await self.client.chat.completions.create(\n                model=self.model,\n                messages=[\n                    {\"role\": \"system\", \"content\": system_prompt},\n                    {\"role\": \"user\", \"content\": user_prompt}\n                ],\n                temperature=0.7,\n                max_tokens=1500\n            )\n            \n            content = response.choices[0].message.content\n            # Extract JSON from response\n            json_start = content.find(\"{\")\n            json_end = content.rfind(\"}\") + 1\n            if json_start != -1 and json_end > json_start:\n                return json.loads(content[json_start:json_end])\n            return {\"error\": \"Could not parse response\", \"raw\": content}\n            \n        except Exception as e:\n            return {\"error\": str(e), \"fallback\": self._get_mock_insights(sales_data)}\n    \n    async def forecast_sales(\n        self,\n        historical_data: List[Dict[str, Any]],\n        period: str = \"7_jours\"\n    ) -> Dict[str, Any]:\n        \"\"\"Generate sales forecasts\"\"\"\n        \n        if not self.is_configured():\n            return self._get_mock_forecast()\n        \n        system_prompt = \"\"\"Tu es un expert en pr√©visions de ventes pour restaurants.\n        Analyse les donn√©es historiques et g√©n√®re des pr√©visions r√©alistes.\n        R√©ponds en fran√ßais avec des chiffres pr√©cis.\"\"\"\n        \n        user_prompt = f\"\"\"Bas√© sur ces donn√©es historiques, pr√©vois les ventes pour les {period} prochains:\n        \n        Historique:\n        {json.dumps(historical_data[-14:], indent=2, default=str)}\n        \n        R√©ponds en JSON:\n        {{\n            \"previsions\": [\n                {{\"date\": \"2025-02-16\", \"revenu_prevu\": 450000, \"commandes_prevues\": 85}},\n                ...\n            ],\n            \"tendance\": \"hausse/stable/baisse\",\n            \"confiance\": 75,\n            \"facteurs\": [\"facteur1\", \"facteur2\"],\n            \"conseil\": \"conseil principal\"\n        }}\"\"\"\n        \n        try:\n            response = await self.client.chat.completions.create(\n                model=self.model,\n                messages=[\n                    {\"role\": \"system\", \"content\": system_prompt},\n                    {\"role\": \"user\", \"content\": user_prompt}\n                ],\n                temperature=0.5,\n                max_tokens=1500\n            )\n            \n            content = response.choices[0].message.content\n            json_start = content.find(\"{\")\n            json_end = content.rfind(\"}\") + 1\n            if json_start != -1 and json_end > json_start:\n                return json.loads(content[json_start:json_end])\n            return self._get_mock_forecast()\n            \n        except Exception as e:\n            return {\"error\": str(e), \"fallback\": self._get_mock_forecast()}\n    \n    async def chat_assistant(\n        self,\n        message: str,\n        context: Dict[str, Any]\n    ) -> str:\n        \"\"\"AI Assistant for restaurant management questions\"\"\"\n        \n        if not self.is_configured():\n            return \"L'assistant IA n'est pas configur√©. Veuillez ajouter votre cl√© API DeepSeek.\"\n        \n        system_prompt = \"\"\"Tu es l'assistant IA du restaurant \"Chez Loman\", un restaurant ivoirien haut de gamme √† Abidjan.\n        Tu aides le g√©rant avec:\n        - Analyse des ventes et performances\n        - Conseils pour am√©liorer le service\n        - Gestion des stocks et commandes\n        - Strat√©gies marketing\n        - Optimisation des co√ªts\n        \n        R√©ponds toujours en fran√ßais, de mani√®re professionnelle mais chaleureuse.\n        Utilise les donn√©es du contexte pour personnaliser tes r√©ponses.\"\"\"\n        \n        user_prompt = f\"\"\"Contexte actuel du restaurant:\n        {json.dumps(context, indent=2, default=str)}\n        \n        Question du g√©rant: {message}\"\"\"\n        \n        try:\n            response = await self.client.chat.completions.create(\n                model=self.model,\n                messages=[\n                    {\"role\": \"system\", \"content\": system_prompt},\n                    {\"role\": \"user\", \"content\": user_prompt}\n                ],\n                temperature=0.7,\n                max_tokens=1000\n            )\n            \n            return response.choices[0].message.content\n            \n        except Exception as e:\n            return f\"Erreur de l'assistant: {str(e)}\"\n    \n    def _get_mock_insights(self, sales_data: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"Return mock insights when API is not configured\"\"\"\n        return {\n            \"resume\": \"Le restaurant montre une bonne performance globale. Les plats signatures restent les plus populaires.\",\n            \"points_cles\": [\n                \"Chiffre d'affaires en hausse de 12% cette semaine\",\n                \"Le poulet brais√© reste le plat le plus command√©\",\n                \"Pic d'activit√© entre 19h et 21h\"\n            ],\n            \"opportunites\": [\n                \"D√©velopper les commandes √† emporter\",\n                \"Cr√©er des menus sp√©ciaux weekend\"\n            ],\n            \"recommandations\": [\n                \"Augmenter le stock de poulet pour le weekend\",\n                \"Proposer une promotion sur les boissons en semaine\",\n                \"Former le personnel sur les nouvelles recettes\"\n            ],\n            \"alertes\": [\n                \"Stock de bissap bient√¥t √©puis√©\"\n            ],\n            \"score_sante\": 78\n        }\n    \n    def _get_mock_forecast(self) -> Dict[str, Any]:\n        \"\"\"Return mock forecast when API is not configured\"\"\"\n        from datetime import timedelta\n        base_date = datetime.now(timezone.utc)\n        \n        return {\n            \"previsions\": [\n                {\n                    \"date\": (base_date + timedelta(days=i)).strftime(\"%Y-%m-%d\"),\n                    \"revenu_prevu\": 350000 + (i * 15000) + (50000 if (base_date + timedelta(days=i)).weekday() >= 5 else 0),\n                    \"commandes_prevues\": 70 + (i * 3) + (20 if (base_date + timedelta(days=i)).weekday() >= 5 else 0)\n                }\n                for i in range(1, 8)\n            ],\n            \"tendance\": \"hausse\",\n            \"confiance\": 72,\n            \"facteurs\": [\n                \"Weekend √† venir (augmentation pr√©vue)\",\n                \"M√©t√©o favorable\",\n                \"Pas d'√©v√©nement majeur concurrentiel\"\n            ],\n            \"conseil\": \"Pr√©parez plus de stock pour le weekend, particuli√®rement les grillades.\"\n        }\n\n\n# Global instance\nai_service = DeepSeekService()\n","path":null,"size_bytes":8540,"size_tokens":null},"frontend/tailwind.config.js":{"content":"/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n    darkMode: [\"class\"],\n    content: [\n    \"./src/**/*.{js,jsx,ts,tsx}\",\n    \"./public/index.html\"\n  ],\n  theme: {\n  \textend: {\n  \t\tborderRadius: {\n  \t\t\tlg: 'var(--radius)',\n  \t\t\tmd: 'calc(var(--radius) - 2px)',\n  \t\t\tsm: 'calc(var(--radius) - 4px)'\n  \t\t},\n  \t\tcolors: {\n  \t\t\tbackground: 'hsl(var(--background))',\n  \t\t\tforeground: 'hsl(var(--foreground))',\n  \t\t\tcard: {\n  \t\t\t\tDEFAULT: 'hsl(var(--card))',\n  \t\t\t\tforeground: 'hsl(var(--card-foreground))'\n  \t\t\t},\n  \t\t\tpopover: {\n  \t\t\t\tDEFAULT: 'hsl(var(--popover))',\n  \t\t\t\tforeground: 'hsl(var(--popover-foreground))'\n  \t\t\t},\n  \t\t\tprimary: {\n  \t\t\t\tDEFAULT: 'hsl(var(--primary))',\n  \t\t\t\tforeground: 'hsl(var(--primary-foreground))'\n  \t\t\t},\n  \t\t\tsecondary: {\n  \t\t\t\tDEFAULT: 'hsl(var(--secondary))',\n  \t\t\t\tforeground: 'hsl(var(--secondary-foreground))'\n  \t\t\t},\n  \t\t\tmuted: {\n  \t\t\t\tDEFAULT: 'hsl(var(--muted))',\n  \t\t\t\tforeground: 'hsl(var(--muted-foreground))'\n  \t\t\t},\n  \t\t\taccent: {\n  \t\t\t\tDEFAULT: 'hsl(var(--accent))',\n  \t\t\t\tforeground: 'hsl(var(--accent-foreground))'\n  \t\t\t},\n  \t\t\tdestructive: {\n  \t\t\t\tDEFAULT: 'hsl(var(--destructive))',\n  \t\t\t\tforeground: 'hsl(var(--destructive-foreground))'\n  \t\t\t},\n  \t\t\tborder: 'hsl(var(--border))',\n  \t\t\tinput: 'hsl(var(--input))',\n  \t\t\tring: 'hsl(var(--ring))',\n  \t\t\tchart: {\n  \t\t\t\t'1': 'hsl(var(--chart-1))',\n  \t\t\t\t'2': 'hsl(var(--chart-2))',\n  \t\t\t\t'3': 'hsl(var(--chart-3))',\n  \t\t\t\t'4': 'hsl(var(--chart-4))',\n  \t\t\t\t'5': 'hsl(var(--chart-5))'\n  \t\t\t}\n  \t\t},\n  \t\tkeyframes: {\n  \t\t\t'accordion-down': {\n  \t\t\t\tfrom: {\n  \t\t\t\t\theight: '0'\n  \t\t\t\t},\n  \t\t\t\tto: {\n  \t\t\t\t\theight: 'var(--radix-accordion-content-height)'\n  \t\t\t\t}\n  \t\t\t},\n  \t\t\t'accordion-up': {\n  \t\t\t\tfrom: {\n  \t\t\t\t\theight: 'var(--radix-accordion-content-height)'\n  \t\t\t\t},\n  \t\t\t\tto: {\n  \t\t\t\t\theight: '0'\n  \t\t\t\t}\n  \t\t\t}\n  \t\t},\n  \t\tanimation: {\n  \t\t\t'accordion-down': 'accordion-down 0.2s ease-out',\n  \t\t\t'accordion-up': 'accordion-up 0.2s ease-out'\n  \t\t}\n  \t}\n  },\n  plugins: [require(\"tailwindcss-animate\")],\n};","path":null,"size_bytes":2013,"size_tokens":null},"frontend/src/components/ui/toggle.jsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-9 px-2 min-w-9\",\n        sm: \"h-8 px-1.5 min-w-8\",\n        lg: \"h-10 px-2.5 min-w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props} />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1324,"size_tokens":null},"frontend/src/components/ui/carousel.jsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel from \"embla-carousel-react\";\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\nconst CarouselContext = React.createContext(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef((\n  {\n    orientation = \"horizontal\",\n    opts,\n    setApi,\n    plugins,\n    className,\n    children,\n    ...props\n  },\n  ref\n) => {\n  const [carouselRef, api] = useEmblaCarousel({\n    ...opts,\n    axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n  }, plugins)\n  const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n  const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n  const onSelect = React.useCallback((api) => {\n    if (!api) {\n      return\n    }\n\n    setCanScrollPrev(api.canScrollPrev())\n    setCanScrollNext(api.canScrollNext())\n  }, [])\n\n  const scrollPrev = React.useCallback(() => {\n    api?.scrollPrev()\n  }, [api])\n\n  const scrollNext = React.useCallback(() => {\n    api?.scrollNext()\n  }, [api])\n\n  const handleKeyDown = React.useCallback((event) => {\n    if (event.key === \"ArrowLeft\") {\n      event.preventDefault()\n      scrollPrev()\n    } else if (event.key === \"ArrowRight\") {\n      event.preventDefault()\n      scrollNext()\n    }\n  }, [scrollPrev, scrollNext])\n\n  React.useEffect(() => {\n    if (!api || !setApi) {\n      return\n    }\n\n    setApi(api)\n  }, [api, setApi])\n\n  React.useEffect(() => {\n    if (!api) {\n      return\n    }\n\n    onSelect(api)\n    api.on(\"reInit\", onSelect)\n    api.on(\"select\", onSelect)\n\n    return () => {\n      api?.off(\"select\", onSelect)\n    };\n  }, [api, onSelect])\n\n  return (\n    <CarouselContext.Provider\n      value={{\n        carouselRef,\n        api: api,\n        opts,\n        orientation:\n          orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n        scrollPrev,\n        scrollNext,\n        canScrollPrev,\n        canScrollNext,\n      }}>\n      <div\n        ref={ref}\n        onKeyDownCapture={handleKeyDown}\n        className={cn(\"relative\", className)}\n        role=\"region\"\n        aria-roledescription=\"carousel\"\n        {...props}>\n        {children}\n      </div>\n    </CarouselContext.Provider>\n  );\n})\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props} />\n    </div>\n  );\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props} />\n  );\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\"absolute  h-8 w-8 rounded-full\", orientation === \"horizontal\"\n        ? \"-left-12 top-1/2 -translate-y-1/2\"\n        : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\", className)}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}>\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  );\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\"absolute h-8 w-8 rounded-full\", orientation === \"horizontal\"\n        ? \"-right-12 top-1/2 -translate-y-1/2\"\n        : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\", className)}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}>\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  );\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport { Carousel, CarouselContent, CarouselItem, CarouselPrevious, CarouselNext };\n","path":null,"size_bytes":4811,"size_tokens":null},"frontend/src/components/ui/skeleton.jsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props} />\n  );\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":225,"size_tokens":null},"frontend/src/components/ui/separator.jsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef((\n  { className, orientation = \"horizontal\", decorative = true, ...props },\n  ref\n) => (\n  <SeparatorPrimitive.Root\n    ref={ref}\n    decorative={decorative}\n    orientation={orientation}\n    className={cn(\n      \"shrink-0 bg-border\",\n      orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n      className\n    )}\n    {...props} />\n))\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":600,"size_tokens":null},"frontend/src/components/ui/checkbox.jsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}>\n    <CheckboxPrimitive.Indicator className={cn(\"flex items-center justify-center text-current\")}>\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":880,"size_tokens":null},"frontend/src/components/ui/tooltip.jsx":{"content":"import * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Portal>\n    <TooltipPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n        className\n      )}\n      {...props} />\n  </TooltipPrimitive.Portal>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1127,"size_tokens":null},"frontend/src/components/ui/toggle-group.jsx":{"content":"import * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}>\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(toggleVariants({\n        variant: context.variant || variant,\n        size: context.size || size,\n      }), className)}\n      {...props}>\n      {children}\n    </ToggleGroupPrimitive.Item>\n  );\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1268,"size_tokens":null},"README.md":{"content":"# Chez Loman - Restaurant Website\n\nSite web moderne pour le restaurant africain \"Chez Loman\" - Cuisine ivoirienne haut de gamme √† Yopougon, Abidjan.\n\n## üçΩÔ∏è Fonctionnalit√©s\n\n### Site Public\n- Page d'accueil avec Hero dynamique\n- Menu complet avec filtres par cat√©gorie\n- Galerie photos\n- Informations de contact\n- Bouton WhatsApp flottant\n- Liens Facebook et TikTok\n\n### Panneau Admin\n- Gestion du menu du jour\n- Gestion de la galerie photos (URL ou upload)\n- Gestion des vid√©os et promotions\n- Modification du message d'accueil\n\n### Dashboard Pro\n- Vue d'ensemble avec KPIs (revenus, b√©n√©fices, commandes)\n- Comptabilit√© compl√®te (revenus/d√©penses)\n- Gestion des commandes avec statuts\n- Gestion du stock avec alertes\n- R√©servations\n- Assistant IA (DeepSeek) pour insights et pr√©visions\n\n## üõ†Ô∏è Tech Stack\n\n- **Frontend**: React 19, TailwindCSS, Shadcn/UI, Framer Motion\n- **Backend**: FastAPI (Python)\n- **Database**: MongoDB\n- **AI**: DeepSeek API (optionnel)\n\n## üì¶ Installation locale\n\n### Backend\n```bash\ncd backend\npip install -r requirements.txt\nuvicorn server:app --reload --port 8001\n```\n\n### Frontend\n```bash\ncd frontend\nyarn install\nyarn start\n```\n\n## üöÄ D√©ploiement\n\nVoir le fichier `DEPLOYMENT_GUIDE.md` pour les instructions compl√®tes.\n\n## üîê Identifiants Admin\n\n- **Username**: admin\n- **Password**: chezloman2024\n\n## üì± Contact\n\n- **T√©l√©phone**: +225 07 09 508 819\n- **WhatsApp**: 2250709508819\n- **Adresse**: Yopougon Abobo Doum√© ‚Äî Basile Boli, Abidjan\n\n## üìÑ Licence\n\nPowered by AI'vory / Armando Anzan\n","path":null,"size_bytes":1558,"size_tokens":null},"frontend/src/components/MenuCard.jsx":{"content":"import { Button } from \"./ui/button\";\nimport { ExternalLink } from \"lucide-react\";\n\nconst MenuCard = ({ item }) => {\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('fr-FR').format(price);\n  };\n\n  const handleOrder = () => {\n    const message = `Bonjour, je souhaite commander: ${item.name} (${formatPrice(item.price)} FCFA)`;\n    window.open(`https://wa.me/2250709508819?text=${encodeURIComponent(message)}`, '_blank');\n  };\n\n  return (\n    <div \n      className=\"menu-item-luxury group\"\n      data-testid={`menu-card-${item.id}`}\n    >\n      <div className=\"relative h-52 overflow-hidden\">\n        <img \n          src={item.image_url} \n          alt={item.name}\n          className=\"w-full h-full object-cover img-luxury\"\n          loading=\"lazy\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-[#05100D] via-transparent to-transparent\"></div>\n        {item.is_featured && (\n          <span className=\"absolute top-4 left-4 bg-[#D4AF37] text-[#0F2E24] text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider\">\n            Signature\n          </span>\n        )}\n      </div>\n      \n      <div className=\"p-6\">\n        <div className=\"flex justify-between items-start mb-3\">\n          <div>\n            <span className=\"text-[#D4AF37] text-[10px] font-semibold uppercase tracking-[0.15em]\">\n              {item.category}\n            </span>\n            <h3 className=\"text-lg font-medium text-[#F9F7F2] mt-1\">\n              {item.name}\n            </h3>\n          </div>\n          <span className=\"price-gold text-xl\">\n            {formatPrice(item.price)} <span className=\"text-sm\">F</span>\n          </span>\n        </div>\n        \n        <p className=\"text-sm text-[#A3B1AD] mb-5 line-clamp-2 leading-relaxed\">\n          {item.description}\n        </p>\n        \n        <Button \n          onClick={handleOrder}\n          className=\"w-full bg-transparent border border-[#D4AF37]/30 text-[#D4AF37] hover:bg-[#D4AF37] hover:text-[#0F2E24] rounded-full transition-all duration-400\"\n          data-testid={`order-btn-${item.id}`}\n        >\n          Commander\n          <ExternalLink size={14} className=\"ml-2\" />\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default MenuCard;\n","path":null,"size_bytes":2249,"size_tokens":null},"frontend/src/components/ui/navigation-menu.jsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}>\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props} />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}>\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\" />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props} />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props} />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}>\n    <div\n      className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":4299,"size_tokens":null},"frontend/src/components/ui/switch.jsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}>\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0\"\n      )} />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1025,"size_tokens":null},"frontend/src/components/ui/popover.jsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = React.forwardRef(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props} />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\n","path":null,"size_bytes":1216,"size_tokens":null},"frontend/src/components/Navbar.jsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { Menu, X, Phone, Sun, Moon } from \"lucide-react\";\nimport { useTheme } from \"../hooks/useTheme\";\n\nconst Navbar = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [scrolled, setScrolled] = useState(false);\n  const location = useLocation();\n  const { theme, toggleTheme } = useTheme();\n\n  const navLinks = [\n    { path: \"/\", label: \"Accueil\" },\n    { path: \"/menu\", label: \"La Carte\" },\n    { path: \"/about\", label: \"Notre Histoire\" },\n    { path: \"/gallery\", label: \"Galerie\" },\n    { path: \"/contact\", label: \"Contact\" },\n    { path: \"/admin\", label: \"Admin\" },\n  ];\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setScrolled(window.scrollY > 50);\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  const isActive = (path) => location.pathname === path;\n\n  return (\n    <nav \n      className={`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${\n        scrolled \n          ? \"py-3 nav-luxury shadow-2xl\" \n          : \"py-6 bg-transparent\"\n      }`}\n      data-testid=\"navbar\"\n    >\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n        <div className=\"flex items-center justify-between\">\n          {/* Logo */}\n          <Link to=\"/\" className=\"relative z-10\" data-testid=\"logo-link\">\n            <img \n              src=\"https://customer-assets.emergentagent.com/job_chezloman/artifacts/dn3n27hs_Design%20sans%20titre.png\" \n              alt=\"Chez Loman\" \n              className=\"h-16 w-16 object-cover rounded-full border-2 border-[#D4AF37]/30\"\n            />\n          </Link>\n\n          {/* Desktop Navigation */}\n          <div className=\"hidden md:flex items-center gap-10\">\n            {navLinks.map((link) => (\n              <Link\n                key={link.path}\n                to={link.path}\n                className={`nav-link text-sm font-medium tracking-wide uppercase ${\n                  isActive(link.path) ? \"active text-[#D4AF37]\" : \"\"\n                }`}\n                data-testid={`nav-${link.label.toLowerCase().replace(\" \", \"-\")}`}\n              >\n                {link.label}\n              </Link>\n            ))}\n          </div>\n\n          {/* CTA */}\n          <div className=\"hidden md:flex items-center gap-6\">\n            <button\n              onClick={toggleTheme}\n              className=\"p-2 rounded-full transition-all duration-300 hover:bg-[#D4AF37]/20 text-[#A3B1AD] hover:text-[#D4AF37]\"\n              aria-label=\"Toggle theme\"\n            >\n              {theme === \"dark\" ? <Sun size={18} /> : <Moon size={18} />}\n            </button>\n            <a \n              href=\"tel:+2250709508819\" \n              className=\"flex items-center gap-2 text-[#A3B1AD] hover:text-[#D4AF37] transition-colors duration-300\"\n              data-testid=\"phone-link\"\n            >\n              <Phone size={16} />\n              <span className=\"text-sm\">07 09 508 819</span>\n            </a>\n            <a\n              href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite r√©server une table\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"btn-gold text-sm\"\n              data-testid=\"reserve-cta\"\n            >\n              R√©server\n            </a>\n          </div>\n\n          {/* Mobile Menu Button */}\n          <button\n            className=\"md:hidden p-2 text-[#F9F7F2]\"\n            onClick={() => setIsOpen(!isOpen)}\n            data-testid=\"mobile-menu-btn\"\n          >\n            {isOpen ? <X size={28} /> : <Menu size={28} />}\n          </button>\n        </div>\n\n        {/* Mobile Navigation */}\n        {isOpen && (\n          <div \n            className=\"md:hidden fixed inset-0 top-0 bg-[#05100D]/98 backdrop-blur-xl z-40 flex flex-col items-center justify-center\"\n            data-testid=\"mobile-menu\"\n          >\n            <button\n              className=\"absolute top-6 right-6 p-2 text-[#F9F7F2]\"\n              onClick={() => setIsOpen(false)}\n            >\n              <X size={28} />\n            </button>\n            <div className=\"flex flex-col items-center gap-8\">\n              {navLinks.map((link) => (\n                <Link\n                  key={link.path}\n                  to={link.path}\n                  onClick={() => setIsOpen(false)}\n                  className={`text-2xl font-light tracking-wide ${\n                    isActive(link.path) ? \"text-[#D4AF37]\" : \"text-[#F9F7F2]\"\n                  }`}\n                >\n                  {link.label}\n                </Link>\n              ))}\n              <button\n                onClick={toggleTheme}\n                className=\"mt-4 p-3 rounded-full bg-white/10 text-[#D4AF37] hover:bg-[#D4AF37]/20 transition-all duration-300\"\n                aria-label=\"Toggle theme\"\n              >\n                {theme === \"dark\" ? <Sun size={22} /> : <Moon size={22} />}\n              </button>\n              <a\n                href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite r√©server une table\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"mt-4 btn-gold\"\n              >\n                R√©server une Table\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n","path":null,"size_bytes":5410,"size_tokens":null},"frontend/src/App.css":{"content":"/* Chez Loman Luxury Styles */\n\n/* Theme backgrounds */\n.theme-bg {\n  background-color: #05100D;\n}\n\n.light-mode .theme-bg {\n  background-color: #F9F7F2;\n}\n\n/* Hero Section */\n.hero-overlay {\n  background: linear-gradient(to bottom, rgba(5, 16, 13, 0.4), rgba(5, 16, 13, 0.95));\n}\n\n/* Card hover effects */\n.luxury-card {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(255, 255, 255, 0.05);\n  transition: background-color 0.5s ease, border-color 0.5s ease, transform 0.5s ease;\n}\n\n.luxury-card:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(212, 175, 55, 0.3);\n  transform: translateY(-4px);\n}\n\n/* Image styles */\n.img-luxury {\n  transition: transform 0.7s ease;\n}\n\n.img-luxury:hover {\n  transform: scale(1.03);\n}\n\n/* Button styles */\n.btn-gold {\n  background: #D4AF37;\n  color: #0F2E24;\n  padding: 1rem 2.5rem;\n  border-radius: 9999px;\n  font-weight: 600;\n  letter-spacing: 0.05em;\n  transition: background-color 0.4s ease, transform 0.3s ease, box-shadow 0.4s ease;\n  box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);\n}\n\n.btn-gold:hover {\n  background: #F9F7F2;\n  transform: translateY(-2px);\n  box-shadow: 0 0 30px rgba(212, 175, 55, 0.4);\n}\n\n.btn-outline-gold {\n  background: transparent;\n  color: #D4AF37;\n  padding: 1rem 2.5rem;\n  border-radius: 9999px;\n  font-weight: 500;\n  letter-spacing: 0.05em;\n  border: 1px solid rgba(212, 175, 55, 0.5);\n  transition: background-color 0.4s ease, color 0.4s ease, border-color 0.4s ease;\n}\n\n.btn-outline-gold:hover {\n  background: #D4AF37;\n  color: #0F2E24;\n  border-color: #D4AF37;\n}\n\n/* Navigation */\n.nav-luxury {\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  background: rgba(5, 16, 13, 0.7);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n}\n\n.nav-link {\n  color: rgba(249, 247, 242, 0.7);\n  transition: color 0.3s ease;\n  position: relative;\n}\n\n.nav-link:hover,\n.nav-link.active {\n  color: #D4AF37;\n}\n\n.nav-link::after {\n  content: '';\n  position: absolute;\n  bottom: -4px;\n  left: 0;\n  width: 0;\n  height: 1px;\n  background: #D4AF37;\n  transition: width 0.3s ease;\n}\n\n.nav-link:hover::after,\n.nav-link.active::after {\n  width: 100%;\n}\n\n/* Section divider */\n.divider-gold {\n  width: 80px;\n  height: 1px;\n  background: linear-gradient(90deg, transparent, #D4AF37, transparent);\n}\n\n/* Menu item */\n.menu-item-luxury {\n  background: rgba(26, 77, 62, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.05);\n  border-radius: 1rem;\n  overflow: hidden;\n  transition: border-color 0.5s ease, box-shadow 0.5s ease;\n}\n\n.menu-item-luxury:hover {\n  border-color: rgba(212, 175, 55, 0.3);\n  box-shadow: 0 0 30px rgba(212, 175, 55, 0.1);\n}\n\n/* Price tag */\n.price-gold {\n  color: #D4AF37;\n  font-family: 'Playfair Display', serif;\n  font-style: italic;\n}\n\n/* WhatsApp Button */\n.whatsapp-luxury {\n  background: linear-gradient(135deg, #25D366, #128C7E);\n  box-shadow: 0 8px 32px rgba(37, 211, 102, 0.3);\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.whatsapp-luxury:hover {\n  transform: scale(1.1) translateY(-2px);\n  box-shadow: 0 12px 40px rgba(37, 211, 102, 0.5);\n}\n\n/* Gallery masonry */\n.gallery-item-luxury {\n  position: relative;\n  overflow: hidden;\n  border-radius: 0.75rem;\n}\n\n.gallery-item-luxury::after {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(to top, rgba(5, 16, 13, 0.8), transparent 50%);\n  opacity: 0;\n  transition: opacity 0.4s ease;\n}\n\n.gallery-item-luxury:hover::after {\n  opacity: 1;\n}\n\n/* Form inputs luxury */\n.input-luxury {\n  background: rgba(26, 77, 62, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  color: #F9F7F2;\n  transition: border-color 0.3s ease, box-shadow 0.3s ease;\n}\n\n.input-luxury:focus {\n  border-color: rgba(212, 175, 55, 0.5);\n  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);\n  outline: none;\n}\n\n/* Star rating gold */\n.star-gold {\n  color: #D4AF37;\n}\n\n/* Bento grid */\n.bento-luxury {\n  display: grid;\n  gap: 1.5rem;\n}\n\n@media (min-width: 768px) {\n  .bento-luxury {\n    grid-template-columns: repeat(2, 1fr);\n    grid-auto-rows: minmax(200px, auto);\n  }\n  \n  .bento-luxury .bento-large {\n    grid-column: span 2;\n  }\n  \n  .bento-luxury .bento-tall {\n    grid-row: span 2;\n  }\n}\n\n@media (min-width: 1024px) {\n  .bento-luxury {\n    grid-template-columns: repeat(3, 1fr);\n  }\n  \n  .bento-luxury .bento-large {\n    grid-column: span 2;\n  }\n}\n\n/* Reveal animations */\n.reveal-up {\n  opacity: 0;\n  transform: translateY(30px);\n}\n\n.reveal-up.visible {\n  opacity: 1;\n  transform: translateY(0);\n  transition: opacity 0.8s ease, transform 0.8s ease;\n}\n\n/* ==================== LIGHT MODE OVERRIDES ==================== */\n\nhtml.light-mode,\nhtml.light-mode body {\n  background-color: #F9F7F2;\n  color: #1a1a1a;\n}\n\n.light-mode .nav-luxury {\n  background: rgba(249, 247, 242, 0.85);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n\n.light-mode .nav-link {\n  color: rgba(26, 26, 26, 0.7);\n}\n\n.light-mode .luxury-card {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\n}\n\n.light-mode .luxury-card:hover {\n  background: rgba(255, 255, 255, 0.95);\n  border-color: rgba(212, 175, 55, 0.4);\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n}\n\n.light-mode .menu-item-luxury {\n  background: rgba(255, 255, 255, 0.9);\n  border-color: rgba(0, 0, 0, 0.06);\n}\n\n.light-mode .menu-item-luxury:hover {\n  border-color: rgba(212, 175, 55, 0.4);\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n}\n\n.light-mode .input-luxury {\n  background: rgba(255, 255, 255, 0.9);\n  border-color: rgba(0, 0, 0, 0.15);\n  color: #1a1a1a;\n}\n\n.light-mode .btn-gold:hover {\n  background: #0F2E24;\n  color: #F9F7F2;\n}\n\n.light-mode .gallery-item-luxury::after {\n  background: linear-gradient(to top, rgba(249, 247, 242, 0.8), transparent 50%);\n}\n\n.light-mode footer {\n  background-color: #0F2E24 !important;\n}\n\n/* Light mode - Text color overrides using CSS variables approach */\n.light-mode [class*=\"bg-[#05100D]\"]:not(footer):not(footer *):not(nav *):not(.hero-overlay *) {\n  background-color: #F9F7F2 !important;\n}\n\n.light-mode [class*=\"text-[#F9F7F2]\"]:not(footer *):not(nav *):not(.hero-overlay *):not([class*=\"btn-gold\"]) {\n  color: #1a1a1a !important;\n}\n\n.light-mode [class*=\"text-[#A3B1AD]\"]:not(footer *):not(nav *) {\n  color: #666 !important;\n}\n\n.light-mode [class*=\"bg-[#0F2E24]\"]:not(footer):not(footer *):not(nav *) {\n  background-color: #e8e5de !important;\n}\n\n.light-mode [class*=\"bg-[#1A4D3E]\"]:not(footer *):not(nav *) {\n  background-color: #1A4D3E !important;\n}\n\n.light-mode [class*=\"border-white/\"]:not(footer *):not(nav *) {\n  border-color: rgba(0, 0, 0, 0.08) !important;\n}\n\n.light-mode [class*=\"bg-white/5\"]:not(footer *):not(nav *),\n.light-mode [class*=\"bg-white/3\"]:not(footer *):not(nav *) {\n  background-color: rgba(0, 0, 0, 0.03) !important;\n}\n\n.light-mode [class*=\"bg-white/10\"]:not(footer *):not(nav *) {\n  background-color: rgba(0, 0, 0, 0.06) !important;\n}\n\n/* Light mode scrollbar */\n.light-mode ::-webkit-scrollbar-track {\n  background: #F9F7F2;\n}\n\n.light-mode ::-webkit-scrollbar-thumb {\n  background: #D4AF37;\n}\n\n/* Light mode - Section backgrounds */\n.light-mode section[class*=\"bg-[#05100D]\"] {\n  background-color: #F9F7F2 !important;\n}\n\n.light-mode section[class*=\"bg-[#0A1F19]\"],\n.light-mode div[class*=\"bg-[#0A1F19]\"] {\n  background-color: #f0ede6 !important;\n}\n\n/* Light mode mobile menu */\n.light-mode [class*=\"bg-[#05100D]/98\"] {\n  background-color: rgba(249, 247, 242, 0.98) !important;\n}\n\n.light-mode [class*=\"bg-[#05100D]/98\"] a,\n.light-mode [class*=\"bg-[#05100D]/98\"] button {\n  color: #1a1a1a;\n}\n\n/* Light mode - select/option elements */\n.light-mode select option {\n  background-color: #F9F7F2 !important;\n  color: #1a1a1a !important;\n}\n","path":null,"size_bytes":7692,"size_tokens":null},"frontend/src/pages/MenuPage.jsx":{"content":"import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { API } from \"../App\";\nimport MenuCard from \"../components/MenuCard\";\nimport { Button } from \"../components/ui/button\";\nimport { motion } from \"framer-motion\";\n\nconst MenuPage = () => {\n  const [menuItems, setMenuItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [activeCategory, setActiveCategory] = useState(\"all\");\n\n  const categories = [\n    { id: \"all\", label: \"Tous les Plats\" },\n    { id: \"Plats Ivoiriens\", label: \"Plats Ivoiriens\" },\n    { id: \"Grillades\", label: \"Grillades\" },\n    { id: \"Sp√©cialit√©s\", label: \"Sp√©cialit√©s\" },\n    { id: \"Boissons\", label: \"Boissons\" },\n  ];\n\n  useEffect(() => {\n    const fetchMenu = async () => {\n      try {\n        const response = await axios.get(`${API}/menu`);\n        setMenuItems(response.data);\n      } catch (error) {\n        console.error(\"Error fetching menu:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchMenu();\n  }, []);\n\n  const filteredItems = activeCategory === \"all\" \n    ? menuItems \n    : menuItems.filter(item => item.category === activeCategory);\n\n  return (\n    <div className=\"min-h-screen bg-[#05100D] pt-32 pb-24\" data-testid=\"menu-page\">\n      {/* Header */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 mb-16\">\n        <motion.div \n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.8 }}\n          className=\"max-w-2xl\"\n        >\n          <span className=\"text-[#D4AF37] text-xs font-semibold uppercase tracking-[0.3em] mb-4 block\">\n            Notre Carte\n          </span>\n          <h1 className=\"text-5xl md:text-6xl text-[#F9F7F2] mb-4\">\n            La Carte\n          </h1>\n          <div className=\"divider-gold mb-6\"></div>\n          <p className=\"text-lg text-[#A3B1AD] leading-relaxed\">\n            Des plats authentiques ivoiriens pr√©par√©s avec des ingr√©dients frais, \n            s√©lectionn√©s avec soin pour vous offrir une exp√©rience culinaire d'exception.\n          </p>\n        </motion.div>\n      </div>\n\n      {/* Category Filters */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 mb-12\">\n        <div className=\"flex flex-wrap gap-3\">\n          {categories.map((cat) => (\n            <button\n              key={cat.id}\n              onClick={() => setActiveCategory(cat.id)}\n              className={`px-6 py-3 rounded-full text-sm font-medium tracking-wide transition-all duration-400 ${\n                activeCategory === cat.id\n                  ? \"bg-[#D4AF37] text-[#0F2E24]\"\n                  : \"bg-white/5 text-[#A3B1AD] border border-white/10 hover:border-[#D4AF37]/50 hover:text-[#D4AF37]\"\n              }`}\n              data-testid={`category-${cat.id}`}\n            >\n              {cat.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Menu Grid */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12\">\n        {loading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {[1, 2, 3, 4, 5, 6].map((i) => (\n              <div key={i} className=\"h-96 bg-white/5 rounded-xl animate-pulse\"></div>\n            ))}\n          </div>\n        ) : filteredItems.length === 0 ? (\n          <div className=\"text-center py-20\">\n            <p className=\"text-[#A3B1AD] text-lg\">Aucun plat dans cette cat√©gorie</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {filteredItems.map((item, index) => (\n              <motion.div\n                key={item.id}\n                initial={{ opacity: 0, y: 30 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.5, delay: index * 0.05 }}\n              >\n                <MenuCard item={item} />\n              </motion.div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* CTA */}\n      <div className=\"max-w-7xl mx-auto px-6 md:px-12 mt-24\">\n        <div className=\"glass rounded-3xl p-12 md:p-16 text-center gold-border\">\n          <h2 className=\"text-3xl md:text-4xl text-[#F9F7F2] mb-4\">\n            Envie de Commander ?\n          </h2>\n          <p className=\"text-[#A3B1AD] mb-8 max-w-xl mx-auto\">\n            Contactez-nous directement sur WhatsApp pour passer votre commande rapidement\n          </p>\n          <a\n            href=\"https://wa.me/2250709508819?text=Bonjour, je souhaite passer une commande\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            <Button className=\"btn-gold text-lg\">\n              Commander sur WhatsApp\n            </Button>\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MenuPage;\n","path":null,"size_bytes":4773,"size_tokens":null},"frontend/src/components/ScrollToTop.jsx":{"content":"import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [pathname]);\n\n  return null;\n};\n\nexport default ScrollToTop;\n","path":null,"size_bytes":290,"size_tokens":null},"pyproject.toml":{"content":"[project]\nname = \"chez-loman\"\nversion = \"1.0.0\"\ndescription = \"Chez Loman - Restaurant Ivoirien\"\nrequires-python = \">=3.11\"\ndependencies = []\n\n[tool.poetry]\npackage-mode = false\n","path":null,"size_bytes":178,"size_tokens":null},"frontend/src/components/ui/context-menu.jsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}>\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props} />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props} />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props} />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}>\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}>\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-4 w-4 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props} />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props} />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)}\n      {...props} />\n  );\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":6175,"size_tokens":null},"frontend/src/components/ui/aspect-ratio.jsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"backend/server.py":{"content":"from fastapi import FastAPI, APIRouter, HTTPException, UploadFile, File, Form\nfrom fastapi.responses import StreamingResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom starlette.staticfiles import StaticFiles\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport io\nimport csv\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, ConfigDict\nfrom typing import List, Optional\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nimport base64\nimport shutil\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / '.env')\n\n# Create uploads directory\nUPLOADS_DIR = ROOT_DIR / \"uploads\"\nUPLOADS_DIR.mkdir(exist_ok=True)\n\n# MongoDB connection\nmongo_url = os.environ.get('MONGO_URL', '').strip().replace('\\\\n', '').replace('\\n', '')\nif not mongo_url:\n    logging.warning(\"MONGO_URL not set - using default local MongoDB\")\n    mongo_url = 'mongodb://localhost:27017'\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ.get('DB_NAME', 'chezloman')]\n\n# Create the main app without a prefix\napp = FastAPI()\n\n# Create a router with the /api prefix\napi_router = APIRouter(prefix=\"/api\")\n\n# ==================== MODELS ====================\n\nclass MenuItem(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    name: str\n    description: str\n    price: int\n    category: str\n    image_url: str\n    is_featured: bool = False\n    is_available: bool = True\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass MenuItemCreate(BaseModel):\n    name: str\n    description: str\n    price: int\n    category: str\n    image_url: str\n    is_featured: bool = False\n\nclass DailyMenu(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    date: str  # Format: YYYY-MM-DD\n    items: List[str]  # List of menu item names or descriptions\n    special_message: Optional[str] = None\n    is_active: bool = True\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass DailyMenuCreate(BaseModel):\n    date: str\n    items: List[str]\n    special_message: Optional[str] = None\n\nclass DailyMenuUpdate(BaseModel):\n    items: Optional[List[str]] = None\n    special_message: Optional[str] = None\n    is_active: Optional[bool] = None\n\nclass GalleryPhoto(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    image_url: str\n    caption: Optional[str] = None\n    category: str = \"restaurant\"  # restaurant, plats, clients, ambiance\n    is_featured: bool = False\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass GalleryPhotoCreate(BaseModel):\n    image_url: str\n    caption: Optional[str] = None\n    category: str = \"restaurant\"\n    is_featured: bool = False\n\nclass Review(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    author: str\n    rating: int = 5\n    comment: str\n    is_approved: bool = False\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass ReviewCreate(BaseModel):\n    author: str\n    comment: str\n    rating: int = 5\n\nclass Video(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    title: str\n    video_url: str  # YouTube, Facebook, or direct URL\n    video_type: str = \"youtube\"  # youtube, facebook, direct\n    description: Optional[str] = None\n    is_featured: bool = False\n    is_active: bool = True\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass VideoCreate(BaseModel):\n    title: str\n    video_url: str\n    video_type: str = \"youtube\"\n    description: Optional[str] = None\n    is_featured: bool = False\n\nclass Promotion(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    title: str\n    description: str\n    image_url: Optional[str] = None\n    promo_type: str = \"banner\"  # banner, popup, announcement\n    start_date: Optional[str] = None\n    end_date: Optional[str] = None\n    is_active: bool = True\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass PromotionCreate(BaseModel):\n    title: str\n    description: str\n    image_url: Optional[str] = None\n    promo_type: str = \"banner\"\n    start_date: Optional[str] = None\n    end_date: Optional[str] = None\n\nclass PromotionUpdate(BaseModel):\n    title: Optional[str] = None\n    description: Optional[str] = None\n    image_url: Optional[str] = None\n    is_active: Optional[bool] = None\n\nclass HeroContent(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    title_line1: str = \"Ici c'est manger\"\n    title_line2: str = \"bien hein\"\n    description: str = \"Une cuisine ivoirienne authentique, sublim√©e par notre savoir-faire. D√©couvrez les saveurs du pays dans un cadre raffin√©.\"\n    background_image: str = \"https://customer-assets.emergentagent.com/job_loman-restaurant/artifacts/jde9y3pb_chl.jpg\"\n    updated_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass HeroContentUpdate(BaseModel):\n    title_line1: Optional[str] = None\n    title_line2: Optional[str] = None\n    description: Optional[str] = None\n    background_image: Optional[str] = None\n\n# ==================== DASHBOARD MODELS ====================\n\nclass Transaction(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    type: str  # \"revenu\" ou \"depense\"\n    category: str  # ingredients, personnel, loyer, utilities, marketing, ventes, etc.\n    amount: int  # en FCFA\n    description: str\n    date: str  # Format: YYYY-MM-DD\n    payment_method: Optional[str] = None  # cash, mobile_money, carte\n    reference: Optional[str] = None\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass TransactionCreate(BaseModel):\n    type: str\n    category: str\n    amount: int\n    description: str\n    date: Optional[str] = None\n    payment_method: Optional[str] = None\n    reference: Optional[str] = None\n\nclass Order(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    order_number: str\n    customer_name: Optional[str] = None\n    customer_phone: Optional[str] = None\n    customer_address: Optional[str] = None\n    items: List[dict]  # [{name, quantity, price}]\n    total: int\n    delivery_fee: int = 0\n    platform_fee: int = 0\n    status: str = \"en_attente\"  # en_attente, en_preparation, pret, en_livraison, livre, annule\n    order_type: str = \"sur_place\"  # sur_place, emporter, glovo, yango, livraison_directe\n    platform: Optional[str] = None  # glovo, yango, null for direct\n    delivery_person: Optional[str] = None\n    notes: Optional[str] = None\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass OrderCreate(BaseModel):\n    customer_name: Optional[str] = None\n    customer_phone: Optional[str] = None\n    customer_address: Optional[str] = None\n    items: List[dict]\n    total: int\n    delivery_fee: int = 0\n    platform_fee: int = 0\n    order_type: str = \"sur_place\"\n    platform: Optional[str] = None\n    delivery_person: Optional[str] = None\n    notes: Optional[str] = None\n\nclass Notification(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    type: str  # commande, alerte, rappel, info\n    title: str\n    message: str\n    priority: str = \"normale\"  # basse, normale, haute, urgente\n    is_read: bool = False\n    action_url: Optional[str] = None\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass StockItem(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    name: str\n    category: str  # viandes, poissons, legumes, boissons, epices, etc.\n    quantity: float\n    unit: str  # kg, L, unites\n    min_quantity: float  # seuil d'alerte\n    price_per_unit: int\n    supplier: Optional[str] = None\n    last_restock: Optional[str] = None\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass StockItemCreate(BaseModel):\n    name: str\n    category: str\n    quantity: float\n    unit: str\n    min_quantity: float\n    price_per_unit: int\n    supplier: Optional[str] = None\n\nclass Reservation(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    customer_name: str\n    customer_phone: str\n    date: str\n    time: str\n    guests: int\n    notes: Optional[str] = None\n    status: str = \"confirmee\"  # en_attente, confirmee, annulee, terminee\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass ReservationCreate(BaseModel):\n    customer_name: str\n    customer_phone: str\n    date: str\n    time: str\n    guests: int\n    notes: Optional[str] = None\n\nclass CashSale(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    items: List[dict]\n    total: int\n    payment_method: str\n    note: Optional[str] = None\n    sale_date: str = Field(default_factory=lambda: datetime.now(timezone.utc).strftime(\"%Y-%m-%d\"))\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\nclass CashSaleCreate(BaseModel):\n    items: List[dict]  # [{name: str, quantity: int, price: int}]\n    total: int\n    payment_method: str  # \"especes\" or \"mobile_money\"\n    note: Optional[str] = None\n\nclass AIMessage(BaseModel):\n    message: str\n    context: Optional[dict] = None\n\nclass AdminLogin(BaseModel):\n    username: str\n    password: str\n\nclass AdminUser(BaseModel):\n    model_config = ConfigDict(extra=\"ignore\")\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()))\n    username: str\n    password_hash: str\n    is_active: bool = True\n    created_at: datetime = Field(default_factory=lambda: datetime.now(timezone.utc))\n\n# Admin credentials - Default admin account\nADMIN_USERNAME = \"admin\"\nADMIN_PASSWORD = \"chezloman2024\"\n\nclass RestaurantInfo(BaseModel):\n    name: str = \"Chez Loman\"\n    slogan: str = \"Ici c'est manger bien hein üòã\"\n    description: str = \"Cuisine ivoirienne üá®üáÆ & africaine ‚Äî Go√ªt du pays + niveau haut üëåüèæ\"\n    phone: str = \"+225 07 09 508 819\"\n    whatsapp: str = \"2250709508819\"\n    address: str = \"Yopougon Abobo Doum√© ‚Äî Basile Boli\"\n    hours: dict = {\n        \"dimanche\": \"13:00‚Äì22:00\",\n        \"lundi\": \"Ferm√©\",\n        \"mardi\": \"11:00‚Äì22:00\",\n        \"mercredi\": \"11:00‚Äì22:00\",\n        \"jeudi\": \"11:00‚Äì22:00\",\n        \"vendredi\": \"11:00‚Äì22:00\",\n        \"samedi\": \"11:00‚Äì22:00\"\n    }\n\n# ==================== HELPER FUNCTIONS ====================\n\ndef serialize_datetime(obj):\n    \"\"\"Convert datetime to ISO string for MongoDB storage\"\"\"\n    if isinstance(obj.get('created_at'), datetime):\n        obj['created_at'] = obj['created_at'].isoformat()\n    return obj\n\ndef deserialize_datetime(obj):\n    \"\"\"Convert ISO string back to datetime\"\"\"\n    if isinstance(obj.get('created_at'), str):\n        obj['created_at'] = datetime.fromisoformat(obj['created_at'])\n    return obj\n\n# ==================== ROUTES ====================\n\n@api_router.get(\"/\")\nasync def root():\n    return {\"message\": \"Bienvenue chez Loman API\"}\n\n@api_router.get(\"/info\", response_model=RestaurantInfo)\nasync def get_restaurant_info():\n    return RestaurantInfo()\n\n# ---- Admin Authentication ----\n@api_router.post(\"/admin/login\")\nasync def admin_login(login: AdminLogin):\n    if login.username == ADMIN_USERNAME and login.password == ADMIN_PASSWORD:\n        # Generate a simple token (in production, use JWT)\n        token = str(uuid.uuid4())\n        # Store token in database\n        await db.admin_sessions.delete_many({})  # Clear old sessions\n        await db.admin_sessions.insert_one({\n            \"token\": token,\n            \"created_at\": datetime.now(timezone.utc).isoformat(),\n            \"expires_at\": (datetime.now(timezone.utc) + timedelta(hours=24)).isoformat()\n        })\n        return {\"success\": True, \"token\": token, \"message\": \"Connexion r√©ussie\"}\n    else:\n        raise HTTPException(status_code=401, detail=\"Nom d'utilisateur ou mot de passe incorrect\")\n\n@api_router.post(\"/admin/verify\")\nasync def verify_admin_token(token: str):\n    session = await db.admin_sessions.find_one({\"token\": token})\n    if session:\n        expires_at = datetime.fromisoformat(session[\"expires_at\"])\n        if datetime.now(timezone.utc) < expires_at:\n            return {\"valid\": True}\n    return {\"valid\": False}\n\n@api_router.post(\"/admin/logout\")\nasync def admin_logout():\n    await db.admin_sessions.delete_many({})\n    return {\"success\": True, \"message\": \"D√©connexion r√©ussie\"}\n\n# ---- File Upload ----\n@api_router.post(\"/upload\")\nasync def upload_file(file: UploadFile = File(...)):\n    # Validate file type\n    allowed_types = [\"image/jpeg\", \"image/png\", \"image/gif\", \"image/webp\", \"video/mp4\", \"video/webm\"]\n    if file.content_type not in allowed_types:\n        raise HTTPException(status_code=400, detail=\"Type de fichier non autoris√©. Utilisez JPG, PNG, GIF, WEBP, MP4 ou WEBM\")\n    \n    # Generate unique filename\n    file_ext = file.filename.split(\".\")[-1] if \".\" in file.filename else \"jpg\"\n    unique_filename = f\"{uuid.uuid4()}.{file_ext}\"\n    file_path = UPLOADS_DIR / unique_filename\n    \n    # Save file\n    try:\n        with open(file_path, \"wb\") as buffer:\n            shutil.copyfileobj(file.file, buffer)\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"Erreur lors de l'upload: {str(e)}\")\n    \n    # Return the URL to access the file\n    file_url = f\"/api/uploads/{unique_filename}\"\n    return {\"success\": True, \"url\": file_url, \"filename\": unique_filename}\n\n@api_router.get(\"/uploads/{filename}\")\nasync def get_uploaded_file(filename: str):\n    from starlette.responses import FileResponse\n    file_path = UPLOADS_DIR / filename\n    if not file_path.exists():\n        raise HTTPException(status_code=404, detail=\"Fichier non trouv√©\")\n    return FileResponse(file_path)\n\n# ---- Menu Items ----\n@api_router.get(\"/menu\", response_model=List[MenuItem])\nasync def get_menu_items(category: Optional[str] = None):\n    query = {} if not category else {\"category\": category}\n    items = await db.menu_items.find(query, {\"_id\": 0}).to_list(100)\n    for item in items:\n        deserialize_datetime(item)\n    return items\n\n@api_router.get(\"/menu/featured\", response_model=List[MenuItem])\nasync def get_featured_items():\n    items = await db.menu_items.find({\"is_featured\": True}, {\"_id\": 0}).to_list(10)\n    for item in items:\n        deserialize_datetime(item)\n    return items\n\n@api_router.post(\"/menu\", response_model=MenuItem)\nasync def create_menu_item(item: MenuItemCreate):\n    menu_item = MenuItem(**item.model_dump())\n    doc = serialize_datetime(menu_item.model_dump())\n    await db.menu_items.insert_one(doc)\n    return menu_item\n\n@api_router.delete(\"/menu/{item_id}\")\nasync def delete_menu_item(item_id: str):\n    result = await db.menu_items.delete_one({\"id\": item_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Item not found\")\n    return {\"message\": \"Item deleted\"}\n\n# ---- Daily Menu ----\n@api_router.get(\"/daily-menu\", response_model=Optional[DailyMenu])\nasync def get_daily_menu():\n    today = datetime.now(timezone.utc).strftime(\"%Y-%m-%d\")\n    menu = await db.daily_menus.find_one({\"date\": today, \"is_active\": True}, {\"_id\": 0})\n    if menu:\n        deserialize_datetime(menu)\n    return menu\n\n@api_router.get(\"/daily-menus\", response_model=List[DailyMenu])\nasync def get_all_daily_menus():\n    menus = await db.daily_menus.find({}, {\"_id\": 0}).sort(\"date\", -1).to_list(30)\n    for menu in menus:\n        deserialize_datetime(menu)\n    return menus\n\n@api_router.post(\"/daily-menu\", response_model=DailyMenu)\nasync def create_daily_menu(menu: DailyMenuCreate):\n    # Deactivate previous menu for same date\n    await db.daily_menus.update_many({\"date\": menu.date}, {\"$set\": {\"is_active\": False}})\n    daily_menu = DailyMenu(**menu.model_dump())\n    doc = serialize_datetime(daily_menu.model_dump())\n    await db.daily_menus.insert_one(doc)\n    return daily_menu\n\n@api_router.put(\"/daily-menu/{menu_id}\", response_model=DailyMenu)\nasync def update_daily_menu(menu_id: str, update: DailyMenuUpdate):\n    update_dict = {k: v for k, v in update.model_dump().items() if v is not None}\n    if not update_dict:\n        raise HTTPException(status_code=400, detail=\"No fields to update\")\n    result = await db.daily_menus.update_one({\"id\": menu_id}, {\"$set\": update_dict})\n    if result.matched_count == 0:\n        raise HTTPException(status_code=404, detail=\"Menu not found\")\n    updated = await db.daily_menus.find_one({\"id\": menu_id}, {\"_id\": 0})\n    deserialize_datetime(updated)\n    return updated\n\n@api_router.delete(\"/daily-menu/{menu_id}\")\nasync def delete_daily_menu(menu_id: str):\n    result = await db.daily_menus.delete_one({\"id\": menu_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Menu not found\")\n    return {\"message\": \"Menu deleted\"}\n\n# ---- Gallery ----\n@api_router.get(\"/gallery\", response_model=List[GalleryPhoto])\nasync def get_gallery(category: Optional[str] = None):\n    query = {} if not category else {\"category\": category}\n    photos = await db.gallery.find(query, {\"_id\": 0}).sort(\"created_at\", -1).to_list(100)\n    for photo in photos:\n        deserialize_datetime(photo)\n    return photos\n\n@api_router.post(\"/gallery\", response_model=GalleryPhoto)\nasync def add_gallery_photo(photo: GalleryPhotoCreate):\n    gallery_photo = GalleryPhoto(**photo.model_dump())\n    doc = serialize_datetime(gallery_photo.model_dump())\n    await db.gallery.insert_one(doc)\n    return gallery_photo\n\n@api_router.delete(\"/gallery/{photo_id}\")\nasync def delete_gallery_photo(photo_id: str):\n    result = await db.gallery.delete_one({\"id\": photo_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Photo not found\")\n    return {\"message\": \"Photo deleted\"}\n\n# ---- Reviews ----\n@api_router.get(\"/reviews\", response_model=List[Review])\nasync def get_reviews():\n    reviews = await db.reviews.find({\"is_approved\": True}, {\"_id\": 0}).sort(\"created_at\", -1).to_list(50)\n    for review in reviews:\n        deserialize_datetime(review)\n    return reviews\n\n@api_router.post(\"/reviews\", response_model=Review)\nasync def create_review(review: ReviewCreate):\n    new_review = Review(**review.model_dump(), is_approved=False)\n    doc = serialize_datetime(new_review.model_dump())\n    await db.reviews.insert_one(doc)\n    return new_review\n\n@api_router.get(\"/reviews/all\")\nasync def get_all_reviews():\n    reviews = await db.reviews.find({}, {\"_id\": 0}).sort(\"created_at\", -1).to_list(100)\n    for review in reviews:\n        deserialize_datetime(review)\n    return reviews\n\n@api_router.put(\"/reviews/{review_id}/approve\")\nasync def approve_review(review_id: str):\n    result = await db.reviews.update_one({\"id\": review_id}, {\"$set\": {\"is_approved\": True}})\n    if result.modified_count == 0:\n        raise HTTPException(status_code=404, detail=\"Review not found\")\n    return {\"message\": \"Review approved\"}\n\n@api_router.put(\"/reviews/{review_id}/hide\")\nasync def hide_review(review_id: str):\n    result = await db.reviews.update_one({\"id\": review_id}, {\"$set\": {\"is_approved\": False}})\n    if result.modified_count == 0:\n        raise HTTPException(status_code=404, detail=\"Review not found\")\n    return {\"message\": \"Review hidden\"}\n\n@api_router.delete(\"/reviews/{review_id}\")\nasync def delete_review(review_id: str):\n    result = await db.reviews.delete_one({\"id\": review_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Review not found\")\n    return {\"message\": \"Review deleted\"}\n\n# ---- Videos ----\n@api_router.get(\"/videos\", response_model=List[Video])\nasync def get_videos(active_only: bool = False):\n    query = {\"is_active\": True} if active_only else {}\n    videos = await db.videos.find(query, {\"_id\": 0}).sort(\"created_at\", -1).to_list(50)\n    for video in videos:\n        deserialize_datetime(video)\n    return videos\n\n@api_router.post(\"/videos\", response_model=Video)\nasync def create_video(video: VideoCreate):\n    new_video = Video(**video.model_dump())\n    doc = serialize_datetime(new_video.model_dump())\n    await db.videos.insert_one(doc)\n    return new_video\n\n@api_router.put(\"/videos/{video_id}\")\nasync def update_video(video_id: str, is_active: bool):\n    result = await db.videos.update_one({\"id\": video_id}, {\"$set\": {\"is_active\": is_active}})\n    if result.matched_count == 0:\n        raise HTTPException(status_code=404, detail=\"Video not found\")\n    return {\"message\": \"Video updated\"}\n\n@api_router.delete(\"/videos/{video_id}\")\nasync def delete_video(video_id: str):\n    result = await db.videos.delete_one({\"id\": video_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Video not found\")\n    return {\"message\": \"Video deleted\"}\n\n# ---- Promotions ----\n@api_router.get(\"/promotions\", response_model=List[Promotion])\nasync def get_promotions(active_only: bool = False):\n    query = {\"is_active\": True} if active_only else {}\n    promotions = await db.promotions.find(query, {\"_id\": 0}).sort(\"created_at\", -1).to_list(50)\n    for promo in promotions:\n        deserialize_datetime(promo)\n    return promotions\n\n@api_router.post(\"/promotions\", response_model=Promotion)\nasync def create_promotion(promo: PromotionCreate):\n    new_promo = Promotion(**promo.model_dump())\n    doc = serialize_datetime(new_promo.model_dump())\n    await db.promotions.insert_one(doc)\n    return new_promo\n\n@api_router.put(\"/promotions/{promo_id}\", response_model=Promotion)\nasync def update_promotion(promo_id: str, update: PromotionUpdate):\n    update_dict = {k: v for k, v in update.model_dump().items() if v is not None}\n    if not update_dict:\n        raise HTTPException(status_code=400, detail=\"No fields to update\")\n    result = await db.promotions.update_one({\"id\": promo_id}, {\"$set\": update_dict})\n    if result.matched_count == 0:\n        raise HTTPException(status_code=404, detail=\"Promotion not found\")\n    updated = await db.promotions.find_one({\"id\": promo_id}, {\"_id\": 0})\n    deserialize_datetime(updated)\n    return updated\n\n@api_router.delete(\"/promotions/{promo_id}\")\nasync def delete_promotion(promo_id: str):\n    result = await db.promotions.delete_one({\"id\": promo_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Promotion not found\")\n    return {\"message\": \"Promotion deleted\"}\n\n# ---- Hero Content ----\n@api_router.get(\"/hero-content\", response_model=HeroContent)\nasync def get_hero_content():\n    hero = await db.hero_content.find_one({}, {\"_id\": 0})\n    if not hero:\n        # Return default content\n        default_hero = HeroContent()\n        doc = serialize_datetime(default_hero.model_dump())\n        await db.hero_content.insert_one(doc)\n        return default_hero\n    deserialize_datetime(hero)\n    return hero\n\n@api_router.put(\"/hero-content\", response_model=HeroContent)\nasync def update_hero_content(update: HeroContentUpdate):\n    update_dict = {k: v for k, v in update.model_dump().items() if v is not None}\n    if not update_dict:\n        raise HTTPException(status_code=400, detail=\"No fields to update\")\n    \n    update_dict[\"updated_at\"] = datetime.now(timezone.utc).isoformat()\n    \n    # Check if hero content exists\n    existing = await db.hero_content.find_one({})\n    if existing:\n        await db.hero_content.update_one({}, {\"$set\": update_dict})\n    else:\n        # Create new hero content with defaults\n        hero = HeroContent(**update_dict)\n        doc = serialize_datetime(hero.model_dump())\n        await db.hero_content.insert_one(doc)\n    \n    updated = await db.hero_content.find_one({}, {\"_id\": 0})\n    deserialize_datetime(updated)\n    return updated\n\n# ---- Menu Items Management ----\n@api_router.put(\"/menu/{item_id}\", response_model=MenuItem)\nasync def update_menu_item(item_id: str, name: Optional[str] = None, price: Optional[int] = None, \n                           description: Optional[str] = None, is_available: Optional[bool] = None,\n                           is_featured: Optional[bool] = None, image_url: Optional[str] = None):\n    update_dict = {}\n    if name is not None: update_dict[\"name\"] = name\n    if price is not None: update_dict[\"price\"] = price\n    if description is not None: update_dict[\"description\"] = description\n    if is_available is not None: update_dict[\"is_available\"] = is_available\n    if is_featured is not None: update_dict[\"is_featured\"] = is_featured\n    if image_url is not None: update_dict[\"image_url\"] = image_url\n    \n    if not update_dict:\n        raise HTTPException(status_code=400, detail=\"No fields to update\")\n    \n    result = await db.menu_items.update_one({\"id\": item_id}, {\"$set\": update_dict})\n    if result.matched_count == 0:\n        raise HTTPException(status_code=404, detail=\"Menu item not found\")\n    \n    updated = await db.menu_items.find_one({\"id\": item_id}, {\"_id\": 0})\n    deserialize_datetime(updated)\n    return updated\n\n# ---- Seed Data ----\n@api_router.post(\"/seed\")\nasync def seed_data():\n    # Check if data already exists\n    existing = await db.menu_items.count_documents({})\n    if existing > 0:\n        return {\"message\": \"Data already seeded\"}\n    \n    # Seed menu items\n    menu_items = [\n        {\"name\": \"Atti√®k√® Poisson Brais√©\", \"description\": \"Atti√®k√® frais avec poisson brais√© aux √©pices africaines, servi avec piment et oignons\", \"price\": 3500, \"category\": \"Plats Ivoiriens\", \"image_url\": \"https://images.unsplash.com/photo-1602022131768-033a8796e78d?w=400\", \"is_featured\": True},\n        {\"name\": \"Poulet Brais√©\", \"description\": \"Poulet fermier brais√© √† la perfection, marin√© aux √©pices secr√®tes du chef\", \"price\": 4000, \"category\": \"Grillades\", \"image_url\": \"https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=400\", \"is_featured\": True},\n        {\"name\": \"Foutou Banane Sauce Graine\", \"description\": \"Foutou banane traditionnel avec sauce graine de palme et viande\", \"price\": 3000, \"category\": \"Plats Ivoiriens\", \"image_url\": \"https://images.unsplash.com/photo-1604329760661-e71dc83f8f26?w=400\", \"is_featured\": True},\n        {\"name\": \"Alloco Poisson\", \"description\": \"Bananes plantains frites dor√©es avec poisson frit croustillant\", \"price\": 2500, \"category\": \"Plats Ivoiriens\", \"image_url\": \"https://images.unsplash.com/photo-1632778149955-e80f8ceca2e8?w=400\", \"is_featured\": False},\n        {\"name\": \"Garba\", \"description\": \"Atti√©k√© avec thon frit, oignons et piment - le classique ivoirien\", \"price\": 1500, \"category\": \"Plats Ivoiriens\", \"image_url\": \"https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400\", \"is_featured\": False},\n        {\"name\": \"C√¥tes de Porc Brais√©es\", \"description\": \"C√¥tes de porc tendres brais√©es avec sauce sp√©ciale maison\", \"price\": 5000, \"category\": \"Grillades\", \"image_url\": \"https://images.unsplash.com/photo-1544025162-d76694265947?w=400\", \"is_featured\": True},\n        {\"name\": \"Brochettes de B≈ìuf\", \"description\": \"Brochettes de b≈ìuf marin√©es, grill√©es au feu de bois\", \"price\": 3500, \"category\": \"Grillades\", \"image_url\": \"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400\", \"is_featured\": False},\n        {\"name\": \"Tilapia Brais√© Entier\", \"description\": \"Tilapia entier brais√© aux herbes et √©pices africaines\", \"price\": 6000, \"category\": \"Grillades\", \"image_url\": \"https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=400\", \"is_featured\": True},\n        {\"name\": \"Bissap\", \"description\": \"Jus d'hibiscus frais et naturel - rafra√Æchissant\", \"price\": 500, \"category\": \"Boissons\", \"image_url\": \"https://images.unsplash.com/photo-1558642452-9d2a7deb7f62?w=400\", \"is_featured\": False},\n        {\"name\": \"Gnamakoudji\", \"description\": \"Jus de gingembre piment√© fait maison\", \"price\": 500, \"category\": \"Boissons\", \"image_url\": \"https://images.unsplash.com/photo-1597318181409-cf64d0b5d8a2?w=400\", \"is_featured\": False},\n        {\"name\": \"Jus de Baobab\", \"description\": \"Bouye - jus de fruit de baobab cr√©meux\", \"price\": 600, \"category\": \"Boissons\", \"image_url\": \"https://images.unsplash.com/photo-1534353473418-4cfa6c56fd38?w=400\", \"is_featured\": False},\n        {\"name\": \"Kedjenou de Poulet\", \"description\": \"Poulet mijot√© √† l'√©touff√©e avec l√©gumes, sp√©cialit√© Baoul√©\", \"price\": 4500, \"category\": \"Sp√©cialit√©s\", \"image_url\": \"https://images.unsplash.com/photo-1604908176997-125f25cc6f3d?w=400\", \"is_featured\": True},\n        {\"name\": \"Sauce Arachide\", \"description\": \"Sauce onctueuse aux arachides avec viande et riz\", \"price\": 3000, \"category\": \"Sp√©cialit√©s\", \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400\", \"is_featured\": False},\n        {\"name\": \"Placali Sauce Kop√®\", \"description\": \"Placali avec sauce kop√® aux crabes - d√©lice du sud\", \"price\": 4000, \"category\": \"Sp√©cialit√©s\", \"image_url\": \"https://images.unsplash.com/photo-1455619452474-d2be8b1e70cd?w=400\", \"is_featured\": False},\n    ]\n    \n    for item in menu_items:\n        menu_obj = MenuItem(**item)\n        doc = serialize_datetime(menu_obj.model_dump())\n        await db.menu_items.insert_one(doc)\n    \n    # Seed gallery photos\n    gallery_photos = [\n        {\"image_url\": \"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/ha2l407l_cv.jpg\", \"caption\": \"Nos clients appr√©cient nos plats\", \"category\": \"clients\", \"is_featured\": True},\n        {\"image_url\": \"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/07tbw3nn_cc.jpg\", \"caption\": \"Ambiance familiale chez Loman\", \"category\": \"clients\", \"is_featured\": True},\n        {\"image_url\": \"https://customer-assets.emergentagent.com/job_b5c0ff47-ce71-407d-b22b-390360e9dd58/artifacts/smtxt9or_chl.jpg\", \"caption\": \"Notre √©quipe d√©vou√©e\", \"category\": \"restaurant\", \"is_featured\": True},\n    ]\n    \n    for photo in gallery_photos:\n        photo_obj = GalleryPhoto(**photo)\n        doc = serialize_datetime(photo_obj.model_dump())\n        await db.gallery.insert_one(doc)\n    \n    # Seed reviews\n    reviews = [\n        {\"author\": \"Aminata K.\", \"rating\": 5, \"comment\": \"Meilleur atti√®k√® poisson de Yopougon! On se croirait chez maman. Je recommande √† 100%!\"},\n        {\"author\": \"Jean-Marc D.\", \"rating\": 5, \"comment\": \"Le poulet brais√© est incroyable. Ambiance chaleureuse et service impeccable.\"},\n        {\"author\": \"Fatou S.\", \"rating\": 4, \"comment\": \"Tr√®s bonne cuisine, portions g√©n√©reuses. Le foutou sauce graine m'a rappel√© mon village.\"},\n        {\"author\": \"Kouadio B.\", \"rating\": 5, \"comment\": \"Enfin un resto qui respecte les vraies saveurs ivoiriennes! Les brochettes sont top!\"},\n        {\"author\": \"Marie-Claire A.\", \"rating\": 5, \"comment\": \"Cadre agr√©able, nourriture excellente. Parfait pour les repas en famille.\"},\n    ]\n    \n    for review in reviews:\n        review_obj = Review(**review)\n        doc = serialize_datetime(review_obj.model_dump())\n        await db.reviews.insert_one(doc)\n    \n    # Seed daily menu\n    today = datetime.now(timezone.utc).strftime(\"%Y-%m-%d\")\n    daily_menu = DailyMenu(\n        date=today,\n        items=[\n            \"Atti√®k√® Poisson Brais√© - 3500 FCFA\",\n            \"Foutou Sauce Graine - 3000 FCFA\",\n            \"Poulet Brais√© + Alloco - 4500 FCFA\",\n            \"Garba Sp√©cial - 2000 FCFA\"\n        ],\n        special_message=\"Aujourd'hui: Bissap offert pour toute commande de plus de 5000 FCFA! üéâ\"\n    )\n    doc = serialize_datetime(daily_menu.model_dump())\n    await db.daily_menus.insert_one(doc)\n    \n    return {\"message\": \"Data seeded successfully\"}\n\n# ==================== DASHBOARD ENDPOINTS ====================\n\n# Import AI service\ntry:\n    from backend.ai_service import ai_service\nexcept ImportError:\n    from ai_service import ai_service\n\n# ---- Dashboard Stats ----\n@api_router.get(\"/dashboard/stats\")\nasync def get_dashboard_stats():\n    \"\"\"Get all dashboard statistics\"\"\"\n    today = datetime.now(timezone.utc).strftime(\"%Y-%m-%d\")\n    week_ago = (datetime.now(timezone.utc) - timedelta(days=7)).strftime(\"%Y-%m-%d\")\n    month_ago = (datetime.now(timezone.utc) - timedelta(days=30)).strftime(\"%Y-%m-%d\")\n    \n    # Get transactions\n    all_transactions = await db.transactions.find({}, {\"_id\": 0}).to_list(1000)\n    \n    # Calculate revenues and expenses\n    today_revenue = sum(t[\"amount\"] for t in all_transactions if t.get(\"type\") == \"revenu\" and t.get(\"date\") == today)\n    today_expenses = sum(t[\"amount\"] for t in all_transactions if t.get(\"type\") == \"depense\" and t.get(\"date\") == today)\n    \n    week_revenue = sum(t[\"amount\"] for t in all_transactions if t.get(\"type\") == \"revenu\" and t.get(\"date\", \"\") >= week_ago)\n    week_expenses = sum(t[\"amount\"] for t in all_transactions if t.get(\"type\") == \"depense\" and t.get(\"date\", \"\") >= week_ago)\n    \n    month_revenue = sum(t[\"amount\"] for t in all_transactions if t.get(\"type\") == \"revenu\" and t.get(\"date\", \"\") >= month_ago)\n    month_expenses = sum(t[\"amount\"] for t in all_transactions if t.get(\"type\") == \"depense\" and t.get(\"date\", \"\") >= month_ago)\n    \n    # Get orders count\n    today_orders = await db.orders.count_documents({\"created_at\": {\"$gte\": datetime.now(timezone.utc).replace(hour=0, minute=0, second=0)}})\n    pending_orders = await db.orders.count_documents({\"status\": {\"$in\": [\"en_attente\", \"en_preparation\"]}})\n    \n    # Get unread notifications\n    unread_notifications = await db.notifications.count_documents({\"is_read\": False})\n    \n    # Get low stock items\n    low_stock = await db.stock.find({\"$expr\": {\"$lte\": [\"$quantity\", \"$min_quantity\"]}}, {\"_id\": 0}).to_list(100)\n    \n    # Get today's reservations\n    today_reservations = await db.reservations.count_documents({\"date\": today})\n    \n    # Calculate trends (mock for now if no historical data)\n    revenue_trend = 12.5  # percentage\n    orders_trend = 8.3\n    \n    return {\n        \"revenus\": {\n            \"aujourd_hui\": today_revenue,\n            \"semaine\": week_revenue,\n            \"mois\": month_revenue,\n            \"tendance\": revenue_trend\n        },\n        \"depenses\": {\n            \"aujourd_hui\": today_expenses,\n            \"semaine\": week_expenses,\n            \"mois\": month_expenses\n        },\n        \"benefices\": {\n            \"aujourd_hui\": today_revenue - today_expenses,\n            \"semaine\": week_revenue - week_expenses,\n            \"mois\": month_revenue - month_expenses\n        },\n        \"commandes\": {\n            \"aujourd_hui\": today_orders,\n            \"en_attente\": pending_orders,\n            \"tendance\": orders_trend\n        },\n        \"notifications_non_lues\": unread_notifications,\n        \"alertes_stock\": len(low_stock),\n        \"reservations_aujourd_hui\": today_reservations,\n        \"score_sante\": 78  # Calculated health score\n    }\n\n@api_router.get(\"/dashboard/chart-data\")\nasync def get_chart_data(period: str = \"7\"):\n    \"\"\"Get chart data for specified period in days\"\"\"\n    days = int(period)\n    start_date = (datetime.now(timezone.utc) - timedelta(days=days)).strftime(\"%Y-%m-%d\")\n    \n    transactions = await db.transactions.find(\n        {\"date\": {\"$gte\": start_date}},\n        {\"_id\": 0}\n    ).to_list(1000)\n    \n    # Group by date\n    data_by_date = {}\n    for t in transactions:\n        date = t.get(\"date\", \"\")\n        if date not in data_by_date:\n            data_by_date[date] = {\"date\": date, \"revenus\": 0, \"depenses\": 0}\n        if t.get(\"type\") == \"revenu\":\n            data_by_date[date][\"revenus\"] += t.get(\"amount\", 0)\n        else:\n            data_by_date[date][\"depenses\"] += t.get(\"amount\", 0)\n    \n    # Fill missing dates\n    result = []\n    current = datetime.now(timezone.utc) - timedelta(days=days)\n    for i in range(days + 1):\n        date_str = current.strftime(\"%Y-%m-%d\")\n        if date_str in data_by_date:\n            result.append(data_by_date[date_str])\n        else:\n            result.append({\"date\": date_str, \"revenus\": 0, \"depenses\": 0})\n        current += timedelta(days=1)\n    \n    return result\n\n# ---- Transactions (Comptabilit√©) ----\n@api_router.get(\"/transactions\", response_model=List[Transaction])\nasync def get_transactions(\n    type: Optional[str] = None,\n    category: Optional[str] = None,\n    limit: int = 50\n):\n    query = {}\n    if type:\n        query[\"type\"] = type\n    if category:\n        query[\"category\"] = category\n    \n    transactions = await db.transactions.find(query, {\"_id\": 0}).sort(\"created_at\", -1).to_list(limit)\n    for t in transactions:\n        deserialize_datetime(t)\n    return transactions\n\n@api_router.post(\"/transactions\", response_model=Transaction)\nasync def create_transaction(transaction: TransactionCreate):\n    new_transaction = Transaction(\n        **transaction.model_dump(),\n        date=transaction.date or datetime.now(timezone.utc).strftime(\"%Y-%m-%d\")\n    )\n    doc = serialize_datetime(new_transaction.model_dump())\n    await db.transactions.insert_one(doc)\n    \n    # Create notification for large transactions\n    if new_transaction.amount >= 100000:\n        notif = Notification(\n            type=\"info\",\n            title=\"Transaction importante\",\n            message=f\"{'Revenu' if new_transaction.type == 'revenu' else 'D√©pense'} de {new_transaction.amount:,} FCFA enregistr√©(e)\",\n            priority=\"haute\"\n        )\n        await db.notifications.insert_one(serialize_datetime(notif.model_dump()))\n    \n    return new_transaction\n\n@api_router.delete(\"/transactions/{transaction_id}\")\nasync def delete_transaction(transaction_id: str):\n    result = await db.transactions.delete_one({\"id\": transaction_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Transaction not found\")\n    return {\"message\": \"Transaction deleted\"}\n\n# ---- Orders (Commandes) ----\n@api_router.get(\"/orders\", response_model=List[Order])\nasync def get_orders(status: Optional[str] = None, limit: int = 50):\n    query = {}\n    if status:\n        query[\"status\"] = status\n    \n    orders = await db.orders.find(query, {\"_id\": 0}).sort(\"created_at\", -1).to_list(limit)\n    for order in orders:\n        deserialize_datetime(order)\n    return orders\n\n@api_router.post(\"/orders\", response_model=Order)\nasync def create_order(order: OrderCreate):\n    # Generate order number\n    today = datetime.now(timezone.utc).strftime(\"%Y%m%d\")\n    count = await db.orders.count_documents({})\n    order_number = f\"CMD-{today}-{count + 1:04d}\"\n    \n    new_order = Order(\n        order_number=order_number,\n        **order.model_dump()\n    )\n    doc = serialize_datetime(new_order.model_dump())\n    await db.orders.insert_one(doc)\n    \n    # Create notification\n    notif = Notification(\n        type=\"commande\",\n        title=\"Nouvelle commande\",\n        message=f\"Commande {order_number} - {new_order.total:,} FCFA\",\n        priority=\"haute\"\n    )\n    await db.notifications.insert_one(serialize_datetime(notif.model_dump()))\n    \n    return new_order\n\n@api_router.put(\"/orders/{order_id}\")\nasync def update_order_status(order_id: str, status: str):\n    valid_statuses = [\"en_attente\", \"en_preparation\", \"pret\", \"livre\", \"annule\"]\n    if status not in valid_statuses:\n        raise HTTPException(status_code=400, detail=f\"Status must be one of: {valid_statuses}\")\n    \n    result = await db.orders.update_one({\"id\": order_id}, {\"$set\": {\"status\": status}})\n    if result.matched_count == 0:\n        raise HTTPException(status_code=404, detail=\"Order not found\")\n    \n    # If delivered, create revenue transaction\n    if status == \"livre\":\n        order = await db.orders.find_one({\"id\": order_id}, {\"_id\": 0})\n        if order:\n            transaction = Transaction(\n                type=\"revenu\",\n                category=\"ventes\",\n                amount=order[\"total\"],\n                description=f\"Commande {order['order_number']}\",\n                payment_method=\"cash\",\n                reference=order[\"order_number\"]\n            )\n            await db.transactions.insert_one(serialize_datetime(transaction.model_dump()))\n    \n    return {\"message\": \"Order updated\"}\n\n# ---- Notifications ----\n@api_router.get(\"/notifications\", response_model=List[Notification])\nasync def get_notifications(unread_only: bool = False, limit: int = 50):\n    query = {\"is_read\": False} if unread_only else {}\n    notifications = await db.notifications.find(query, {\"_id\": 0}).sort(\"created_at\", -1).to_list(limit)\n    for notif in notifications:\n        deserialize_datetime(notif)\n    return notifications\n\n@api_router.put(\"/notifications/{notification_id}/read\")\nasync def mark_notification_read(notification_id: str):\n    result = await db.notifications.update_one({\"id\": notification_id}, {\"$set\": {\"is_read\": True}})\n    if result.matched_count == 0:\n        raise HTTPException(status_code=404, detail=\"Notification not found\")\n    return {\"message\": \"Notification marked as read\"}\n\n@api_router.put(\"/notifications/read-all\")\nasync def mark_all_notifications_read():\n    await db.notifications.update_many({}, {\"$set\": {\"is_read\": True}})\n    return {\"message\": \"All notifications marked as read\"}\n\n@api_router.delete(\"/notifications/{notification_id}\")\nasync def delete_notification(notification_id: str):\n    result = await db.notifications.delete_one({\"id\": notification_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Notification not found\")\n    return {\"message\": \"Notification deleted\"}\n\n# ---- Stock Management ----\n@api_router.get(\"/stock\", response_model=List[StockItem])\nasync def get_stock(low_only: bool = False):\n    if low_only:\n        items = await db.stock.find(\n            {\"$expr\": {\"$lte\": [\"$quantity\", \"$min_quantity\"]}},\n            {\"_id\": 0}\n        ).to_list(100)\n    else:\n        items = await db.stock.find({}, {\"_id\": 0}).to_list(100)\n    \n    for item in items:\n        deserialize_datetime(item)\n    return items\n\n@api_router.post(\"/stock\", response_model=StockItem)\nasync def create_stock_item(item: StockItemCreate):\n    new_item = StockItem(**item.model_dump())\n    doc = serialize_datetime(new_item.model_dump())\n    await db.stock.insert_one(doc)\n    return new_item\n\n@api_router.put(\"/stock/{item_id}\")\nasync def update_stock(item_id: str, quantity: float, operation: str = \"set\"):\n    \"\"\"Update stock quantity. operation can be 'set', 'add', or 'subtract'\"\"\"\n    item = await db.stock.find_one({\"id\": item_id})\n    if not item:\n        raise HTTPException(status_code=404, detail=\"Stock item not found\")\n    \n    if operation == \"add\":\n        new_quantity = item[\"quantity\"] + quantity\n    elif operation == \"subtract\":\n        new_quantity = max(0, item[\"quantity\"] - quantity)\n    else:\n        new_quantity = quantity\n    \n    await db.stock.update_one(\n        {\"id\": item_id},\n        {\"$set\": {\"quantity\": new_quantity, \"last_restock\": datetime.now(timezone.utc).strftime(\"%Y-%m-%d\") if operation == \"add\" else item.get(\"last_restock\")}}\n    )\n    \n    # Check if stock is low and create alert\n    if new_quantity <= item[\"min_quantity\"]:\n        notif = Notification(\n            type=\"alerte\",\n            title=\"Stock bas\",\n            message=f\"Le stock de {item['name']} est bas ({new_quantity} {item['unit']} restants)\",\n            priority=\"urgente\"\n        )\n        await db.notifications.insert_one(serialize_datetime(notif.model_dump()))\n    \n    return {\"message\": \"Stock updated\", \"new_quantity\": new_quantity}\n\n@api_router.delete(\"/stock/{item_id}\")\nasync def delete_stock_item(item_id: str):\n    result = await db.stock.delete_one({\"id\": item_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Stock item not found\")\n    return {\"message\": \"Stock item deleted\"}\n\n# ---- Reservations ----\n@api_router.get(\"/reservations\", response_model=List[Reservation])\nasync def get_reservations(date: Optional[str] = None, status: Optional[str] = None):\n    query = {}\n    if date:\n        query[\"date\"] = date\n    if status:\n        query[\"status\"] = status\n    \n    reservations = await db.reservations.find(query, {\"_id\": 0}).sort(\"date\", 1).to_list(100)\n    for res in reservations:\n        deserialize_datetime(res)\n    return reservations\n\n@api_router.post(\"/reservations\", response_model=Reservation)\nasync def create_reservation(reservation: ReservationCreate):\n    new_reservation = Reservation(**reservation.model_dump())\n    doc = serialize_datetime(new_reservation.model_dump())\n    await db.reservations.insert_one(doc)\n    \n    # Create notification\n    notif = Notification(\n        type=\"info\",\n        title=\"Nouvelle r√©servation\",\n        message=f\"R√©servation de {reservation.customer_name} pour {reservation.guests} personnes le {reservation.date} √† {reservation.time}\",\n        priority=\"normale\"\n    )\n    await db.notifications.insert_one(serialize_datetime(notif.model_dump()))\n    \n    return new_reservation\n\n@api_router.put(\"/reservations/{reservation_id}\")\nasync def update_reservation_status(reservation_id: str, status: str):\n    valid_statuses = [\"en_attente\", \"confirmee\", \"annulee\", \"terminee\"]\n    if status not in valid_statuses:\n        raise HTTPException(status_code=400, detail=f\"Status must be one of: {valid_statuses}\")\n    \n    result = await db.reservations.update_one({\"id\": reservation_id}, {\"$set\": {\"status\": status}})\n    if result.matched_count == 0:\n        raise HTTPException(status_code=404, detail=\"Reservation not found\")\n    return {\"message\": \"Reservation updated\"}\n\n@api_router.delete(\"/reservations/{reservation_id}\")\nasync def delete_reservation(reservation_id: str):\n    result = await db.reservations.delete_one({\"id\": reservation_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Reservation not found\")\n    return {\"message\": \"Reservation deleted\"}\n\n# ---- AI Assistant ----\n@api_router.post(\"/ai/insights\")\nasync def get_ai_insights():\n    \"\"\"Get AI-powered business insights\"\"\"\n    # Gather data for AI analysis\n    transactions = await db.transactions.find({}, {\"_id\": 0}).to_list(100)\n    orders = await db.orders.find({}, {\"_id\": 0}).to_list(50)\n    stock = await db.stock.find({}, {\"_id\": 0}).to_list(50)\n    \n    sales_data = {\n        \"transactions_recentes\": transactions[-20:] if transactions else [],\n        \"nombre_commandes\": len(orders),\n        \"commandes_en_attente\": len([o for o in orders if o.get(\"status\") in [\"en_attente\", \"en_preparation\"]])\n    }\n    \n    restaurant_context = {\n        \"nom\": \"Chez Loman\",\n        \"type\": \"Restaurant ivoirien haut de gamme\",\n        \"localisation\": \"Yopougon, Abidjan\",\n        \"stock_items\": len(stock),\n        \"alertes_stock\": len([s for s in stock if s.get(\"quantity\", 0) <= s.get(\"min_quantity\", 0)])\n    }\n    \n    insights = await ai_service.generate_business_insights(sales_data, restaurant_context)\n    return insights\n\n@api_router.post(\"/ai/forecast\")\nasync def get_ai_forecast():\n    \"\"\"Get AI-powered sales forecast\"\"\"\n    transactions = await db.transactions.find(\n        {\"type\": \"revenu\"},\n        {\"_id\": 0}\n    ).sort(\"date\", -1).to_list(30)\n    \n    historical_data = [\n        {\n            \"date\": t.get(\"date\"),\n            \"revenu\": t.get(\"amount\"),\n            \"categorie\": t.get(\"category\")\n        }\n        for t in transactions\n    ]\n    \n    forecast = await ai_service.forecast_sales(historical_data)\n    return forecast\n\n@api_router.post(\"/ai/chat\")\nasync def chat_with_ai(message: AIMessage):\n    \"\"\"Chat with AI assistant\"\"\"\n    # Gather context\n    stats = await get_dashboard_stats()\n    \n    context = {\n        \"stats_actuelles\": stats,\n        \"date_heure\": datetime.now(timezone.utc).isoformat()\n    }\n    \n    if message.context:\n        context.update(message.context)\n    \n    response = await ai_service.chat_assistant(message.message, context)\n    return {\"response\": response}\n\n@api_router.get(\"/ai/status\")\nasync def get_ai_status():\n    \"\"\"Check if AI service is configured\"\"\"\n    return {\n        \"configured\": ai_service.is_configured(),\n        \"model\": \"deepseek-chat\" if ai_service.is_configured() else None\n    }\n\n# ---- Seed Dashboard Data ----\n@api_router.post(\"/seed-dashboard\")\nasync def seed_dashboard_data():\n    \"\"\"Seed sample dashboard data for demo\"\"\"\n    # Check if data already exists\n    existing = await db.transactions.count_documents({})\n    if existing > 0:\n        return {\"message\": \"Dashboard data already seeded\"}\n    \n    today = datetime.now(timezone.utc)\n    \n    # Seed transactions (last 30 days)\n    categories_revenus = [\"ventes\", \"livraison\", \"evenements\"]\n    categories_depenses = [\"ingredients\", \"personnel\", \"loyer\", \"utilities\", \"marketing\", \"equipement\"]\n    \n    transactions = []\n    for i in range(30):\n        date = (today - timedelta(days=i)).strftime(\"%Y-%m-%d\")\n        \n        # Daily revenue (random between 200k and 600k FCFA)\n        import random\n        daily_revenue = random.randint(200000, 600000)\n        transactions.append(Transaction(\n            type=\"revenu\",\n            category=random.choice(categories_revenus),\n            amount=daily_revenue,\n            description=f\"Ventes du {date}\",\n            date=date,\n            payment_method=random.choice([\"cash\", \"mobile_money\", \"carte\"])\n        ))\n        \n        # Daily expenses (random)\n        if random.random() > 0.3:\n            expense = random.randint(50000, 150000)\n            transactions.append(Transaction(\n                type=\"depense\",\n                category=random.choice(categories_depenses),\n                amount=expense,\n                description=f\"D√©pense - {random.choice(categories_depenses)}\",\n                date=date,\n                payment_method=\"cash\"\n            ))\n    \n    for t in transactions:\n        await db.transactions.insert_one(serialize_datetime(t.model_dump()))\n    \n    # Seed stock items\n    stock_items = [\n        {\"name\": \"Poulet\", \"category\": \"viandes\", \"quantity\": 25, \"unit\": \"kg\", \"min_quantity\": 10, \"price_per_unit\": 3500, \"supplier\": \"Ferme Locale\"},\n        {\"name\": \"Poisson Tilapia\", \"category\": \"poissons\", \"quantity\": 15, \"unit\": \"kg\", \"min_quantity\": 8, \"price_per_unit\": 4000, \"supplier\": \"March√© Central\"},\n        {\"name\": \"Atti√®k√®\", \"category\": \"feculents\", \"quantity\": 30, \"unit\": \"kg\", \"min_quantity\": 15, \"price_per_unit\": 1000, \"supplier\": \"Producteur Local\"},\n        {\"name\": \"Huile de Palme\", \"category\": \"huiles\", \"quantity\": 20, \"unit\": \"L\", \"min_quantity\": 10, \"price_per_unit\": 1500, \"supplier\": \"Grossiste\"},\n        {\"name\": \"Oignons\", \"category\": \"legumes\", \"quantity\": 8, \"unit\": \"kg\", \"min_quantity\": 10, \"price_per_unit\": 800, \"supplier\": \"March√©\"},\n        {\"name\": \"Tomates\", \"category\": \"legumes\", \"quantity\": 12, \"unit\": \"kg\", \"min_quantity\": 8, \"price_per_unit\": 1200, \"supplier\": \"March√©\"},\n        {\"name\": \"Bissap\", \"category\": \"boissons\", \"quantity\": 5, \"unit\": \"kg\", \"min_quantity\": 8, \"price_per_unit\": 2500, \"supplier\": \"Importateur\"},\n        {\"name\": \"Gingembre\", \"category\": \"epices\", \"quantity\": 3, \"unit\": \"kg\", \"min_quantity\": 2, \"price_per_unit\": 3000, \"supplier\": \"March√©\"},\n        {\"name\": \"Piment\", \"category\": \"epices\", \"quantity\": 2, \"unit\": \"kg\", \"min_quantity\": 1, \"price_per_unit\": 4000, \"supplier\": \"Producteur\"},\n        {\"name\": \"Banane Plantain\", \"category\": \"feculents\", \"quantity\": 40, \"unit\": \"kg\", \"min_quantity\": 20, \"price_per_unit\": 600, \"supplier\": \"Grossiste\"}\n    ]\n    \n    for item in stock_items:\n        stock = StockItem(**item)\n        await db.stock.insert_one(serialize_datetime(stock.model_dump()))\n    \n    # Seed sample notifications\n    notifications = [\n        {\"type\": \"alerte\", \"title\": \"Stock bas\", \"message\": \"Le stock de Bissap est bas (5 kg restants)\", \"priority\": \"urgente\"},\n        {\"type\": \"info\", \"title\": \"Nouvelle r√©servation\", \"message\": \"R√©servation de M. Kouadio pour 6 personnes ce soir\", \"priority\": \"normale\"},\n        {\"type\": \"commande\", \"title\": \"Commande en attente\", \"message\": \"2 commandes en attente de pr√©paration\", \"priority\": \"haute\"},\n        {\"type\": \"rappel\", \"title\": \"Paiement fournisseur\", \"message\": \"Facture Ferme Locale √† payer avant le 20/02\", \"priority\": \"haute\"}\n    ]\n    \n    for notif_data in notifications:\n        notif = Notification(**notif_data)\n        await db.notifications.insert_one(serialize_datetime(notif.model_dump()))\n    \n    # Seed sample reservations\n    reservations = [\n        {\"customer_name\": \"M. Kouadio\", \"customer_phone\": \"+225 07 00 00 01\", \"date\": today.strftime(\"%Y-%m-%d\"), \"time\": \"19:30\", \"guests\": 6},\n        {\"customer_name\": \"Mme Bamba\", \"customer_phone\": \"+225 07 00 00 02\", \"date\": today.strftime(\"%Y-%m-%d\"), \"time\": \"20:00\", \"guests\": 4},\n        {\"customer_name\": \"M. Tour√©\", \"customer_phone\": \"+225 07 00 00 03\", \"date\": (today + timedelta(days=1)).strftime(\"%Y-%m-%d\"), \"time\": \"12:30\", \"guests\": 2}\n    ]\n    \n    for res_data in reservations:\n        res = Reservation(**res_data)\n        await db.reservations.insert_one(serialize_datetime(res.model_dump()))\n    \n    return {\"message\": \"Dashboard data seeded successfully\"}\n\n# ---- Caisse (Cash Register / POS) ----\n@api_router.post(\"/caisse/vente\")\nasync def create_cash_sale(sale: CashSaleCreate):\n    new_sale = CashSale(**sale.model_dump())\n    doc = serialize_datetime(new_sale.model_dump())\n    await db.cash_sales.insert_one(doc)\n    transaction = Transaction(\n        type=\"revenu\",\n        category=\"ventes\",\n        amount=sale.total,\n        description=f\"Vente caisse - {sale.payment_method}\",\n        date=datetime.now(timezone.utc).strftime(\"%Y-%m-%d\"),\n        payment_method=sale.payment_method\n    )\n    await db.transactions.insert_one(serialize_datetime(transaction.model_dump()))\n    return new_sale\n\n@api_router.get(\"/caisse/ventes\")\nasync def get_cash_sales(date: Optional[str] = None):\n    query = {}\n    if date:\n        query[\"sale_date\"] = date\n    sales = await db.cash_sales.find(query, {\"_id\": 0}).sort(\"created_at\", -1).to_list(200)\n    for sale in sales:\n        deserialize_datetime(sale)\n    return sales\n\n@api_router.get(\"/caisse/stats\")\nasync def get_cash_stats(date: Optional[str] = None):\n    target_date = date or datetime.now(timezone.utc).strftime(\"%Y-%m-%d\")\n    \n    day_sales = await db.cash_sales.find({\"sale_date\": target_date}, {\"_id\": 0}).to_list(1000)\n    \n    total_revenue = sum(s.get(\"total\", 0) for s in day_sales)\n    total_sales_count = len(day_sales)\n    \n    cash_total = sum(s.get(\"total\", 0) for s in day_sales if s.get(\"payment_method\") == \"especes\")\n    mobile_total = sum(s.get(\"total\", 0) for s in day_sales if s.get(\"payment_method\") == \"mobile_money\")\n    \n    dishes_count = {}\n    for sale in day_sales:\n        for item in sale.get(\"items\", []):\n            name = item.get(\"name\", \"Inconnu\")\n            qty = item.get(\"quantity\", 1)\n            if name in dishes_count:\n                dishes_count[name][\"quantity\"] += qty\n                dishes_count[name][\"revenue\"] += item.get(\"price\", 0) * qty\n            else:\n                dishes_count[name] = {\"name\": name, \"quantity\": qty, \"revenue\": item.get(\"price\", 0) * qty}\n    \n    top_dishes = sorted(dishes_count.values(), key=lambda x: x[\"quantity\"], reverse=True)\n    \n    return {\n        \"date\": target_date,\n        \"total_revenue\": total_revenue,\n        \"total_sales\": total_sales_count,\n        \"cash_total\": cash_total,\n        \"mobile_money_total\": mobile_total,\n        \"average_ticket\": total_revenue // total_sales_count if total_sales_count > 0 else 0,\n        \"top_dishes\": top_dishes,\n        \"total_dishes_sold\": sum(d[\"quantity\"] for d in top_dishes)\n    }\n\n@api_router.delete(\"/caisse/vente/{sale_id}\")\nasync def delete_cash_sale(sale_id: str):\n    result = await db.cash_sales.delete_one({\"id\": sale_id})\n    if result.deleted_count == 0:\n        raise HTTPException(status_code=404, detail=\"Vente non trouv√©e\")\n    return {\"message\": \"Vente supprim√©e\"}\n\n# Include the router in the main app\napp.include_router(api_router)\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_credentials=True,\n    allow_origins=os.environ.get('CORS_ORIGINS', '*').split(','),\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# Configure logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n)\nlogger = logging.getLogger(__name__)\n\nfrontend_build = Path(__file__).parent.parent / \"frontend\" / \"build\"\nif frontend_build.exists():\n    app.mount(\"/static\", StaticFiles(directory=str(frontend_build / \"static\")), name=\"static\")\n\n    from starlette.responses import FileResponse\n\n    @app.get(\"/{full_path:path}\")\n    async def serve_frontend(full_path: str):\n        file_path = frontend_build / full_path\n        if file_path.exists() and file_path.is_file():\n            return FileResponse(str(file_path))\n        return FileResponse(str(frontend_build / \"index.html\"))\n\n@app.on_event(\"shutdown\")\nasync def shutdown_db_client():\n    client.close()\n","path":null,"size_bytes":57439,"size_tokens":null},"frontend/src/components/ui/scroll-area.jsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}>\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}>\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1362,"size_tokens":null},"frontend/src/components/ui/table.jsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props} />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props} />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\", className)}\n    {...props} />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props} />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props} />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props} />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props} />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2231,"size_tokens":null},"frontend/src/components/ui/drawer.jsx":{"content":"import * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}) => (\n  <DrawerPrimitive.Root shouldScaleBackground={shouldScaleBackground} {...props} />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props} />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}>\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props} />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}) => (\n  <div className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)} {...props} />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold leading-none tracking-tight\", className)}\n    {...props} />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props} />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":2345,"size_tokens":null},"frontend/src/components/ui/toaster.jsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        );\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  );\n}\n","path":null,"size_bytes":774,"size_tokens":null},"frontend/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Manrope:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --primary: #1A4D3E;\n  --primary-dark: #0F2E24;\n  --primary-light: #2C6B59;\n  --gold: #D4AF37;\n  --gold-light: #F2CC8F;\n  --gold-dark: #AA8C2C;\n  --bg-dark: #05100D;\n  --bg-paper: #F9F7F2;\n  --text-primary: #F9F7F2;\n  --text-secondary: #A3B1AD;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Manrope', sans-serif;\n  background-color: var(--bg-dark);\n  color: var(--text-primary);\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  overflow-x: hidden;\n}\n\n/* Typography */\nh1, h2, h3, h4, h5, h6 {\n  font-family: 'Playfair Display', serif;\n}\n\n.font-accent {\n  font-family: 'Cormorant Garamond', serif;\n}\n\n.font-body {\n  font-family: 'Manrope', sans-serif;\n}\n\n/* Custom scrollbar */\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background: var(--bg-dark);\n}\n\n::-webkit-scrollbar-thumb {\n  background: var(--primary);\n  border-radius: 3px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: var(--gold);\n}\n\n/* Selection */\n::selection {\n  background-color: var(--gold);\n  color: var(--primary-dark);\n}\n\n/* Smooth scroll */\nhtml {\n  scroll-behavior: smooth;\n}\n\n/* Glass effect */\n.glass {\n  backdrop-filter: blur(16px);\n  -webkit-backdrop-filter: blur(16px);\n  background: rgba(26, 77, 62, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.glass-dark {\n  backdrop-filter: blur(24px);\n  -webkit-backdrop-filter: blur(24px);\n  background: rgba(0, 0, 0, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n/* Gold glow */\n.gold-glow {\n  box-shadow: 0 0 20px rgba(212, 175, 55, 0.15);\n}\n\n.gold-border {\n  border: 1px solid rgba(212, 175, 55, 0.3);\n}\n\n/* Text gradient gold */\n.text-gold-gradient {\n  background: linear-gradient(45deg, #AA8C2C, #F2CC8F, #D4AF37);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n/* Animations */\n@keyframes float {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-8px); }\n}\n\n@keyframes pulse-gold {\n  0%, 100% { box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }\n  50% { box-shadow: 0 0 40px rgba(212, 175, 55, 0.6); }\n}\n\n@keyframes shimmer {\n  0% { background-position: -200% center; }\n  100% { background-position: 200% center; }\n}\n\n.animate-float {\n  animation: float 4s ease-in-out infinite;\n}\n\n.animate-pulse-gold {\n  animation: pulse-gold 2s ease-in-out infinite;\n}\n\n.animate-shimmer {\n  background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);\n  background-size: 200% 100%;\n  animation: shimmer 3s infinite;\n}\n\n/* Noise texture overlay */\n.noise-overlay::before {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background-image: url(\"data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E\");\n  opacity: 0.03;\n  pointer-events: none;\n  z-index: 1;\n}\n\n/* Line decoration */\n.line-gold {\n  width: 60px;\n  height: 1px;\n  background: linear-gradient(90deg, transparent, var(--gold), transparent);\n}\n\n@layer base {\n  :root {\n    --background: 160 33% 4%;\n    --foreground: 40 33% 97%;\n    --card: 160 33% 4%;\n    --card-foreground: 40 33% 97%;\n    --popover: 160 33% 4%;\n    --popover-foreground: 40 33% 97%;\n    --primary: 160 48% 20%;\n    --primary-foreground: 40 33% 97%;\n    --secondary: 43 65% 52%;\n    --secondary-foreground: 160 33% 10%;\n    --muted: 160 20% 15%;\n    --muted-foreground: 160 15% 65%;\n    --accent: 43 65% 52%;\n    --accent-foreground: 160 33% 10%;\n    --destructive: 0 84% 60%;\n    --destructive-foreground: 40 33% 97%;\n    --border: 160 20% 20%;\n    --input: 160 20% 20%;\n    --ring: 43 65% 52%;\n    --radius: 0.75rem;\n  }\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n}\n","path":null,"size_bytes":4181,"size_tokens":null},"frontend/src/components/ui/breadcrumb.jsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef(\n  ({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />\n)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props} />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props} />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props} />\n  );\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props} />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}>\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}>\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2269,"size_tokens":null},"frontend/src/components/ui/input.jsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef(({ className, type, ...props }, ref) => {\n  return (\n    <input\n      type={type}\n      className={cn(\n        \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props} />\n  );\n})\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":688,"size_tokens":null},"frontend/src/components/ui/tabs.jsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props} />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow\",\n      className\n    )}\n    {...props} />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props} />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1529,"size_tokens":null},"frontend/plugins/visual-edits/babel-metadata-plugin.js":{"content":"// babel-metadata-plugin.js\n// Babel plugin for JSX transformation - adds metadata to all elements\nconst path = require(\"path\");\nconst fs = require(\"fs\");\n\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n// ===== Dynamic composite detection (auto-exclude) =====\nconst EXTENSIONS = [\".tsx\", \".ts\", \".jsx\", \".js\"];\nconst PROJECT_ROOT = path.resolve(__dirname, '../..'); // frontend root (../../ from plugins/visual-edits/)\nconst SRC_ALIAS = path.resolve(PROJECT_ROOT, \"src\");\n\nconst RESOLVE_CACHE = new Map(); // key: fromFile::source -> absPath | null\nconst FILE_AST_CACHE = new Map(); // absPath -> { ast, mtimeMs }\nconst PORTAL_COMP_CACHE = new Map(); // key: absPath::exportName -> boolean\nconst DYNAMIC_COMP_CACHE = new Map(); // key: absPath::exportName -> boolean\nconst BINDING_DYNAMIC_CACHE = new WeakMap(); // node -> boolean\n\n// Cache for cross-file prop source tracking\n// Key: \"absoluteFilePath::ComponentName::propName\"\n// Value: { sourceInfo, arrayContext, fromFile }\nconst PROP_SOURCE_CACHE = new Map();\n\nfunction resolveImportPath(source, fromFile) {\n  const cacheKey = `${fromFile}::${source}`;\n  if (RESOLVE_CACHE.has(cacheKey)) return RESOLVE_CACHE.get(cacheKey);\n\n  let base;\n  if (source.startsWith(\"@/\")) {\n    base = path.join(SRC_ALIAS, source.slice(2));\n  } else if (source.startsWith(\"./\") || source.startsWith(\"../\")) {\n    base = path.resolve(path.dirname(fromFile), source);\n  } else {\n    // bare specifier (node_modules) ‚Äî skip analysis\n    RESOLVE_CACHE.set(cacheKey, null);\n    return null;\n  }\n\n  // try direct file\n  for (const ext of EXTENSIONS) {\n    const file = base.endsWith(ext) ? base : base + ext;\n    if (fs.existsSync(file) && fs.statSync(file).isFile()) {\n      RESOLVE_CACHE.set(cacheKey, file);\n      return file;\n    }\n  }\n  // try index.* in directory\n  if (fs.existsSync(base) && fs.statSync(base).isDirectory()) {\n    for (const ext of EXTENSIONS) {\n      const idx = path.join(base, \"index\" + ext);\n      if (fs.existsSync(idx)) {\n        RESOLVE_CACHE.set(cacheKey, idx);\n        return idx;\n      }\n    }\n  }\n\n  RESOLVE_CACHE.set(cacheKey, null);\n  return null;\n}\n\n/**\n * Gets the absolute path of an imported component's source file.\n * Returns null if the component is defined in the same file.\n */\nfunction getComponentSourcePath(binding, state) {\n  if (!binding || !binding.path) return null;\n\n  const bindingPath = binding.path;\n  const fileFrom = state.filename || state.file?.opts?.filename || __filename;\n\n  if (bindingPath.isImportSpecifier()) {\n    const from = bindingPath.parent.source.value;\n    return resolveImportPath(from, fileFrom);\n  }\n\n  if (bindingPath.isImportDefaultSpecifier()) {\n    const from = bindingPath.parent.source.value;\n    return resolveImportPath(from, fileFrom);\n  }\n\n  return null; // Same-file binding\n}\n\nfunction parseFileAst(absPath, parser) {\n  try {\n    const stat = fs.statSync(absPath);\n    const cached = FILE_AST_CACHE.get(absPath);\n    if (cached && cached.mtimeMs === stat.mtimeMs) return cached.ast;\n\n    const code = fs.readFileSync(absPath, \"utf8\");\n    const ast = parser.parse(code, {\n      sourceType: \"module\",\n      plugins: [\"jsx\", \"typescript\"],\n    });\n    FILE_AST_CACHE.set(absPath, { ast, mtimeMs: stat.mtimeMs });\n    return ast;\n  } catch (error) {\n    return null;\n  }\n}\n\nfunction jsxNameOf(openingEl, t) {\n  const n = openingEl?.name;\n  if (t.isJSXIdentifier(n)) return n.name;\n  if (t.isJSXMemberExpression(n)) return n.property.name; // <X.Y>\n  return null;\n}\n\nconst PORTAL_SUFFIX_RE =\n  /(Trigger|Portal|Content|Overlay|Viewport|Anchor|Arrow)$/;\n\nfunction isPortalishName(name, RADIX_ROOTS) {\n  if (!name) return false;\n  return RADIX_ROOTS.has(name) || PORTAL_SUFFIX_RE.test(name);\n}\n\nconst isStaticLiteralExpression = (expr, t) =>\n  t.isStringLiteral(expr) ||\n  t.isNumericLiteral(expr) ||\n  t.isBooleanLiteral(expr) ||\n  t.isNullLiteral(expr) ||\n  (t.isTemplateLiteral(expr) && expr.expressions.length === 0);\n\nconst buildDynamicExpressionWrapper = (child, t) =>\n  t.jsxElement(\n    t.jsxOpeningElement(\n      t.jsxIdentifier(\"span\"),\n      [\n        t.jsxAttribute(\n          t.jsxIdentifier(\"data-ve-dynamic\"),\n          t.stringLiteral(\"true\"),\n        ),\n        t.jsxAttribute(\n          t.jsxIdentifier(\"x-excluded\"),\n          t.stringLiteral(\"true\"),\n        ),\n        t.jsxAttribute(\n          t.jsxIdentifier(\"style\"),\n          t.jsxExpressionContainer(\n            t.objectExpression([\n              t.objectProperty(\n                t.identifier(\"display\"),\n                t.stringLiteral(\"contents\"),\n              ),\n            ]),\n          ),\n        ),\n      ],\n      false,\n    ),\n    t.jsxClosingElement(t.jsxIdentifier(\"span\")),\n    [child],\n    false,\n  );\n\nconst wrapDynamicExpressionChildren = (jsxPath, t) => {\n  const children = jsxPath.node.children || [];\n  let didChange = false;\n\n  const nextChildren = children.map((child) => {\n    if (\n      t.isJSXExpressionContainer(child) &&\n      !t.isJSXEmptyExpression(child.expression) &&\n      !isStaticLiteralExpression(child.expression, t)\n    ) {\n      didChange = true;\n      return buildDynamicExpressionWrapper(child, t);\n    }\n    return child;\n  });\n\n  if (didChange) {\n    jsxPath.node.children = nextChildren;\n  }\n};\n\n// Analyze a specific exported component in a file\nfunction fileExportHasPortals({\n  absPath,\n  exportName, // string or \"default\"\n  t,\n  traverse,\n  parser,\n  RADIX_ROOTS,\n  depth = 0,\n  maxDepth = 3,\n}) {\n  if (!absPath || depth > maxDepth) return false;\n  const cacheKey = `${absPath}::${exportName}`;\n  if (PORTAL_COMP_CACHE.has(cacheKey)) return PORTAL_COMP_CACHE.get(cacheKey);\n\n  const ast = parseFileAst(absPath, parser);\n  if (!ast) {\n    PORTAL_COMP_CACHE.set(cacheKey, false);\n    return false;\n  }\n\n  // Map local imports -> file paths for recursive checks\n  const importMap = new Map(); // localName -> { absPath, importName }\n  traverse(ast, {\n    ImportDeclaration(p) {\n      const src = p.node.source.value;\n      const target = resolveImportPath(src, absPath);\n      if (!target) return;\n      p.node.specifiers.forEach((s) => {\n        if (t.isImportSpecifier(s)) {\n          importMap.set(s.local.name, {\n            absPath: target,\n            importName: s.imported.name,\n          });\n        } else if (t.isImportDefaultSpecifier(s)) {\n          importMap.set(s.local.name, {\n            absPath: target,\n            importName: \"default\",\n          });\n        }\n      });\n    },\n  });\n\n  // Find the component declaration for exportName\n  let compPaths = [];\n\n  traverse(ast, {\n    ExportDefaultDeclaration(p) {\n      if (exportName !== \"default\") return;\n      const decl = p.node.declaration;\n      if (\n        t.isFunctionDeclaration(decl) ||\n        t.isArrowFunctionExpression(decl) ||\n        t.isFunctionExpression(decl)\n      ) {\n        compPaths.push(p.get(\"declaration\"));\n      } else if (t.isIdentifier(decl)) {\n        const bind = p.scope.getBinding(decl.name);\n        if (bind) compPaths.push(bind.path);\n      }\n    },\n    ExportNamedDeclaration(p) {\n      if (exportName === \"default\") return;\n      if (p.node.declaration) {\n        const d = p.node.declaration;\n        if (t.isFunctionDeclaration(d) && d.id?.name === exportName) {\n          compPaths.push(p.get(\"declaration\"));\n        }\n        if (t.isVariableDeclaration(d)) {\n          d.declarations.forEach((vd, i) => {\n            if (t.isIdentifier(vd.id) && vd.id.name === exportName) {\n              compPaths.push(p.get(`declaration.declarations.${i}.init`));\n            }\n          });\n        }\n      } else {\n        p.node.specifiers.forEach((s) => {\n          if (\n            t.isExportSpecifier(s) &&\n            t.isIdentifier(s.exported) &&\n            s.exported.name === exportName &&\n            t.isIdentifier(s.local)\n          ) {\n            const bind = p.scope.getBinding(s.local.name);\n            if (bind) compPaths.push(bind.path);\n          }\n        });\n      }\n    },\n  });\n\n  if (compPaths.length === 0) {\n    PORTAL_COMP_CACHE.set(cacheKey, false);\n    return false;\n  }\n\n  let found = false;\n\n  // Track visited paths to prevent infinite recursion with circular component dependencies\n  const visitedPaths = new WeakSet();\n\n  function subtreeHasPortals(nodePath) {\n    if (!nodePath || !nodePath.node) return false;\n    if (visitedPaths.has(nodePath.node)) return false;\n    visitedPaths.add(nodePath.node);\n\n    let hit = false;\n    nodePath.traverse({\n      JSXOpeningElement(op) {\n        if (hit) return;\n        const name = jsxNameOf(op.node, t);\n        if (isPortalishName(name, RADIX_ROOTS)) {\n          hit = true;\n          return;\n        }\n        if (/^[A-Z]/.test(name || \"\")) {\n          // capitalized child: may itself be portalish\n          const binding = op.scope.getBinding(name);\n          if (binding && binding.path) {\n            const childHas = subtreeHasPortals(binding.path);\n            if (childHas) {\n              hit = true;\n              return;\n            }\n          } else if (importMap.has(name)) {\n            const { absPath: childPath, importName } = importMap.get(name);\n            const childHas = fileExportHasPortals({\n              absPath: childPath,\n              exportName: importName,\n              t,\n              traverse,\n              parser,\n              RADIX_ROOTS,\n              depth: depth + 1,\n            });\n            if (childHas) {\n              hit = true;\n              return;\n            }\n          }\n        }\n      },\n    });\n    return hit;\n  }\n\n  for (const pth of compPaths) {\n    if (!pth || !pth.node) continue;\n    if (subtreeHasPortals(pth)) {\n      found = true;\n      break;\n    }\n  }\n\n  PORTAL_COMP_CACHE.set(cacheKey, found);\n  return found;\n}\n\n// Decide at a usage site whether <ElementName /> is a composite that should be excluded\nfunction usageIsCompositePortal({\n  elementName,\n  jsxPath,\n  state,\n  t,\n  traverse,\n  parser,\n  RADIX_ROOTS,\n}) {\n  // Same-file binding?\n  const binding = jsxPath.scope.getBinding(elementName);\n  if (binding && binding.path) {\n    // Analyze the definition directly\n    let hit = false;\n    binding.path.traverse({\n      JSXOpeningElement(op) {\n        if (hit) return;\n        const name = jsxNameOf(op.node, t);\n        if (isPortalishName(name, RADIX_ROOTS)) {\n          hit = true;\n          return;\n        }\n        if (/^[A-Z]/.test(name || \"\")) {\n          const innerBinding = op.scope.getBinding(name);\n          if (innerBinding && innerBinding.path) {\n            innerBinding.path.traverse(this.visitors);\n          }\n        }\n      },\n    });\n    if (hit) return true;\n  }\n\n  // Imported binding (named)\n  if (binding && binding.path && binding.path.isImportSpecifier()) {\n    const from = binding.path.parent.source.value;\n    const fileFrom =\n      state.filename ||\n      state.file?.opts?.filename ||\n      state.file?.sourceFileName ||\n      __filename;\n    const absPath = resolveImportPath(from, fileFrom);\n    if (!absPath) return false;\n    const exportName = binding.path.node.imported.name;\n    return fileExportHasPortals({\n      absPath,\n      exportName,\n      t,\n      traverse,\n      parser,\n      RADIX_ROOTS,\n    });\n  }\n\n  // Imported binding (default)\n  if (binding && binding.path && binding.path.isImportDefaultSpecifier()) {\n    const from = binding.path.parent.source.value;\n    const fileFrom =\n      state.filename ||\n      state.file?.opts?.filename ||\n      state.file?.sourceFileName ||\n      __filename;\n    const absPath = resolveImportPath(from, fileFrom);\n    if (!absPath) return false;\n    return fileExportHasPortals({\n      absPath,\n      exportName: \"default\",\n      t,\n      traverse,\n      parser,\n      RADIX_ROOTS,\n    });\n  }\n\n  return false;\n}\n\n// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n// Babel plugin for JSX transformation - adds metadata to all elements\nconst babelMetadataPlugin = ({ types: t }) => {\n  const fileNameCache = new Map();\n\n  const ARRAY_METHODS = new Set([\n    \"map\",\n    \"forEach\",\n    \"filter\",\n    \"reduce\",\n    \"reduceRight\",\n    \"flatMap\",\n    \"find\",\n    \"findIndex\",\n    \"some\",\n    \"every\",\n  ]);\n\n  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n  // Expression Source Analysis - Track where dynamic content comes from\n  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\n  /**\n   * Analyzes an expression to determine its source type and traceability\n   * @param {NodePath} exprPath - The expression path to analyze\n   * @param {Object} state - Babel state with filename info\n   * @returns {Object} Source info: { type, varName, file, line, path, isEditable }\n   */\n  function analyzeExpression(exprPath, state) {\n    if (!exprPath || !exprPath.node) return null;\n\n    const node = exprPath.node;\n\n    // Handle Identifier (simple variable reference like {name})\n    if (t.isIdentifier(node)) {\n      return analyzeIdentifier(node.name, exprPath, state);\n    }\n\n    // Handle MemberExpression (like item.name or obj.prop.value)\n    if (t.isMemberExpression(node)) {\n      return analyzeMemberExpression(exprPath, state);\n    }\n\n    // Handle CallExpression (like formatDate(item.date))\n    if (t.isCallExpression(node)) {\n      return { type: \"computed\", isEditable: false };\n    }\n\n    // Handle TemplateLiteral (like `Hello ${name}`)\n    if (t.isTemplateLiteral(node)) {\n      return { type: \"template\", isEditable: false };\n    }\n\n    // Handle ConditionalExpression (like condition ? a : b)\n    if (t.isConditionalExpression(node)) {\n      return { type: \"computed\", isEditable: false };\n    }\n\n    // Handle LogicalExpression (like a && b)\n    if (t.isLogicalExpression(node)) {\n      return { type: \"computed\", isEditable: false };\n    }\n\n    // Handle BinaryExpression (like a + b)\n    if (t.isBinaryExpression(node)) {\n      return { type: \"computed\", isEditable: false };\n    }\n\n    return { type: \"unknown\", isEditable: false };\n  }\n\n  /**\n   * Analyzes an identifier to determine its binding source\n   * @param {string} name - The identifier name\n   * @param {NodePath} exprPath - The expression path\n   * @param {Object} state - Babel state\n   * @param {Object} options - Options\n   * @param {boolean} options.skipArrayContext - Skip array iteration context check to avoid recursion\n   */\n  function analyzeIdentifier(name, exprPath, state, options = {}) {\n    const { skipArrayContext = false } = options;\n\n    const binding = exprPath.scope.getBinding(name);\n    if (!binding) {\n      return { type: \"external\", varName: name, isEditable: false };\n    }\n\n    const bindingPath = binding.path;\n\n    // Check if this identifier is an array iteration item parameter\n    // (e.g., `review` in `reviews.map((review) => ...)`)\n    // Skip this check when called from getArrayIterationContext to avoid infinite recursion\n    if (!skipArrayContext) {\n      const arrayContext = getArrayIterationContext(exprPath, state);\n      if (arrayContext && arrayContext.itemParam === name) {\n        return {\n          type: \"static-imported\",\n          varName: arrayContext.arrayVar,\n          file: arrayContext.arrayFile,\n          absFile: arrayContext.absFile,\n          line: arrayContext.arrayLine,\n          isEditable: arrayContext.isEditable,\n          valueType: \"array-item\",\n          arrayContext: arrayContext,\n        };\n      }\n    }\n\n    // Check for props (function parameters)\n    if (bindingPath.isIdentifier() && bindingPath.parentPath.isFunctionDeclaration()) {\n      // Try to trace the prop back to its source in the same file\n      const componentName = getContainingComponentName(exprPath);\n      const tracedSource = tracePropToSource(name, componentName, exprPath, state);\n\n      if (tracedSource && tracedSource.isEditable) {\n        return {\n          type: \"prop\",\n          varName: tracedSource.varName, // Use traced source's variable name (e.g., \"reviews\" not \"review\")\n          propName: name, // Keep original prop name for reference\n          tracedFrom: tracedSource,\n          file: tracedSource.file,\n          absFile: tracedSource.absFile,\n          line: tracedSource.line,\n          path: tracedSource.path,\n          isEditable: true,\n          arrayContext: tracedSource.arrayContext,\n        };\n      }\n\n      return { type: \"prop\", varName: name, isEditable: false };\n    }\n\n    // Check if it's a destructured prop from function params\n    if (bindingPath.isObjectPattern() ||\n        (bindingPath.parentPath && bindingPath.parentPath.isObjectPattern())) {\n      const funcParent = bindingPath.findParent(p =>\n        p.isFunctionDeclaration() || p.isArrowFunctionExpression() || p.isFunctionExpression()\n      );\n      if (funcParent && funcParent.node.params.some(param => {\n        if (t.isIdentifier(param)) return false;\n        if (t.isObjectPattern(param)) return true;\n        return false;\n      })) {\n        // Try to trace the prop back to its source in the same file\n        const componentName = getContainingComponentName(exprPath);\n        const tracedSource = tracePropToSource(name, componentName, exprPath, state);\n\n        if (tracedSource && tracedSource.isEditable) {\n          return {\n            type: \"prop\",\n            varName: tracedSource.varName, // Use traced source's variable name (e.g., \"reviews\" not \"review\")\n            propName: name, // Keep original prop name for reference\n            tracedFrom: tracedSource,\n            file: tracedSource.file,\n            absFile: tracedSource.absFile,\n            line: tracedSource.line,\n            path: tracedSource.path,\n            isEditable: true,\n            arrayContext: tracedSource.arrayContext,\n          };\n        }\n\n        return { type: \"prop\", varName: name, isEditable: false };\n      }\n    }\n\n    // Check for useState\n    if (bindingPath.isVariableDeclarator()) {\n      const init = bindingPath.node.init;\n      if (t.isCallExpression(init) && t.isIdentifier(init.callee)) {\n        const calleeName = init.callee.name;\n        if (calleeName === \"useState\" || calleeName === \"useReducer\" ||\n            calleeName === \"useContext\" || calleeName === \"useMemo\" ||\n            calleeName === \"useCallback\") {\n          return { type: \"state\", varName: name, isEditable: false };\n        }\n      }\n    }\n\n    // Check for imports\n    if (bindingPath.isImportSpecifier() || bindingPath.isImportDefaultSpecifier()) {\n      const importDecl = bindingPath.parentPath.node;\n      const source = importDecl.source.value;\n\n      // Only track @/ and ./ imports as potentially editable\n      if (source.startsWith(\"@/\") || source.startsWith(\"./\") || source.startsWith(\"../\")) {\n        const fileFrom = state.filename || state.file?.opts?.filename || __filename;\n        const absPath = resolveImportPath(source, fileFrom);\n\n        if (absPath) {\n          // Get the original export name\n          let exportName = name;\n          if (bindingPath.isImportSpecifier() && t.isIdentifier(bindingPath.node.imported)) {\n            exportName = bindingPath.node.imported.name;\n          }\n\n          // Try to find the variable declaration in the imported file\n          const varInfo = findExportedVariableInfo(absPath, exportName);\n\n          return {\n            type: \"static-imported\",\n            varName: exportName,\n            file: source,\n            absFile: absPath,\n            line: varInfo?.line || null,\n            isEditable: varInfo?.isEditable || false,\n            valueType: varInfo?.valueType || null,\n          };\n        }\n      }\n\n      return { type: \"external\", varName: name, isEditable: false };\n    }\n\n    // Check for local const declarations\n    if (bindingPath.isVariableDeclarator()) {\n      const parent = bindingPath.parentPath;\n      if (parent.isVariableDeclaration() && parent.node.kind === \"const\") {\n        const init = bindingPath.node.init;\n\n        // Get the current file path for local variables\n        const currentFile = state.filename || state.file?.opts?.filename || null;\n\n        // Check if it's a simple editable value\n        if (t.isStringLiteral(init) || t.isNumericLiteral(init)) {\n          return {\n            type: \"static-local\",\n            varName: name,\n            absFile: currentFile,\n            line: bindingPath.node.loc?.start.line || null,\n            isEditable: true,\n            valueType: \"literal\",\n          };\n        }\n\n        if (t.isArrayExpression(init)) {\n          return {\n            type: \"static-local\",\n            varName: name,\n            absFile: currentFile,\n            line: bindingPath.node.loc?.start.line || null,\n            isEditable: true,\n            valueType: \"array\",\n          };\n        }\n\n        if (t.isObjectExpression(init)) {\n          return {\n            type: \"static-local\",\n            varName: name,\n            absFile: currentFile,\n            line: bindingPath.node.loc?.start.line || null,\n            isEditable: true,\n            valueType: \"object\",\n          };\n        }\n      }\n    }\n\n    return { type: \"unknown\", varName: name, isEditable: false };\n  }\n\n  /**\n   * Analyzes a member expression like item.name or obj.prop.value\n   */\n  function analyzeMemberExpression(exprPath, state, options = {}) {\n    const node = exprPath.node;\n\n    // Build the property path (e.g., \"name\" or \"address.city\")\n    const propPath = buildPropertyPath(node);\n\n    // Get the root object\n    let root = node;\n    while (t.isMemberExpression(root.object)) {\n      root = root.object;\n    }\n\n    const rootObj = root.object;\n\n    if (t.isIdentifier(rootObj)) {\n      const rootName = rootObj.name;\n\n      // Check if we're inside an array iteration (like .map())\n      // Skip if we're already analyzing the array source to prevent infinite recursion\n      const arrayContext = options.skipArrayContext\n        ? null\n        : getArrayIterationContext(exprPath, state);\n\n      if (arrayContext && arrayContext.itemParam === rootName) {\n        // This is item.property where item comes from array.map(item => ...)\n        return {\n          type: \"static-imported\",\n          varName: arrayContext.arrayVar,\n          file: arrayContext.arrayFile,\n          absFile: arrayContext.absFile,\n          line: arrayContext.arrayLine,\n          path: propPath,\n          isEditable: arrayContext.isEditable,\n          valueType: \"array-item\",\n          arrayContext: arrayContext,\n        };\n      }\n\n      // Analyze the root identifier\n      // Pass skipArrayContext to avoid infinite recursion when called from getArrayIterationContext\n      const rootInfo = analyzeIdentifier(rootName, exprPath, state, options);\n      if (rootInfo) {\n        return {\n          ...rootInfo,\n          path: propPath,\n        };\n      }\n    }\n\n    return { type: \"unknown\", path: propPath, isEditable: false };\n  }\n\n  /**\n   * Builds a dot-notation path from a MemberExpression\n   */\n  function buildPropertyPath(node) {\n    const parts = [];\n    let current = node;\n\n    while (t.isMemberExpression(current)) {\n      if (t.isIdentifier(current.property)) {\n        parts.unshift(current.property.name);\n      } else if (t.isNumericLiteral(current.property)) {\n        parts.unshift(`[${current.property.value}]`);\n      } else if (t.isStringLiteral(current.property)) {\n        parts.unshift(current.property.value);\n      }\n      current = current.object;\n    }\n\n    return parts.join(\".\");\n  }\n\n  /**\n   * Gets the JSX element name from an opening element\n   */\n  function getJSXElementName(openingElement) {\n    const n = openingElement?.name;\n    if (t.isJSXIdentifier(n)) return n.name;\n    if (t.isJSXMemberExpression(n)) return n.property.name;\n    return null;\n  }\n\n  /**\n   * Gets the containing component name for an expression path\n   */\n  function getContainingComponentName(exprPath) {\n    let current = exprPath;\n    while (current) {\n      if (current.isFunctionDeclaration() && current.node.id) {\n        return current.node.id.name;\n      }\n      if (current.isVariableDeclarator() && t.isIdentifier(current.node.id)) {\n        return current.node.id.name;\n      }\n      if (current.isArrowFunctionExpression() || current.isFunctionExpression()) {\n        // Check if parent is variable declarator\n        const parent = current.parentPath;\n        if (parent && parent.isVariableDeclarator() && t.isIdentifier(parent.node.id)) {\n          return parent.node.id.name;\n        }\n      }\n      current = current.parentPath;\n    }\n    return null;\n  }\n\n  /**\n   * Traces a prop back to where it was passed in the same file\n   * @param {string} propName - The prop name to trace\n   * @param {string} componentName - The component that receives the prop\n   * @param {NodePath} exprPath - The expression path for scope access\n   * @param {Object} state - Babel state\n   * @returns {Object|null} Source info if traced, null otherwise\n   */\n  function tracePropToSource(propName, componentName, exprPath, state) {\n    if (!componentName) return null;\n\n    const programPath = exprPath.findParent(p => p.isProgram());\n    if (!programPath) return null;\n\n    let tracedSource = null;\n\n    programPath.traverse({\n      JSXOpeningElement(jsxPath) {\n        if (tracedSource) return;\n\n        const elementName = getJSXElementName(jsxPath.node);\n        if (elementName !== componentName) return;\n\n        // Look for the prop being passed\n        for (const attr of jsxPath.node.attributes || []) {\n          if (!t.isJSXAttribute(attr)) continue;\n          if (!t.isJSXIdentifier(attr.name) || attr.name.name !== propName) continue;\n          if (!t.isJSXExpressionContainer(attr.value)) continue;\n\n          // Found matching prop - analyze the expression passed to it\n          const attrs = jsxPath.get('attributes');\n          const attrPath = attrs.find(\n            a => a.isJSXAttribute() &&\n                 t.isJSXIdentifier(a.node.name) &&\n                 a.node.name.name === propName\n          );\n\n          if (attrPath) {\n            const valuePath = attrPath.get('value');\n            if (valuePath && valuePath.isJSXExpressionContainer()) {\n              const innerExpr = valuePath.get('expression');\n              if (innerExpr && innerExpr.node) {\n                tracedSource = analyzeExpression(innerExpr, state);\n              }\n            }\n          }\n        }\n      }\n    });\n\n    // If found in same file, return it\n    if (tracedSource) return tracedSource;\n\n    // Cross-file lookup\n    return lookupCrossFilePropSource(propName, componentName, state);\n  }\n\n  /**\n   * Records prop source information for cross-file prop tracing.\n   */\n  function recordPropSources(componentName, jsxPath, state) {\n    const binding = jsxPath.scope.getBinding(componentName);\n    if (!binding) return;\n\n    const componentAbsPath = getComponentSourcePath(binding, state);\n    if (!componentAbsPath) return; // Same-file, existing logic handles\n\n    const openingElement = jsxPath.node.openingElement;\n    for (const attr of openingElement.attributes || []) {\n      if (!t.isJSXAttribute(attr)) continue;\n      if (!t.isJSXIdentifier(attr.name)) continue;\n      if (!t.isJSXExpressionContainer(attr.value)) continue;\n\n      const propName = attr.name.name;\n\n      // Find the attribute path\n      const attrPath = jsxPath.get('openingElement.attributes').find(\n        a => a.isJSXAttribute() && a.node.name?.name === propName\n      );\n      if (!attrPath) continue;\n\n      const valuePath = attrPath.get('value.expression');\n      if (!valuePath?.node) continue;\n\n      // Analyze the expression being passed\n      const sourceInfo = analyzeExpression(valuePath, state);\n      const arrayContext = getArrayIterationContext(valuePath, state);\n\n      // Cache it\n      const cacheKey = `${componentAbsPath}::${componentName}::${propName}`;\n      PROP_SOURCE_CACHE.set(cacheKey, {\n        sourceInfo,\n        arrayContext: arrayContext || sourceInfo?.arrayContext,\n        fromFile: state.filename\n      });\n    }\n  }\n\n  /**\n   * Looks up prop source from cross-file cache.\n   */\n  function lookupCrossFilePropSource(propName, componentName, state) {\n    const currentFile = state.filename || state.file?.opts?.filename;\n    if (!currentFile) return null;\n\n    const cacheKey = `${currentFile}::${componentName}::${propName}`;\n    const cached = PROP_SOURCE_CACHE.get(cacheKey);\n\n    if (cached && cached.sourceInfo) {\n      return cached.sourceInfo;\n    }\n\n    // Cache miss - try lazy evaluation\n    return lazyEvaluatePropSource(propName, componentName, currentFile);\n  }\n\n  /**\n   * Lazily finds prop sources by scanning cached ASTs for component usages.\n   */\n  function lazyEvaluatePropSource(propName, componentName, componentFile) {\n    const traverse = require(\"@babel/traverse\").default;\n\n    for (const [absPath, cached] of FILE_AST_CACHE) {\n      if (absPath === componentFile) continue;\n\n      const ast = cached.ast;\n      if (!ast) continue;\n\n      let result = null;\n\n      traverse(ast, {\n        ImportDeclaration(importPath) {\n          if (result) return;\n\n          const source = importPath.node.source.value;\n          const resolvedPath = resolveImportPath(source, absPath);\n          if (resolvedPath !== componentFile) return;\n\n          // Find the local name for this import\n          let localName = null;\n          for (const spec of importPath.node.specifiers) {\n            if (t.isImportSpecifier(spec) && spec.imported.name === componentName) {\n              localName = spec.local.name;\n            } else if (t.isImportDefaultSpecifier(spec)) {\n              localName = spec.local.name;\n            }\n          }\n          if (!localName) return;\n\n          // Search for usages of this component\n          importPath.parentPath.parentPath.traverse({\n            JSXOpeningElement(jsxPath) {\n              if (result) return;\n\n              const elemName = getJSXElementName(jsxPath.node);\n              if (elemName !== localName) return;\n\n              // Find the prop\n              for (const attr of jsxPath.node.attributes || []) {\n                if (!t.isJSXAttribute(attr)) continue;\n                if (!t.isJSXIdentifier(attr.name) || attr.name.name !== propName) continue;\n                if (!t.isJSXExpressionContainer(attr.value)) continue;\n\n                const attrPath = jsxPath.get('attributes').find(\n                  a => a.isJSXAttribute() && a.node.name?.name === propName\n                );\n\n                if (attrPath) {\n                  const valuePath = attrPath.get('value.expression');\n                  if (valuePath?.node) {\n                    const mockState = { filename: absPath };\n                    result = analyzeExpression(valuePath, mockState);\n\n                    // Cache for future\n                    const cacheKey = `${componentFile}::${componentName}::${propName}`;\n                    PROP_SOURCE_CACHE.set(cacheKey, {\n                      sourceInfo: result,\n                      arrayContext: result?.arrayContext,\n                      fromFile: absPath\n                    });\n                  }\n                }\n              }\n            }\n          });\n        }\n      });\n\n      if (result) return result;\n    }\n\n    return null;\n  }\n\n  /**\n   * Detects if we're inside an array iteration (.map(), etc.) and extracts context\n   */\n  function getArrayIterationContext(exprPath, state) {\n    // Find the parent .map() or similar call\n    const callExprParent = exprPath.findParent((p) => {\n      if (!p.isCallExpression()) return false;\n\n      const { callee } = p.node;\n      if (!t.isMemberExpression(callee) || !t.isIdentifier(callee.property)) {\n        return false;\n      }\n\n      return ARRAY_METHODS.has(callee.property.name);\n    });\n\n    if (!callExprParent) return null;\n\n    const callExpr = callExprParent.node;\n    const callee = callExpr.callee;\n\n    // Get the array being iterated\n    const arrayNode = callee.object;\n\n    // Get the callback function\n    const callback = callExpr.arguments[0];\n    if (!callback) return null;\n\n    // Get item parameter name(s)\n    let itemParam = null;\n    let indexParam = null;\n\n    if (t.isArrowFunctionExpression(callback) || t.isFunctionExpression(callback)) {\n      const params = callback.params;\n      if (params.length > 0 && t.isIdentifier(params[0])) {\n        itemParam = params[0].name;\n      }\n      if (params.length > 1 && t.isIdentifier(params[1])) {\n        indexParam = params[1].name;\n      }\n    }\n\n    if (!itemParam) return null;\n\n    // Analyze the array source\n    let arrayVar = null;\n    let arrayFile = null;\n    let absFile = null;\n    let arrayLine = null;\n    let isEditable = false;\n\n    if (t.isIdentifier(arrayNode)) {\n      arrayVar = arrayNode.name;\n      // Pass skipArrayContext to avoid infinite recursion\n      const arrayInfo = analyzeIdentifier(arrayVar, callExprParent.get(\"callee.object\"), state, { skipArrayContext: true });\n\n      if (arrayInfo) {\n        arrayFile = arrayInfo.file || null;\n        absFile = arrayInfo.absFile || null;\n        arrayLine = arrayInfo.line || null;\n        isEditable = arrayInfo.isEditable && arrayInfo.valueType === \"array\";\n      }\n    } else if (t.isMemberExpression(arrayNode)) {\n      // Handle cases like data.items.map(...)\n      const memberInfo = analyzeMemberExpression(\n        callExprParent.get(\"callee.object\"),\n        state,\n        { skipArrayContext: true }\n      );\n      if (memberInfo) {\n        arrayVar = memberInfo.varName;\n        arrayFile = memberInfo.file || null;\n        absFile = memberInfo.absFile || null;\n        arrayLine = memberInfo.line || null;\n        // Array within object is more complex, mark as not editable for now\n        isEditable = false;\n      }\n    }\n\n    return {\n      arrayVar,\n      arrayFile,\n      absFile,\n      arrayLine,\n      itemParam,\n      indexParam,\n      isEditable,\n    };\n  }\n\n  /**\n   * Finds info about an exported variable in a file\n   */\n  function findExportedVariableInfo(absPath, exportName) {\n    const parser = require(\"@babel/parser\");\n    const traverse = require(\"@babel/traverse\").default;\n\n    const ast = parseFileAst(absPath, parser);\n    if (!ast) return null;\n\n    let result = null;\n\n    traverse(ast, {\n      // Check export const VARIABLE = value\n      ExportNamedDeclaration(p) {\n        if (result) return;\n\n        if (p.node.declaration && t.isVariableDeclaration(p.node.declaration)) {\n          const decl = p.node.declaration;\n          for (const declarator of decl.declarations) {\n            if (t.isIdentifier(declarator.id) && declarator.id.name === exportName) {\n              const init = declarator.init;\n              let valueType = null;\n              let isEditable = false;\n\n              if (t.isStringLiteral(init) || t.isNumericLiteral(init)) {\n                valueType = \"literal\";\n                isEditable = true;\n              } else if (t.isArrayExpression(init)) {\n                valueType = \"array\";\n                isEditable = true;\n              } else if (t.isObjectExpression(init)) {\n                valueType = \"object\";\n                isEditable = true;\n              }\n\n              result = {\n                line: declarator.loc?.start.line || null,\n                valueType,\n                isEditable,\n              };\n              return;\n            }\n          }\n        }\n\n        // Check export { VARIABLE }\n        if (p.node.specifiers) {\n          for (const spec of p.node.specifiers) {\n            if (t.isExportSpecifier(spec) &&\n                t.isIdentifier(spec.exported) &&\n                spec.exported.name === exportName) {\n              // Need to find the original declaration\n              const localName = t.isIdentifier(spec.local) ? spec.local.name : exportName;\n              const binding = p.scope.getBinding(localName);\n              if (binding && binding.path.isVariableDeclarator()) {\n                const init = binding.path.node.init;\n                let valueType = null;\n                let isEditable = false;\n\n                if (t.isStringLiteral(init) || t.isNumericLiteral(init)) {\n                  valueType = \"literal\";\n                  isEditable = true;\n                } else if (t.isArrayExpression(init)) {\n                  valueType = \"array\";\n                  isEditable = true;\n                } else if (t.isObjectExpression(init)) {\n                  valueType = \"object\";\n                  isEditable = true;\n                }\n\n                result = {\n                  line: binding.path.node.loc?.start.line || null,\n                  valueType,\n                  isEditable,\n                };\n              }\n              return;\n            }\n          }\n        }\n      },\n    });\n\n    return result;\n  }\n\n  /**\n   * Extracts expression source info from JSX children and builds metadata attributes\n   */\n  function getExpressionSourceAttributes(jsxElement, state) {\n    const attrs = [];\n    const children = jsxElement.children || [];\n\n    for (const child of children) {\n      if (t.isJSXExpressionContainer(child) && !t.isJSXEmptyExpression(child.expression)) {\n        // We found an expression - analyze it\n        // Note: We need to create a path for the expression, but we only have the node\n        // For now, we'll do basic analysis using the scope from the JSX element\n        const expr = child.expression;\n\n        // Basic classification based on node type\n        if (t.isIdentifier(expr)) {\n          attrs.push({ name: \"x-expr-var\", value: expr.name });\n        } else if (t.isMemberExpression(expr)) {\n          const propPath = buildPropertyPath(expr);\n          attrs.push({ name: \"x-expr-path\", value: propPath });\n\n          // Get root object name\n          let root = expr;\n          while (t.isMemberExpression(root.object)) {\n            root = root.object;\n          }\n          if (t.isIdentifier(root.object)) {\n            attrs.push({ name: \"x-expr-var\", value: root.object.name });\n          }\n        }\n\n        // Only process first expression for now\n        break;\n      }\n    }\n\n    return attrs;\n  }\n\n  // ---------- helpers ----------\n  const getName = (openingEl) => {\n    const n = openingEl?.name;\n    return t.isJSXIdentifier(n) ? n.name : null;\n  };\n\n  const hasProp = (openingEl, name) =>\n    openingEl?.attributes?.some(\n      (a) =>\n        t.isJSXAttribute(a) &&\n        t.isJSXIdentifier(a.name) &&\n        a.name.name === name,\n    );\n\n  const isPortalPrimitive = (name) =>\n    /(Trigger|Portal|Content|Overlay|Viewport|Anchor|Arrow)$/.test(name);\n\n  const RADIX_ROOTS = new Set([\n    \"Dialog\",\n    \"Popover\",\n    \"Tooltip\",\n    \"DropdownMenu\",\n    \"ContextMenu\",\n    \"AlertDialog\",\n    \"HoverCard\",\n    \"Select\",\n    \"Menubar\",\n    \"NavigationMenu\",\n    \"Sheet\",\n    \"Drawer\",\n    \"Toast\",\n    \"Command\",\n  ]);\n\n  // direct child of a Trigger / asChild / Slot parent?\n  const isDirectChildOfAsChildOrTrigger = (jsxPath) => {\n    const p = jsxPath.parentPath;\n    if (!p || !p.isJSXElement || !p.isJSXElement()) return false;\n    const open = p.node.openingElement;\n    const name = getName(open) || \"\";\n    return hasProp(open, \"asChild\") || /Trigger$/.test(name) || name === \"Slot\";\n  };\n\n  const alreadyHasXMeta = (openingEl) =>\n    openingEl.attributes?.some(\n      (a) =>\n        t.isJSXAttribute(a) &&\n        t.isJSXIdentifier(a.name) &&\n        a.name.name.startsWith(\"x-\"),\n    );\n\n  // ‚¨áÔ∏è Add { markExcluded } option: when true, include x-excluded=\"true\"\n  const insertMetaAttributes = (openingEl, attrsToAdd) => {\n    if (!openingEl.attributes) openingEl.attributes = [];\n    const spreadIndex = openingEl.attributes.findIndex((attr) =>\n      t.isJSXSpreadAttribute(attr),\n    );\n    if (spreadIndex === -1) {\n      openingEl.attributes.push(...attrsToAdd);\n    } else {\n      openingEl.attributes.splice(spreadIndex, 0, ...attrsToAdd);\n    }\n  };\n\n  const pushMetaAttrs = (\n    openingEl,\n    { normalizedPath, lineNumber, elementName, isDynamic, sourceInfo, arrayContext },\n    { markExcluded = false } = {},\n  ) => {\n    if (alreadyHasXMeta(openingEl)) return;\n    const metaAttrs = [\n      t.jsxAttribute(\n        t.jsxIdentifier(\"x-file-name\"),\n        t.stringLiteral(normalizedPath),\n      ),\n      t.jsxAttribute(\n        t.jsxIdentifier(\"x-line-number\"),\n        t.stringLiteral(String(lineNumber)),\n      ),\n      t.jsxAttribute(\n        t.jsxIdentifier(\"x-component\"),\n        t.stringLiteral(elementName),\n      ),\n      t.jsxAttribute(\n        t.jsxIdentifier(\"x-id\"),\n        t.stringLiteral(`${normalizedPath}_${lineNumber}`),\n      ),\n      t.jsxAttribute(\n        t.jsxIdentifier(\"x-dynamic\"),\n        t.stringLiteral(isDynamic ? \"true\" : \"false\"),\n      ),\n    ];\n    if (markExcluded) {\n      metaAttrs.push(\n        t.jsxAttribute(t.jsxIdentifier(\"x-excluded\"), t.stringLiteral(\"true\")),\n      );\n    }\n\n    // Add source tracking attributes if available\n    if (sourceInfo) {\n      // x-source-type: static-local | static-imported | prop | state | computed | external\n      if (sourceInfo.type) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-source-type\"), t.stringLiteral(sourceInfo.type))\n        );\n      }\n\n      // x-source-var: the variable name\n      if (sourceInfo.varName) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-source-var\"), t.stringLiteral(sourceInfo.varName))\n        );\n      }\n\n      // x-source-file: for imports, the import path\n      if (sourceInfo.file) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-source-file\"), t.stringLiteral(sourceInfo.file))\n        );\n      }\n\n      // x-source-file-abs: absolute path for relative imports (needed by backend)\n      if (sourceInfo.absFile) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-source-file-abs\"), t.stringLiteral(sourceInfo.absFile))\n        );\n      }\n\n      // x-source-line: line number in source file\n      if (sourceInfo.line) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-source-line\"), t.stringLiteral(String(sourceInfo.line)))\n        );\n      }\n\n      // x-source-path: for object property access (e.g., \"name\" or \"address.city\")\n      if (sourceInfo.path) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-source-path\"), t.stringLiteral(sourceInfo.path))\n        );\n      }\n\n      // x-source-editable: whether this dynamic content can be edited\n      metaAttrs.push(\n        t.jsxAttribute(\n          t.jsxIdentifier(\"x-source-editable\"),\n          t.stringLiteral(sourceInfo.isEditable ? \"true\" : \"false\")\n        )\n      );\n    }\n\n    // Add array iteration context if available\n    if (arrayContext) {\n      if (arrayContext.arrayVar) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-array-var\"), t.stringLiteral(arrayContext.arrayVar))\n        );\n      }\n      if (arrayContext.arrayFile) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-array-file\"), t.stringLiteral(arrayContext.arrayFile))\n        );\n      }\n      if (arrayContext.arrayLine) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-array-line\"), t.stringLiteral(String(arrayContext.arrayLine)))\n        );\n      }\n      if (arrayContext.itemParam) {\n        metaAttrs.push(\n          t.jsxAttribute(t.jsxIdentifier(\"x-array-item-param\"), t.stringLiteral(arrayContext.itemParam))\n        );\n      }\n    }\n\n    insertMetaAttributes(openingEl, metaAttrs);\n  };\n\n  // Check if a JSX element is inside an array iteration callback\n  function isJSXDynamic(jsxPath) {\n    // Use findParent to reliably check if we're inside a function callback to an array method\n    return !!jsxPath.findParent((path) => {\n      // Look for ArrowFunctionExpression or FunctionExpression\n      if (!path.isArrowFunctionExpression() && !path.isFunctionExpression()) {\n        return false;\n      }\n\n      // Check if parent is a CallExpression with an array method\n      const parentCall = path.parentPath;\n      if (!parentCall || !parentCall.isCallExpression()) {\n        return false;\n      }\n\n      const { callee } = parentCall.node;\n      if (!t.isMemberExpression(callee) || !t.isIdentifier(callee.property)) {\n        return false;\n      }\n\n      return ARRAY_METHODS.has(callee.property.name);\n    });\n  }\n\n  // Check if JSX element has any expressions (data dependencies)\n  function hasAnyExpression(jsxElement) {\n    const openingEl = jsxElement.openingElement;\n    if (openingEl?.attributes?.some((attr) => t.isJSXSpreadAttribute(attr))) {\n      return true;\n    }\n    for (const child of jsxElement.children) {\n      if (\n        t.isJSXExpressionContainer(child) &&\n        !t.isJSXEmptyExpression(child.expression)\n      ) {\n        return true;\n      }\n      if (t.isJSXSpreadChild(child)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // bring in parser/traverse for dynamic analysis\n  const parser = require(\"@babel/parser\");\n  const traverse = require(\"@babel/traverse\").default;\n\n  function pathHasDynamicJSX(targetPath) {\n    if (!targetPath || !targetPath.node) return false;\n    let dynamic = false;\n    targetPath.traverse({\n      JSXExpressionContainer(p) {\n        if (dynamic) return;\n        if (!t.isJSXEmptyExpression(p.node.expression)) {\n          dynamic = true;\n          p.stop();\n        }\n      },\n      JSXSpreadAttribute(p) {\n        if (dynamic) return;\n        dynamic = true;\n        p.stop();\n      },\n      JSXSpreadChild(p) {\n        if (dynamic) return;\n        dynamic = true;\n        p.stop();\n      },\n    });\n    return dynamic;\n  }\n\n  function pathIsDynamicComponent(path, visited = new WeakSet()) {\n    if (!path || !path.node) return false;\n    if (visited.has(path.node)) return false;\n    visited.add(path.node);\n\n    if (\n      path.isFunctionDeclaration() ||\n      path.isFunctionExpression() ||\n      path.isArrowFunctionExpression()\n    ) {\n      return pathHasDynamicJSX(path);\n    }\n\n    if (path.isVariableDeclarator()) {\n      const init = path.get(\"init\");\n      return init && init.node ? pathIsDynamicComponent(init, visited) : false;\n    }\n\n    if (path.isIdentifier()) {\n      const binding = path.scope.getBinding(path.node.name);\n      if (binding) {\n        return pathIsDynamicComponent(binding.path, visited);\n      }\n      return false;\n    }\n\n    if (path.isCallExpression()) {\n      const args = path.get(\"arguments\") || [];\n      if (args.length === 0) {\n        return true;\n      }\n      for (const arg of args) {\n        if (pathIsDynamicComponent(arg, visited)) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    if (path.isReturnStatement()) {\n      const argument = path.get(\"argument\");\n      return argument && argument.node\n        ? pathIsDynamicComponent(argument, visited)\n        : false;\n    }\n\n    if (path.isExpressionStatement()) {\n      const expr = path.get(\"expression\");\n      return expr && expr.node ? pathIsDynamicComponent(expr, visited) : false;\n    }\n\n    if (path.isJSXElement() || path.isJSXFragment()) {\n      return pathHasDynamicJSX(path);\n    }\n\n    if (path.isObjectExpression()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  function fileExportIsDynamic({ absPath, exportName }) {\n    if (!absPath) return false;\n    const cacheKey = `${absPath}::${exportName}`;\n    if (DYNAMIC_COMP_CACHE.has(cacheKey)) {\n      return DYNAMIC_COMP_CACHE.get(cacheKey);\n    }\n\n    // Set sentinel value to prevent infinite recursion with circular imports\n    // This will be updated with the actual result at the end\n    DYNAMIC_COMP_CACHE.set(cacheKey, false);\n\n    const ast = parseFileAst(absPath, parser);\n    if (!ast) {\n      DYNAMIC_COMP_CACHE.set(cacheKey, false);\n      return false;\n    }\n\n    let dynamic = false;\n    const visited = new WeakSet();\n\n    function evaluatePath(nodePath) {\n      if (!nodePath || !nodePath.node || dynamic) return;\n      if (visited.has(nodePath.node)) return;\n      visited.add(nodePath.node);\n\n      if (\n        nodePath.isFunctionDeclaration() ||\n        nodePath.isFunctionExpression() ||\n        nodePath.isArrowFunctionExpression()\n      ) {\n        if (pathHasDynamicJSX(nodePath)) {\n          dynamic = true;\n        }\n        return;\n      }\n\n      if (nodePath.isVariableDeclarator()) {\n        evaluatePath(nodePath.get(\"init\"));\n        return;\n      }\n\n      if (nodePath.isIdentifier()) {\n        const binding = nodePath.scope.getBinding(nodePath.node.name);\n        if (binding) {\n          evaluatePath(binding.path);\n        }\n        return;\n      }\n\n      if (nodePath.isCallExpression()) {\n        const args = nodePath.get(\"arguments\") || [];\n        if (args.length === 0) {\n          dynamic = true;\n          return;\n        }\n        for (const arg of args) {\n          evaluatePath(arg);\n          if (dynamic) return;\n        }\n        return;\n      }\n\n      if (nodePath.isReturnStatement()) {\n        evaluatePath(nodePath.get(\"argument\"));\n        return;\n      }\n\n      if (nodePath.isExpressionStatement()) {\n        evaluatePath(nodePath.get(\"expression\"));\n        return;\n      }\n\n      if (nodePath.isJSXElement() || nodePath.isJSXFragment()) {\n        if (pathHasDynamicJSX(nodePath)) {\n          dynamic = true;\n        }\n        return;\n      }\n\n      if (nodePath.isObjectExpression()) {\n        dynamic = true;\n      }\n    }\n\n    traverse(ast, {\n      ExportDefaultDeclaration(p) {\n        if (dynamic || exportName !== \"default\") return;\n        evaluatePath(p.get(\"declaration\"));\n      },\n      ExportNamedDeclaration(p) {\n        if (dynamic || exportName === \"default\") return;\n\n        if (p.node.declaration) {\n          const decl = p.node.declaration;\n          if (t.isFunctionDeclaration(decl) && decl.id?.name === exportName) {\n            evaluatePath(p.get(\"declaration\"));\n            return;\n          }\n          if (t.isVariableDeclaration(decl)) {\n            decl.declarations.forEach((vd, i) => {\n              if (t.isIdentifier(vd.id) && vd.id.name === exportName) {\n                evaluatePath(p.get(`declaration.declarations.${i}`));\n              }\n            });\n            return;\n          }\n        }\n\n        p.node.specifiers.forEach((s) => {\n          if (\n            !t.isExportSpecifier(s) ||\n            !t.isIdentifier(s.exported) ||\n            s.exported.name !== exportName\n          ) {\n            return;\n          }\n\n          if (p.node.source) {\n            const from = p.node.source.value;\n            const resolved = resolveImportPath(from, absPath);\n            if (resolved) {\n              if (\n                fileExportIsDynamic({\n                  absPath: resolved,\n                  exportName: t.isIdentifier(s.local)\n                    ? s.local.name\n                    : exportName,\n                })\n              ) {\n                dynamic = true;\n              }\n            }\n            return;\n          }\n\n          if (t.isIdentifier(s.local)) {\n            const binding = p.scope.getBinding(s.local.name);\n            if (binding) {\n              evaluatePath(binding.path);\n            }\n          }\n        });\n      },\n    });\n\n    DYNAMIC_COMP_CACHE.set(cacheKey, dynamic);\n    return dynamic;\n  }\n\n  function componentBindingIsDynamic({ binding, state }) {\n    if (!binding || !binding.path) return false;\n    const bindingPath = binding.path;\n\n    if (BINDING_DYNAMIC_CACHE.has(bindingPath.node)) {\n      return BINDING_DYNAMIC_CACHE.get(bindingPath.node);\n    }\n\n    let result = false;\n\n    if (bindingPath.isImportSpecifier()) {\n      const from = bindingPath.parent.source.value;\n      const fileFrom =\n        state.filename ||\n        state.file?.opts?.filename ||\n        state.file?.sourceFileName ||\n        __filename;\n      const absPath = resolveImportPath(from, fileFrom);\n      const exportName = bindingPath.node.imported.name;\n      result = !!absPath ? fileExportIsDynamic({ absPath, exportName }) : false;\n      BINDING_DYNAMIC_CACHE.set(bindingPath.node, result);\n      return result;\n    }\n\n    if (bindingPath.isImportDefaultSpecifier()) {\n      const from = bindingPath.parent.source.value;\n      const fileFrom =\n        state.filename ||\n        state.file?.opts?.filename ||\n        state.file?.sourceFileName ||\n        __filename;\n      const absPath = resolveImportPath(from, fileFrom);\n      result = !!absPath\n        ? fileExportIsDynamic({ absPath, exportName: \"default\" })\n        : false;\n      BINDING_DYNAMIC_CACHE.set(bindingPath.node, result);\n      return result;\n    }\n\n    if (bindingPath.isImportNamespaceSpecifier()) {\n      BINDING_DYNAMIC_CACHE.set(bindingPath.node, false);\n      return false;\n    }\n\n    result = pathIsDynamicComponent(bindingPath);\n    BINDING_DYNAMIC_CACHE.set(bindingPath.node, result);\n    return result;\n  }\n\n  return {\n    name: \"element-metadata-plugin\",\n    visitor: {\n      // Add metadata attributes to React components (capitalized JSX)\n      JSXElement(jsxPath, state) {\n        const openingElement = jsxPath.node.openingElement;\n        if (!openingElement?.name) return;\n        const elementName = getName(openingElement);\n        if (!elementName) return;\n\n        // Only process capitalized components (React components)\n        if (!/^[A-Z]/.test(elementName)) {\n          if (hasProp(openingElement, \"data-ve-dynamic\") || hasProp(openingElement, \"x-excluded\")) {\n            return;\n          }\n          wrapDynamicExpressionChildren(jsxPath, t);\n          return;\n        }\n\n        // Exclude components that have strict child requirements or break when wrapped\n        const excludedComponents = new Set([\n          \"Route\",\n          \"Routes\",\n          \"Switch\",\n          \"Redirect\",\n          \"Navigate\", // React Router\n          \"Fragment\",\n          \"Suspense\",\n          \"StrictMode\", // React built-ins\n          \"ErrorBoundary\",\n          \"Provider\",\n          \"Consumer\",\n          \"Outlet\",\n          \"Link\",\n          \"NavLink\",\n          // Portal-based primitives/triggers (Radix/Floating-UI)\n          \"Sheet\",\n          \"SheetContent\",\n          \"SheetOverlay\",\n          \"SheetPortal\",\n          \"Popover\",\n          \"PopoverContent\",\n          \"Tooltip\",\n          \"TooltipContent\",\n          \"DropdownMenu\",\n          \"DropdownMenuContent\",\n          \"DropdownMenuSubContent\",\n          \"ContextMenu\",\n          \"ContextMenuContent\",\n          \"ContextMenuSubContent\",\n          \"HoverCard\",\n          \"HoverCardContent\",\n          \"Select\",\n          \"SelectContent\",\n          \"Menubar\",\n          \"MenubarContent\",\n          \"MenubarSubContent\",\n          \"MenubarPortal\",\n          \"Drawer\",\n          \"DrawerContent\",\n          \"DrawerOverlay\",\n          \"DrawerPortal\",\n          \"Toast\",\n          \"ToastViewport\",\n          \"NavigationMenu\",\n          \"NavigationMenuContent\",\n          \"DropdownMenuPortal\",\n          \"ContextMenuPortal\",\n          \"Command\",\n          \"CommandDialog\",\n          // Triggers & measured bits\n          \"PopoverTrigger\",\n          \"TooltipTrigger\",\n          \"DropdownMenuTrigger\",\n          \"ContextMenuTrigger\",\n          \"HoverCardTrigger\",\n          \"SelectTrigger\",\n          \"MenubarTrigger\",\n          \"NavigationMenuTrigger\",\n          \"SheetTrigger\",\n          \"DrawerTrigger\",\n          \"CommandInput\",\n          \"Slot\",\n          // icons (avoid wrapping)\n          \"X\",\n          \"ChevronRight\",\n          \"ChevronLeft\",\n          \"ChevronUp\",\n          \"ChevronDown\",\n          \"Check\",\n          \"Plus\",\n          \"Minus\",\n          \"Search\",\n          \"Menu\",\n          \"Settings\",\n          \"User\",\n          \"Home\",\n          \"ArrowRight\",\n          \"ArrowLeft\",\n        ]);\n        if (excludedComponents.has(elementName)) return;\n\n        // Check if parent is a component that strictly validates children\n        const parent = jsxPath.parentPath;\n        if (parent?.isJSXElement?.()) {\n          const parentName = getName(parent.node.openingElement) || \"\";\n          if (\n            [\n              \"Routes\",\n              \"Switch\",\n              \"BrowserRouter\",\n              \"Router\",\n              \"MemoryRouter\",\n              \"HashRouter\",\n            ].includes(parentName) ||\n            RADIX_ROOTS.has(parentName)\n          ) {\n            // Don't wrap if direct child of strict parent (e.g., Route inside Routes, or Radix roots)\n            return;\n          }\n        }\n\n        // Record prop sources for cross-file tracing\n        recordPropSources(elementName, jsxPath, state);\n\n        // Get source location\n        const filename =\n          state.filename ||\n          state.file?.opts?.filename ||\n          state.file?.sourceFileName ||\n          \"unknown\";\n        const lineNumber = openingElement.loc?.start.line || 0;\n\n        if (!fileNameCache.has(filename)) {\n          const base = path.basename(filename).replace(/\\.[jt]sx?$/, \"\");\n          fileNameCache.set(filename, base);\n        }\n        const normalizedPath = fileNameCache.get(filename) || \"unknown\";\n\n        // Detect dynamic\n        let isDynamic = isJSXDynamic(jsxPath) || hasAnyExpression(jsxPath.node);\n\n        // Only check component definition if there are NO static text children.\n        // If there ARE text children (like <Label>Habit Name</Label>), their editability\n        // depends on whether they're static strings, not on the component's internal implementation.\n        if (!isDynamic) {\n          const hasStaticTextChildren = jsxPath.node.children.some(\n            (child) => t.isJSXText(child) && child.value.trim()\n          );\n          if (!hasStaticTextChildren) {\n            const binding = jsxPath.scope.getBinding(elementName);\n            if (binding) {\n              isDynamic = componentBindingIsDynamic({ binding, state });\n            }\n          }\n        }\n\n        // Analyze expression sources if element has expressions\n        let sourceInfo = null;\n        let arrayContext = null;\n\n        if (isDynamic) {\n          // Find expression children and analyze them\n          const children = jsxPath.node.children || [];\n          for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (t.isJSXExpressionContainer(child) && !t.isJSXEmptyExpression(child.expression)) {\n              // Get the path to this expression container\n              const exprContainerPath = jsxPath.get(`children.${i}`);\n              if (exprContainerPath && exprContainerPath.node) {\n                const exprPath = exprContainerPath.get(\"expression\");\n                if (exprPath && exprPath.node) {\n                  sourceInfo = analyzeExpression(exprPath, state);\n                  if (sourceInfo && sourceInfo.arrayContext) {\n                    arrayContext = sourceInfo.arrayContext;\n                  }\n                }\n              }\n              break; // Only analyze first expression\n            }\n          }\n\n          // If no expression children, check if we're in array iteration context\n          if (!sourceInfo) {\n            const iterContext = getArrayIterationContext(jsxPath, state);\n            if (iterContext) {\n              arrayContext = iterContext;\n              sourceInfo = {\n                type: iterContext.isEditable ? \"static-imported\" : \"external\",\n                varName: iterContext.arrayVar,\n                file: iterContext.arrayFile,\n                absFile: iterContext.absFile,\n                line: iterContext.arrayLine,\n                isEditable: iterContext.isEditable,\n              };\n            }\n          }\n        }\n\n        // Check if parent is a detected composite portal\n        const parentIsCompositePortal = (() => {\n          const p = jsxPath.parentPath;\n          if (!p || !p.isJSXElement || !p.isJSXElement()) return false;\n          const parentName = getName(p.node.openingElement);\n          if (!parentName || !/^[A-Z]/.test(parentName)) return false;\n\n          // Check if parent was detected as composite portal\n          return usageIsCompositePortal({\n            elementName: parentName,\n            jsxPath: p,\n            state,\n            t,\n            traverse,\n            parser,\n            RADIX_ROOTS,\n          });\n        })();\n\n        // üö´ If this element is a direct child of a Trigger/asChild/Slot,\n        // or itself a primitive/root, DO NOT WRAP ‚Äî stamp x-* on the element itself\n        // and mark it with x-excluded=\"true\".\n        if (\n          hasProp(openingElement, \"asChild\") ||\n          isPortalPrimitive(elementName) ||\n          RADIX_ROOTS.has(elementName) ||\n          isDirectChildOfAsChildOrTrigger(jsxPath) ||\n          parentIsCompositePortal\n        ) {\n          pushMetaAttrs(\n            openingElement,\n            { normalizedPath, lineNumber, elementName, isDynamic, sourceInfo, arrayContext },\n            { markExcluded: true },\n          );\n          return;\n        }\n\n        // NEW: dynamic composite detection (e.g., DemoPopover renders Popover primitives)\n        const compositePortal = usageIsCompositePortal({\n          elementName,\n          jsxPath,\n          state,\n          t,\n          traverse,\n          parser,\n          RADIX_ROOTS,\n        });\n\n        if (compositePortal) {\n          // Composite portal: stamp + mark excluded\n          pushMetaAttrs(\n            openingElement,\n            { normalizedPath, lineNumber, elementName, isDynamic, sourceInfo, arrayContext },\n            { markExcluded: true },\n          );\n          return;\n        }\n\n        // ‚úÖ Normal case: add metadata attributes directly\n        pushMetaAttrs(\n          openingElement,\n          { normalizedPath, lineNumber, elementName, isDynamic, sourceInfo, arrayContext },\n        );\n      },\n\n      // Add metadata to native HTML elements (lowercase JSX)\n      JSXOpeningElement(jsxPath, state) {\n        if (!jsxPath.node.name || !jsxPath.node.name.name) {\n          return;\n        }\n\n        const elementName = jsxPath.node.name.name;\n\n        // Skip fragments\n        if (elementName === \"Fragment\") {\n          return;\n        }\n\n        // Only process lowercase (native HTML)\n        if (/^[A-Z]/.test(elementName)) {\n          return;\n        }\n\n        // Skip if already has metadata\n        const hasDebugAttr = jsxPath.node.attributes.some(\n          (attr) =>\n            t.isJSXAttribute(attr) &&\n            attr.name &&\n            attr.name.name &&\n            attr.name.name.startsWith(\"x-\"),\n        );\n        if (hasDebugAttr) return;\n\n        // Get source location\n        const filename =\n          state.filename ||\n          state.file?.opts?.filename ||\n          state.file?.sourceFileName ||\n          \"unknown\";\n\n        const lineNumber = jsxPath.node.loc?.start.line || 0;\n\n        if (!fileNameCache.has(filename)) {\n          const base = path.basename(filename).replace(/\\.[jt]sx?$/, \"\");\n          fileNameCache.set(filename, base);\n        }\n        const normalizedPath = fileNameCache.get(filename) || \"unknown\";\n\n        // Detect if native element is dynamic:\n        // 1. Inside an array iteration (.map(), etc.)\n        // 2. Has expression children (like {variable} or {obj.prop})\n        const parentElement = jsxPath.parentPath; // JSXElement containing this opening element\n        const isInArrayMethod = parentElement ? isJSXDynamic(parentElement) : false;\n        const hasExpressions = parentElement && parentElement.node ? hasAnyExpression(parentElement.node) : false;\n        const isDynamic = isInArrayMethod || hasExpressions;\n\n        // Analyze expression sources if element has expressions\n        let sourceInfo = null;\n        let arrayContext = null;\n\n        if (isDynamic && parentElement && parentElement.node) {\n          // Find expression children and analyze them\n          const children = parentElement.node.children || [];\n          for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (t.isJSXExpressionContainer(child) && !t.isJSXEmptyExpression(child.expression)) {\n              // Get the path to this expression container\n              const exprContainerPath = parentElement.get(`children.${i}`);\n              if (exprContainerPath && exprContainerPath.node) {\n                const exprPath = exprContainerPath.get(\"expression\");\n                if (exprPath && exprPath.node) {\n                  sourceInfo = analyzeExpression(exprPath, state);\n                  if (sourceInfo && sourceInfo.arrayContext) {\n                    arrayContext = sourceInfo.arrayContext;\n                  }\n                }\n              }\n              break; // Only analyze first expression\n            }\n          }\n\n          // If no expression children, check if we're in array iteration context\n          if (!sourceInfo) {\n            const iterContext = getArrayIterationContext(parentElement, state);\n            if (iterContext) {\n              arrayContext = iterContext;\n              sourceInfo = {\n                type: iterContext.isEditable ? \"static-imported\" : \"external\",\n                varName: iterContext.arrayVar,\n                file: iterContext.arrayFile,\n                absFile: iterContext.absFile,\n                line: iterContext.arrayLine,\n                isEditable: iterContext.isEditable,\n              };\n            }\n          }\n        }\n\n        // Build metadata attributes\n        const metaAttrs = [\n          t.jsxAttribute(\n            t.jsxIdentifier(\"x-file-name\"),\n            t.stringLiteral(normalizedPath),\n          ),\n          t.jsxAttribute(\n            t.jsxIdentifier(\"x-line-number\"),\n            t.stringLiteral(String(lineNumber)),\n          ),\n          t.jsxAttribute(\n            t.jsxIdentifier(\"x-component\"),\n            t.stringLiteral(elementName),\n          ),\n          t.jsxAttribute(\n            t.jsxIdentifier(\"x-id\"),\n            t.stringLiteral(`${normalizedPath}_${lineNumber}`),\n          ),\n          t.jsxAttribute(\n            t.jsxIdentifier(\"x-dynamic\"),\n            t.stringLiteral(isDynamic ? \"true\" : \"false\"),\n          ),\n        ];\n\n        // Add source tracking attributes if available\n        if (sourceInfo) {\n          if (sourceInfo.type) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-source-type\"), t.stringLiteral(sourceInfo.type))\n            );\n          }\n          if (sourceInfo.varName) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-source-var\"), t.stringLiteral(sourceInfo.varName))\n            );\n          }\n          if (sourceInfo.file) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-source-file\"), t.stringLiteral(sourceInfo.file))\n            );\n          }\n          if (sourceInfo.absFile) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-source-file-abs\"), t.stringLiteral(sourceInfo.absFile))\n            );\n          }\n          if (sourceInfo.line) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-source-line\"), t.stringLiteral(String(sourceInfo.line)))\n            );\n          }\n          if (sourceInfo.path) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-source-path\"), t.stringLiteral(sourceInfo.path))\n            );\n          }\n          metaAttrs.push(\n            t.jsxAttribute(\n              t.jsxIdentifier(\"x-source-editable\"),\n              t.stringLiteral(sourceInfo.isEditable ? \"true\" : \"false\")\n            )\n          );\n        }\n\n        // Add array iteration context if available\n        if (arrayContext) {\n          if (arrayContext.arrayVar) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-array-var\"), t.stringLiteral(arrayContext.arrayVar))\n            );\n          }\n          if (arrayContext.arrayFile) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-array-file\"), t.stringLiteral(arrayContext.arrayFile))\n            );\n          }\n          if (arrayContext.arrayLine) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-array-line\"), t.stringLiteral(String(arrayContext.arrayLine)))\n            );\n          }\n          if (arrayContext.itemParam) {\n            metaAttrs.push(\n              t.jsxAttribute(t.jsxIdentifier(\"x-array-item-param\"), t.stringLiteral(arrayContext.itemParam))\n            );\n          }\n        }\n\n        // Add metadata attributes\n        insertMetaAttributes(jsxPath.node, metaAttrs);\n      },\n    },\n  };\n};\n\nmodule.exports = babelMetadataPlugin;\n","path":null,"size_bytes":68973,"size_tokens":null},"frontend/src/components/ui/card.jsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"rounded-xl border bg-card text-card-foreground shadow\", className)}\n    {...props} />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props} />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props} />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props} />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props} />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1440,"size_tokens":null}},"version":2}